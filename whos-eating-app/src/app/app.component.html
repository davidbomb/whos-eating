<div class="container">
  <!-- ğŸ° DÃ‰CORATION CHÃ‚TEAU HAUT ğŸ° -->
  <div class="castle-decoration-top">
    <div class="torch torch-left">ğŸ•¯ï¸</div>
    <div class="castle-banner">
      <div class="banner-flag">âšœï¸</div>
    </div>
    <div class="torch torch-right">ğŸ•¯ï¸</div>
  </div>

  <header class="header">
    <!-- Ornements de coins mÃ©diÃ©vaux -->
    <div class="corner-ornament corner-top-left"></div>
    <div class="corner-ornament corner-top-right"></div>
    <div class="corner-ornament corner-bottom-left"></div>
    <div class="corner-ornament corner-bottom-right"></div>

    <h1 class="title">{{ title }}</h1>
    <div class="date">{{ getCurrentDate() }}</div>
  </header>

  <div class="counter-section">
    <!-- BanniÃ¨res de festin -->

    <div class="table-container">
      <div class="table-top">
        <div class="table-wood-grain"></div>
        <div class="counter-number">{{ totalCount }}</div>
        <div class="counter-label">convive{{ totalCount > 1 ? 's' : '' }}</div>

        <!-- Assiettes autour de la table - positionnement dynamique -->
        <div class="plates-container">
          <div
            *ngFor="let plate of getPlates(); let i = index"
            class="plate"
            [style.top.%]="plate.top"
            [style.left.%]="plate.left"
            [style.transform]="plate.transform">
            <div class="plate-inner"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- CandÃ©labres -->
    <div class="candelabra candelabra-left">ğŸ•¯ï¸</div>
    <div class="candelabra candelabra-right">ğŸ•¯ï¸</div>
  </div>

  <div class="add-section">
    <!-- Couronne royale -->

    <h2 class="section-title">
      <span class="title-decoration">ğŸ°</span>
      Qui vient manger ?
      <span class="title-decoration">ğŸ°</span>
    </h2>

    <div class="family-grid">
      <div *ngFor="let member of familyMembers" class="member-card">
        <button
          class="member-btn"
          [class.registered]="hasMemberRegistered(member)"
          [disabled]="hasMemberRegistered(member)"
          (click)="addMember(member)">
          <span class="member-name">{{ member }}</span>
          <span class="member-status">{{ hasMemberRegistered(member) ? 'âšœï¸' : 'â•' }}</span>
        </button>

        <div class="member-actions" *ngIf="hasMemberRegistered(member)">
          <button class="action-btn guest-add-btn" (click)="openGuestForm(member)" title="Ajouter un invitÃ©">
            ğŸ­+
          </button>
          <button class="action-btn member-remove-btn" (click)="removeMember(member)" title="Se dÃ©sinscrire">
            âš”ï¸
          </button>
        </div>
      </div>
    </div>

    <!-- Pieds de section mÃ©diÃ©vaux -->
    <div class="section-footer">
      <span class="footer-ornament">âœ¦</span>
      <span class="footer-ornament">âœ¦</span>
      <span class="footer-ornament">âœ¦</span>
    </div>
  </div>

  <div class="participants-section" *ngIf="participants.length > 0">
    <!-- Trompettes d'annonce -->
    <div class="trumpet trumpet-left">ğŸº</div>
    <div class="trumpet trumpet-right">ğŸº</div>

    <h2 class="section-title">
      <span class="title-decoration"></span>
      Participants ({{ totalCount }})
      <span class="title-decoration"></span>
    </h2>

    <div class="participants-list">
      <div *ngFor="let participant of participants" class="participant-card">
        <div class="participant-info">
          <span class="participant-icon">{{ participant.isGuest ? 'ğŸ­' : 'ğŸ«…ğŸ»' }}</span>
          <div class="participant-details">
            <span class="participant-name">{{ participant.name }}</span>
            <span class="participant-label" *ngIf="participant.isGuest">
              (invitÃ© de {{ participant.addedBy }})
            </span>
          </div>
        </div>
        <button class="remove-btn" (click)="removeParticipant(participant)" title="Retirer">âš”ï¸</button>
      </div>
    </div>

  </div>

  <div class="modal-overlay" *ngIf="showGuestForm" (click)="cancelGuestForm()">
    <div class="modal" (click)="$event.stopPropagation()">
      <!-- BanniÃ¨re du modal -->
      <div class="modal-banner">
      </div>

      <h3 class="modal-title">
        InvitÃ© de {{ selectedMember }}
      </h3>

      <input
        type="text"
        class="guest-input"
        [(ngModel)]="guestName"
        placeholder="Nom de l'invitÃ©"
        (keyup.enter)="addGuest(selectedMember)"
        autofocus>

      <div class="modal-buttons">
        <button class="btn-cancel" (click)="cancelGuestForm()">
          <span class="btn-icon">âœ•</span>
          Annuler
        </button>
        <button class="btn-confirm" (click)="addGuest(selectedMember)" [disabled]="!guestName.trim()">
          <span class="btn-icon">âšœï¸</span>
          Ajouter
        </button>
      </div>

      <!-- DÃ©coration bas modal -->
      <div class="modal-decoration">
        <span>âœ¦</span>
        <span>âœ¦</span>
        <span>âœ¦</span>
      </div>
    </div>
  </div>

  <footer class="footer" *ngIf="participants.length > 0">
    <div class="footer-decoration">
    </div>
    <button class="reset-btn" (click)="resetDay()">
      <span class="reset-icon">âš”ï¸</span>
      RÃ©initialiser le Festin
    </button>
  </footer>

  <!-- ğŸ° DÃ‰CORATION CHÃ‚TEAU BAS ğŸ° -->
  <div class="castle-decoration-bottom">
    <div class="castle-foundation">
      <span class="foundation-stone">â–ªï¸</span>
      <span class="foundation-stone">â–ªï¸</span>
      <span class="foundation-stone">â–ªï¸</span>
      <span class="foundation-stone">â–ªï¸</span>
      <span class="foundation-stone">â–ªï¸</span>
    </div>
  </div>
</div>
