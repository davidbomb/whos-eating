var FE=Object.defineProperty,LE=Object.defineProperties;var VE=Object.getOwnPropertyDescriptors;var ki=Object.getOwnPropertySymbols;var xf=Object.prototype.hasOwnProperty,Af=Object.prototype.propertyIsEnumerable;var Nf=(e,t,n)=>t in e?FE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||={})xf.call(t,n)&&Nf(e,n,t[n]);if(ki)for(var n of ki(t))Af.call(t,n)&&Nf(e,n,t[n]);return e},W=(e,t)=>LE(e,VE(t));var Rf=(e,t)=>{var n={};for(var r in e)xf.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ki)for(var r of ki(e))t.indexOf(r)<0&&Af.call(e,r)&&(n[r]=e[r]);return n};var j=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});function Aa(e,t){return Object.is(e,t)}var Q=null,Fi=!1,Ra=1,ke=Symbol("SIGNAL");function A(e){let t=Q;return Q=e,t}function Oa(){return Q}var yr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vi(e){if(Fi)throw new Error("");if(Q===null)return;Q.consumerOnSignalRead(e);let t=Q.nextProducerIndex++;if(Ui(Q),t<Q.producerNode.length&&Q.producerNode[t]!==e&&mr(Q)){let n=Q.producerNode[t];Bi(n,Q.producerIndexOfThis[t])}Q.producerNode[t]!==e&&(Q.producerNode[t]=e,Q.producerIndexOfThis[t]=mr(Q)?Pf(e,Q,t):0),Q.producerLastReadVersion[t]=e.version}function Of(){Ra++}function Pa(e){if(!(mr(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Ra)){if(!e.producerMustRecompute(e)&&!Va(e)){xa(e);return}e.producerRecomputeValue(e),xa(e)}}function ka(e){if(e.liveConsumerNode===void 0)return;let t=Fi;Fi=!0;try{for(let n of e.liveConsumerNode)n.dirty||jE(n)}finally{Fi=t}}function Fa(){return Q?.consumerAllowSignalWrites!==!1}function jE(e){e.dirty=!0,ka(e),e.consumerMarkedDirty?.(e)}function xa(e){e.dirty=!1,e.lastCleanEpoch=Ra}function ji(e){return e&&(e.nextProducerIndex=0),A(e)}function La(e,t){if(A(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(mr(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Bi(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Va(e){Ui(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Pa(n),r!==n.version))return!0}return!1}function ja(e){if(Ui(e),mr(e))for(let t=0;t<e.producerNode.length;t++)Bi(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Pf(e,t,n){if(kf(e),e.liveConsumerNode.length===0&&Ff(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=Pf(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function Bi(e,t){if(kf(e),e.liveConsumerNode.length===1&&Ff(e))for(let r=0;r<e.producerNode.length;r++)Bi(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Ui(i),i.producerIndexOfThis[r]=t}}function mr(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ui(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function kf(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Ff(e){return e.producerNode!==void 0}function Ba(e,t){let n=Object.create(BE);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(Pa(n),Vi(n),n.value===Li)throw n.error;return n.value};return r[ke]=n,r}var Sa=Symbol("UNSET"),Na=Symbol("COMPUTING"),Li=Symbol("ERRORED"),BE=W(b({},yr),{value:Sa,dirty:!0,error:null,equal:Aa,kind:"computed",producerMustRecompute(e){return e.value===Sa||e.value===Na},producerRecomputeValue(e){if(e.value===Na)throw new Error("Detected cycle in computations.");let t=e.value;e.value=Na;let n=ji(e),r,i=!1;try{r=e.computation(),A(null),i=t!==Sa&&t!==Li&&r!==Li&&e.equal(t,r)}catch(o){r=Li,e.error=o}finally{La(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function UE(){throw new Error}var Lf=UE;function Vf(e){Lf(e)}function Ua(e){Lf=e}var HE=null;function Ha(e,t){let n=Object.create(Ga);n.value=e,t!==void 0&&(n.equal=t);let r=()=>(Vi(n),n.value);return r[ke]=n,r}function Hi(e,t){Fa()||Vf(e),e.equal(e.value,t)||(e.value=t,$E(e))}function $a(e,t){Fa()||Vf(e),Hi(e,t(e.value))}var Ga=W(b({},yr),{equal:Aa,value:void 0,kind:"signal"});function $E(e){e.version++,Of(),ka(e),HE?.()}function Wa(e){let t=A(null);try{return e()}finally{A(t)}}var za;function vr(){return za}function st(e){let t=za;return za=e,t}var $i=Symbol("NotFound");function R(e){return typeof e=="function"}function Gi(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Wi=Gi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function _r(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var le=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(R(r))try{r()}catch(o){t=o instanceof Wi?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{jf(o)}catch(s){t=t??[],s instanceof Wi?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Wi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)jf(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&_r(n,t)}remove(t){let{_finalizers:n}=this;n&&_r(n,t),t instanceof e&&t._removeParent(this)}};le.EMPTY=(()=>{let e=new le;return e.closed=!0,e})();var qa=le.EMPTY;function zi(e){return e instanceof le||e&&"closed"in e&&R(e.remove)&&R(e.add)&&R(e.unsubscribe)}function jf(e){R(e)?e():e.unsubscribe()}var Fe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mn={setTimeout(e,t,...n){let{delegate:r}=mn;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=mn;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function qi(e){mn.setTimeout(()=>{let{onUnhandledError:t}=Fe;if(t)t(e);else throw e})}function Ya(){}var Bf=Za("C",void 0,void 0);function Uf(e){return Za("E",void 0,e)}function Hf(e){return Za("N",e,void 0)}function Za(e,t,n){return{kind:e,value:t,error:n}}var Vt=null;function yn(e){if(Fe.useDeprecatedSynchronousErrorHandling){let t=!Vt;if(t&&(Vt={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Vt;if(Vt=null,n)throw r}}else e()}function $f(e){Fe.useDeprecatedSynchronousErrorHandling&&Vt&&(Vt.errorThrown=!0,Vt.error=e)}var jt=class extends le{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,zi(t)&&t.add(this)):this.destination=ZE}static create(t,n,r){return new vn(t,n,r)}next(t){this.isStopped?Qa(Hf(t),this):this._next(t)}error(t){this.isStopped?Qa(Uf(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Qa(Bf,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qE=Function.prototype.bind;function Ka(e,t){return qE.call(e,t)}var Xa=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Yi(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Yi(r)}else Yi(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Yi(n)}}},vn=class extends jt{constructor(t,n,r){super();let i;if(R(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Fe.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ka(t.next,o),error:t.error&&Ka(t.error,o),complete:t.complete&&Ka(t.complete,o)}):i=t}this.destination=new Xa(i)}};function Yi(e){Fe.useDeprecatedSynchronousErrorHandling?$f(e):qi(e)}function YE(e){throw e}function Qa(e,t){let{onStoppedNotification:n}=Fe;n&&mn.setTimeout(()=>n(e,t))}var ZE={closed:!0,next:Ya,error:YE,complete:Ya};var _n=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zi(e){return e}function Gf(e){return e.length===0?Zi:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var re=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=QE(n)?n:new vn(n,r,i);return yn(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Wf(r),new r((i,o)=>{let s=new vn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[_n](){return this}pipe(...n){return Gf(n)(this)}toPromise(n){return n=Wf(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Wf(e){var t;return(t=e??Fe.Promise)!==null&&t!==void 0?t:Promise}function KE(e){return e&&R(e.next)&&R(e.error)&&R(e.complete)}function QE(e){return e&&e instanceof jt||KE(e)&&zi(e)}function XE(e){return R(e?.lift)}function Ct(e){return t=>{if(XE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wt(e,t,n,r,i){return new Ja(e,t,n,r,i)}var Ja=class extends jt{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var zf=Gi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class e extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ki(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new zf}next(n){yn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){yn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){yn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?qa:(this.currentObservers=null,o.push(n),new le(()=>{this.currentObservers=null,_r(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new re;return n.source=this,n}}return e.create=(t,n)=>new Ki(t,n),e})(),Ki=class extends at{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:qa}};var Bt=class extends at{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};function qf(e){return e&&R(e.schedule)}function Yf(e){return e[e.length-1]}function Zf(e){return R(Yf(e))?e.pop():void 0}function Kf(e){return qf(Yf(e))?e.pop():void 0}function Xf(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Qf(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ut(e){return this instanceof Ut?(this.v=e,this):new Ut(e)}function Jf(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(w,$){o.push([h,m,w,$])>1||c(h,m)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(m){f(o[0][3],m)}}function l(h){h.value instanceof Ut?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function eh(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Qf=="function"?Qf(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Qi=e=>e&&typeof e.length=="number"&&typeof e!="function";function Xi(e){return R(e?.then)}function Ji(e){return R(e[_n])}function eo(e){return Symbol.asyncIterator&&R(e?.[Symbol.asyncIterator])}function to(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function JE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var no=JE();function ro(e){return R(e?.[no])}function io(e){return Jf(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Ut(n.read());if(i)return yield Ut(void 0);yield yield Ut(r)}}finally{n.releaseLock()}})}function oo(e){return R(e?.getReader)}function bt(e){if(e instanceof re)return e;if(e!=null){if(Ji(e))return eD(e);if(Qi(e))return tD(e);if(Xi(e))return nD(e);if(eo(e))return th(e);if(ro(e))return rD(e);if(oo(e))return iD(e)}throw to(e)}function eD(e){return new re(t=>{let n=e[_n]();if(R(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function tD(e){return new re(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function nD(e){return new re(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,qi)})}function rD(e){return new re(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function th(e){return new re(t=>{oD(e,t).catch(n=>t.error(n))})}function iD(e){return th(io(e))}function oD(e,t){var n,r,i,o;return Xf(this,void 0,void 0,function*(){try{for(n=eh(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function We(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function so(e,t=0){return Ct((n,r)=>{n.subscribe(wt(r,i=>We(r,e,()=>r.next(i),t),()=>We(r,e,()=>r.complete(),t),i=>We(r,e,()=>r.error(i),t)))})}function ao(e,t=0){return Ct((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function nh(e,t){return bt(e).pipe(ao(t),so(t))}function rh(e,t){return bt(e).pipe(ao(t),so(t))}function ih(e,t){return new re(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function oh(e,t){return new re(n=>{let r;return We(n,t,()=>{r=e[no](),We(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>R(r?.return)&&r.return()})}function co(e,t){if(!e)throw new Error("Iterable cannot be null");return new re(n=>{We(n,t,()=>{let r=e[Symbol.asyncIterator]();We(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function sh(e,t){return co(io(e),t)}function ah(e,t){if(e!=null){if(Ji(e))return nh(e,t);if(Qi(e))return ih(e,t);if(Xi(e))return rh(e,t);if(eo(e))return co(e,t);if(ro(e))return oh(e,t);if(oo(e))return sh(e,t)}throw to(e)}function Er(e,t){return t?ah(e,t):bt(e)}function ec(...e){let t=Kf(e);return Er(e,t)}function Ht(e,t){return Ct((n,r)=>{let i=0;n.subscribe(wt(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:sD}=Array;function aD(e,t){return sD(t)?e(...t):e(t)}function ch(e){return Ht(t=>aD(e,t))}var{isArray:cD}=Array,{getPrototypeOf:lD,prototype:uD,keys:dD}=Object;function lh(e){if(e.length===1){let t=e[0];if(cD(t))return{args:t,keys:null};if(fD(t)){let n=dD(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function fD(e){return e&&typeof e=="object"&&lD(e)===uD}function uh(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function tc(...e){let t=Zf(e),{args:n,keys:r}=lh(e),i=new re(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;bt(n[u]).subscribe(wt(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?uh(r,a):a),o.complete())}))}});return t?i.pipe(ch(t)):i}function nc(e,t,n){let r=R(e)||t||n?{next:e,error:t,complete:n}:e;return r?Ct((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(wt(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Zi}var ac={JSACTION:"jsaction"},cc={JSACTION:"__jsaction",OWNER:"__owner"},ph={};function hD(e){return e[cc.JSACTION]}function dh(e,t){e[cc.JSACTION]=t}function pD(e){return ph[e]}function gD(e,t){ph[e]=t}var v={CLICK:"click",CLICKMOD:"clickmod",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",ERROR:"error",LOAD:"load",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TOGGLE:"toggle"},mD=[v.MOUSEENTER,v.MOUSELEAVE,"pointerenter","pointerleave"],Zk=[v.CLICK,v.DBLCLICK,v.FOCUSIN,v.FOCUSOUT,v.KEYDOWN,v.KEYUP,v.KEYPRESS,v.MOUSEOVER,v.MOUSEOUT,v.SUBMIT,v.TOUCHSTART,v.TOUCHEND,v.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],yD=[v.FOCUS,v.BLUR,v.ERROR,v.LOAD,v.TOGGLE],lc=e=>yD.indexOf(e)>=0;function vD(e){return e===v.MOUSEENTER?v.MOUSEOVER:e===v.MOUSELEAVE?v.MOUSEOUT:e===v.POINTERENTER?v.POINTEROVER:e===v.POINTERLEAVE?v.POINTEROUT:e}function _D(e,t,n,r){let i=!1;lc(t)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return e.addEventListener(t,n,o),{eventType:t,handler:n,capture:i,passive:r}}function ED(e,t){if(e.removeEventListener){let n=typeof t.passive=="boolean"?{capture:t.capture}:t.capture;e.removeEventListener(t.eventType,t.handler,n)}else e.detachEvent&&e.detachEvent(`on${t.eventType}`,t.handler)}function DD(e){e.preventDefault?e.preventDefault():e.returnValue=!1}var fh=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function CD(e){return e.which===2||e.which==null&&e.button===4}function wD(e){return fh&&e.metaKey||!fh&&e.ctrlKey||CD(e)||e.shiftKey}function bD(e,t,n){let r=e.relatedTarget;return(e.type===v.MOUSEOVER&&t===v.MOUSEENTER||e.type===v.MOUSEOUT&&t===v.MOUSELEAVE||e.type===v.POINTEROVER&&t===v.POINTERENTER||e.type===v.POINTEROUT&&t===v.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function ID(e,t){let n={};for(let r in e){if(r==="srcElement"||r==="target")continue;let i=r,o=e[i];typeof o!="function"&&(n[i]=o)}return e.type===v.MOUSEOVER?n.type=v.MOUSEENTER:e.type===v.MOUSEOUT?n.type=v.MOUSELEAVE:e.type===v.POINTEROVER?n.type=v.POINTERENTER:n.type=v.POINTERLEAVE,n.target=n.srcElement=t,n.bubbles=!1,n._originalEvent=e,n}var TD=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),ho=class{element;handlerInfos=[];constructor(t){this.element=t}addEventListener(t,n,r){TD&&(this.element.style.cursor="pointer"),this.handlerInfos.push(_D(this.element,t,n(this.element),r))}cleanUp(){for(let t=0;t<this.handlerInfos.length;t++)ED(this.element,this.handlerInfos[t]);this.handlerInfos=[]}},MD={EVENT_ACTION_SEPARATOR:":"};function It(e){return e.eventType}function uc(e,t){e.eventType=t}function uo(e){return e.event}function gh(e,t){e.event=t}function mh(e){return e.targetElement}function yh(e,t){e.targetElement=t}function vh(e){return e.eic}function SD(e,t){e.eic=t}function ND(e){return e.timeStamp}function xD(e,t){e.timeStamp=t}function fo(e){return e.eia}function _h(e,t,n){e.eia=[t,n]}function rc(e){e.eia=void 0}function lo(e){return e[1]}function AD(e){return e.eirp}function Eh(e,t){e.eirp=t}function Dh(e){return e.eir}function Ch(e,t){e.eir=t}function wh(e){return{eventType:e.eventType,event:e.event,targetElement:e.targetElement,eic:e.eic,eia:e.eia,timeStamp:e.timeStamp,eirp:e.eirp,eiack:e.eiack,eir:e.eir}}function RD(e,t,n,r,i,o,s,a){return{eventType:e,event:t,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var ic=class e{eventInfo;constructor(t){this.eventInfo=t}getEventType(){return It(this.eventInfo)}setEventType(t){uc(this.eventInfo,t)}getEvent(){return uo(this.eventInfo)}setEvent(t){gh(this.eventInfo,t)}getTargetElement(){return mh(this.eventInfo)}setTargetElement(t){yh(this.eventInfo,t)}getContainer(){return vh(this.eventInfo)}setContainer(t){SD(this.eventInfo,t)}getTimestamp(){return ND(this.eventInfo)}setTimestamp(t){xD(this.eventInfo,t)}getAction(){let t=fo(this.eventInfo);if(t)return{name:t[0],element:t[1]}}setAction(t){if(!t){rc(this.eventInfo);return}_h(this.eventInfo,t.name,t.element)}getIsReplay(){return AD(this.eventInfo)}setIsReplay(t){Eh(this.eventInfo,t)}getResolved(){return Dh(this.eventInfo)}setResolved(t){Ch(this.eventInfo,t)}clone(){return new e(wh(this.eventInfo))}},OD={},PD=/\s*;\s*/,kD=v.CLICK,oc=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:t=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=t,this.clickModSupport=n}resolveEventType(t){this.clickModSupport&&It(t)===v.CLICK&&wD(uo(t))?uc(t,v.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(t)}resolveAction(t){Dh(t)||(this.populateAction(t,mh(t)),Ch(t,!0))}resolveParentAction(t){let n=fo(t),r=n&&lo(n);rc(t);let i=r&&this.getParentNode(r);i&&this.populateAction(t,i)}populateAction(t,n){let r=n;for(;r&&r!==vh(t)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,t),!fo(t));)r=this.getParentNode(r);let i=fo(t);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(t),this.syntheticMouseEventSupport&&(It(t)===v.MOUSEENTER||It(t)===v.MOUSELEAVE||It(t)===v.POINTERENTER||It(t)===v.POINTERLEAVE)))if(bD(uo(t),It(t),lo(i))){let o=ID(uo(t),lo(i));gh(t,o),yh(t,lo(i))}else rc(t)}getParentNode(t){let n=t[cc.OWNER];if(n)return n;let r=t.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(t,n){let r=this.parseActions(t),i=r[It(n)];i!==void 0&&_h(n,i,t),this.a11yClickSupport&&this.populateClickOnlyAction(t,n,r)}parseActions(t){let n=hD(t);if(!n){let r=t.getAttribute(ac.JSACTION);if(!r)n=OD,dh(t,n);else{if(n=pD(r),!n){n={};let i=r.split(PD);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(MD.EVENT_ACTION_SEPARATOR),c=a!==-1,l=c?s.substr(0,a).trim():kD,u=c?s.substr(a+1).trim():s;n[l]=u}gD(r,n)}dh(t,n)}}return n}addA11yClickSupport(t,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=t,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},bh=function(e){return e[e.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",e}(bh||{}),sc=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(t,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=t,this.actionResolver=n,this.eventReplayer=r}dispatch(t){let n=new ic(t);this.actionResolver?.resolveEventType(t),this.actionResolver?.resolveAction(t);let r=n.getAction();if(r&&FD(r.element,n)&&DD(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(t){this.replayEventInfoWrappers.push(t),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function FD(e,t){return e.tagName==="A"&&(t.getEventType()===v.CLICK||t.getEventType()===v.CLICKMOD)}var Ih=Symbol.for("propagationStopped"),dc={REPLAY:101};var LD="`preventDefault` called during event replay.";var VD="`composedPath` called during event replay.",po=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(t,n=!0){this.dispatchDelegate=t,this.clickModSupport=n,this.actionResolver=new oc({clickModSupport:n}),this.dispatcher=new sc(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(t){this.dispatcher.dispatch(t)}dispatchToDelegate(t){for(t.getIsReplay()&&UD(t),jD(t);t.getAction();){if(HD(t),lc(t.getEventType())&&t.getAction().element!==t.getTargetElement()||(this.dispatchDelegate(t.getEvent(),t.getAction().name),BD(t)))return;this.actionResolver.resolveParentAction(t.eventInfo)}}};function jD(e){let t=e.getEvent(),n=e.getEvent().stopPropagation.bind(t),r=()=>{t[Ih]=!0,n()};$t(t,"stopPropagation",r),$t(t,"stopImmediatePropagation",r)}function BD(e){return!!e.getEvent()[Ih]}function UD(e){let t=e.getEvent(),n=e.getTargetElement(),r=t.preventDefault.bind(t);$t(t,"target",n),$t(t,"eventPhase",dc.REPLAY),$t(t,"preventDefault",()=>{throw r(),new Error(LD+"")}),$t(t,"composedPath",()=>{throw new Error(VD+"")})}function HD(e){let t=e.getEvent(),n=e.getAction()?.element;n&&$t(t,"currentTarget",n,{configurable:!0})}function $t(e,t,n,{configurable:r=!1}={}){Object.defineProperty(e,t,{value:n,configurable:r})}function Th(e,t){e.ecrd(n=>{t.dispatch(n)},bh.I_AM_THE_JSACTION_FRAMEWORK)}function $D(e){return e?.q??[]}function GD(e){e&&(hh(e.c,e.et,e.h),hh(e.c,e.etc,e.h,!0))}function hh(e,t,n,r){for(let i=0;i<t.length;i++)e.removeEventListener(t[i],n,r)}var WD=!1,Mh=(()=>{class e{static MOUSE_SPECIAL_SUPPORT=WD;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=RD(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){Eh(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!e.MOUSE_SPECIAL_SUPPORT&&mD.indexOf(n)>=0)return;let o=(a,c,l)=>{this.handleEvent(a,c,l)};this.eventHandlers[n]=o;let s=vD(r||n);if(s!==n){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(n),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{o(n,c,a)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),GD(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=wh(i);uc(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return e})();function Sh(e,t=window){return $D(t._ejsas?.[e])}function fc(e,t=window){t._ejsas&&(t._ejsas[e]=void 0)}var zD="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",E=class extends Error{code;constructor(t,n){super(yl(t,n)),this.code=t}};function qD(e){return`NG0${Math.abs(e)}`}function yl(e,t){return`${qD(e)}${t?": "+t:""}`}function Ar(e){return{toString:e}.toString()}var go="__parameters__";function YD(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function Sp(e,t,n){return Ar(()=>{let r=YD(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(go)?c[go]:Object.defineProperty(c,go,{value:[]})[go];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function G(e){for(let t in e)if(e[t]===G)return t;throw Error("Could not find renamed property on target object.")}function ZD(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function be(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(be).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Nh(e,t){return e?t?`${e} ${t}`:e:t||""}var KD=G({__forward_ref__:G});function Rr(e){return e.__forward_ref__=Rr,e.toString=function(){return be(this())},e}function ue(e){return Np(e)?e():e}function Np(e){return typeof e=="function"&&e.hasOwnProperty(KD)&&e.__forward_ref__===Rr}function F(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Fn(e){return{providers:e.providers||[],imports:e.imports||[]}}function vl(e){return xh(e,xp)||xh(e,Ap)}function xh(e,t){return e.hasOwnProperty(t)?e[t]:null}function QD(e){let t=e&&(e[xp]||e[Ap]);return t||null}function Ah(e){return e&&(e.hasOwnProperty(Rh)||e.hasOwnProperty(XD))?e[Rh]:null}var xp=G({\u0275prov:G}),Rh=G({\u0275inj:G}),Ap=G({ngInjectableDef:G}),XD=G({ngInjectorDef:G}),_=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=F({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Rp(e){return e&&!!e.\u0275providers}var JD=G({\u0275cmp:G}),eC=G({\u0275dir:G}),tC=G({\u0275pipe:G});var To=G({\u0275fac:G}),br=G({__NG_ELEMENT_ID__:G}),Oh=G({__NG_ENV_ID__:G});function Op(e){return typeof e=="string"?e:e==null?"":String(e)}function nC(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Op(e)}function Pp(e,t){throw new E(-200,e)}function _l(e,t){throw new E(-201,!1)}var T=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(T||{}),xc;function kp(){return xc}function De(e){let t=xc;return xc=e,t}function Fp(e,t,n){let r=vl(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&T.Optional)return null;if(t!==void 0)return t;_l(e,"Injector")}var rC={},Gt=rC,Ac="__NG_DI_FLAG__",Mo=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=n;return this.injector.get(t,r.optional?$i:Gt,r)}},So="ngTempTokenPath",iC="ngTokenPath",oC=/\n/gm,sC="\u0275",Ph="__source";function aC(e,t=T.Default){if(vr()===void 0)throw new E(-203,!1);if(vr()===null)return Fp(e,void 0,t);{let n=vr(),r;return n instanceof Mo?r=n.injector:r=n,r.get(e,t&T.Optional?null:void 0,t)}}function B(e,t=T.Default){return(kp()||aC)(ue(e),t)}function y(e,t=T.Default){return B(e,es(t))}function es(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Rc(e){let t=[];for(let n=0;n<e.length;n++){let r=ue(e[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=T.Default;for(let s=0;s<r.length;s++){let a=r[s],c=cC(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(B(i,o))}else t.push(B(r))}return t}function Lp(e,t){return e[Ac]=t,e.prototype[Ac]=t,e}function cC(e){return e[Ac]}function lC(e,t,n,r){let i=e[So];throw t[Ph]&&i.unshift(t[Ph]),e.message=uC(`
`+e.message,i,n,r),e[iC]=i,e[So]=null,e}function uC(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==sC?e.slice(2):e;let i=be(t);if(Array.isArray(t))i=t.map(be).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):be(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(oC,`
  `)}`}var Vp=Lp(Sp("Optional"),8);var dC=Lp(Sp("SkipSelf"),4);function Nn(e,t){let n=e.hasOwnProperty(To);return n?e[To]:null}function El(e,t){e.forEach(n=>Array.isArray(n)?El(n,t):t(n))}function jp(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function No(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function fC(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function hC(e,t,n){let r=Or(e,t);return r>=0?e[r|1]=n:(r=~r,fC(e,r,t,n)),r}function hc(e,t){let n=Or(e,t);if(n>=0)return e[n|1]}function Or(e,t){return pC(e,t,1)}function pC(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var zt={},Ce=[],qt=new _(""),Bp=new _("",-1),Up=new _(""),xo=class{get(t,n=Gt){if(n===Gt){let r=new Error(`NullInjectorError: No provider for ${be(t)}!`);throw r.name="NullInjectorError",r}return n}};function xn(e){return e[JD]||null}function Hp(e){return e[eC]||null}function $p(e){return e[tC]||null}function Pr(e){return{\u0275providers:e}}function gC(...e){return{\u0275providers:Dl(!0,e),\u0275fromNgModule:!0}}function Dl(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return El(t,s=>{let a=s;Oc(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Gp(i,o),n}function Gp(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Cl(i,o=>{t(o,r)})}}function Oc(e,t,n,r){if(e=ue(e),!e)return!1;let i=null,o=Ah(e),s=!o&&xn(e);if(!o&&!s){let c=e.ngModule;if(o=Ah(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Oc(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{El(o.imports,u=>{Oc(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Gp(l,t)}if(!a){let l=Nn(i)||(()=>new i);t({provide:i,useFactory:l,deps:Ce},i),t({provide:Up,useValue:i,multi:!0},i),t({provide:qt,useValue:()=>B(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;Cl(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function Cl(e,t){for(let n of e)Rp(n)&&(n=n.\u0275providers),Array.isArray(n)?Cl(n,t):t(n)}var mC=G({provide:String,useValue:G});function Wp(e){return e!==null&&typeof e=="object"&&mC in e}function yC(e){return!!(e&&e.useExisting)}function vC(e){return!!(e&&e.useFactory)}function An(e){return typeof e=="function"}function _C(e){return!!e.useClass}var ts=new _(""),_o={},kh={},pc;function wl(){return pc===void 0&&(pc=new xo),pc}var lt=class{},Ir=class extends lt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,kc(t,s=>this.processProvider(s)),this.records.set(Bp,En(void 0,this)),i.has("environment")&&this.records.set(lt,En(void 0,this));let o=this.records.get(ts);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Up,Ce,T.Self))}retrieve(t,n){let r=n;return this.get(t,r.optional?$i:Gt,r)}destroy(){Cr(this),this._destroyed=!0;let t=A(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),A(t)}}onDestroy(t){return Cr(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Cr(this);let n=st(this),r=De(void 0),i;try{return t()}finally{st(n),De(r)}}get(t,n=Gt,r=T.Default){if(Cr(this),t.hasOwnProperty(Oh))return t[Oh](this);r=es(r);let i,o=st(this),s=De(void 0);try{if(!(r&T.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=bC(t)&&vl(t);l&&this.injectableDefInScope(l)?c=En(Pc(t),_o):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c,r)}let a=r&T.Self?wl():this.parent;return n=r&T.Optional&&n===Gt?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[So]=a[So]||[]).unshift(be(t)),o)throw a;return lC(a,t,"R3InjectorError",this.source)}else throw a}finally{De(s),st(o)}}resolveInjectorInitializers(){let t=A(null),n=st(this),r=De(void 0),i;try{let o=this.get(qt,Ce,T.Self);for(let s of o)s()}finally{st(n),De(r),A(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(be(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=ue(t);let n=An(t)?t:ue(t&&t.provide),r=DC(t);if(!An(t)&&t.multi===!0){let i=this.records.get(n);i||(i=En(void 0,_o,!0),i.factory=()=>Rc(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=A(null);try{return n.value===kh?Pp(be(t)):n.value===_o&&(n.value=kh,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&wC(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{A(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ue(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Pc(e){let t=vl(e),n=t!==null?t.factory:Nn(e);if(n!==null)return n;if(e instanceof _)throw new E(204,!1);if(e instanceof Function)return EC(e);throw new E(204,!1)}function EC(e){if(e.length>0)throw new E(204,!1);let n=QD(e);return n!==null?()=>n.factory(e):()=>new e}function DC(e){if(Wp(e))return En(void 0,e.useValue);{let t=zp(e);return En(t,_o)}}function zp(e,t,n){let r;if(An(e)){let i=ue(e);return Nn(i)||Pc(i)}else if(Wp(e))r=()=>ue(e.useValue);else if(vC(e))r=()=>e.useFactory(...Rc(e.deps||[]));else if(yC(e))r=(i,o)=>B(ue(e.useExisting),o!==void 0&&o&T.Optional?T.Optional:void 0);else{let i=ue(e&&(e.useClass||e.provide));if(CC(e))r=()=>new i(...Rc(e.deps));else return Nn(i)||Pc(i)}return r}function Cr(e){if(e.destroyed)throw new E(205,!1)}function En(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function CC(e){return!!e.deps}function wC(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function bC(e){return typeof e=="function"||typeof e=="object"&&e instanceof _}function kc(e,t){for(let n of e)Array.isArray(n)?kc(n,t):n&&Rp(n)?kc(n.\u0275providers,t):t(n)}function bl(e,t){let n;e instanceof Ir?(Cr(e),n=e):n=new Mo(e);let r,i=st(n),o=De(void 0);try{return t()}finally{st(i),De(o)}}function qp(){return kp()!==void 0||vr()!=null}function Yp(e){if(!qp())throw new E(-203,!1)}function IC(e){return typeof e=="function"}var _e=0,D=1,C=2,ie=3,Ve=4,Ue=5,qe=6,Ao=7,de=8,Ye=9,Mt=10,z=11,Tr=12,Fh=13,Ln=14,Te=15,Rn=16,Dn=17,On=18,ns=19,Zp=20,Tt=21,gc=22,Ro=23,Ie=24,In=25,oe=26,Kp=1,ut=6,dt=7,Oo=8,Po=9,ve=10;function je(e){return Array.isArray(e)&&typeof e[Kp]=="object"}function Je(e){return Array.isArray(e)&&e[Kp]===!0}function Qp(e){return(e.flags&4)!==0}function Jt(e){return e.componentOffset>-1}function Il(e){return(e.flags&1)===1}function Ze(e){return!!e.template}function Mr(e){return(e[C]&512)!==0}function en(e){return(e[C]&256)===256}var Fc=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Xp(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Tl=(()=>{let e=()=>Jp;return e.ngInherit=!0,e})();function Jp(e){return e.type.prototype.ngOnChanges&&(e.setInput=MC),TC}function TC(){let e=tg(this),t=e?.current;if(t){let n=e.previous;if(n===zt)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function MC(e,t,n,r,i){let o=this.declaredInputs[r],s=tg(e)||SC(e,{previous:zt,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Fc(l&&l.currentValue,n,c===zt),Xp(e,t,i,n)}var eg="__ngSimpleChanges__";function tg(e){return e[eg]||null}function SC(e,t){return e[eg]=t}var Lh=null;var P=function(e,t=null,n){Lh?.(e,t,n)},NC="svg",xC="math";function Be(e){for(;Array.isArray(e);)e=e[_e];return e}function ng(e,t){return Be(t[e])}function et(e,t){return Be(t[e.index])}function rs(e,t){return e.data[t]}function Ke(e,t){let n=t[e];return je(n)?n:n[_e]}function Ml(e){return(e[C]&128)===128}function AC(e){return Je(e[ie])}function ko(e,t){return t==null?null:e[t]}function rg(e){e[Dn]=0}function ig(e){e[C]&1024||(e[C]|=1024,Ml(e)&&kr(e))}function RC(e,t){for(;e>0;)t=t[Ln],e--;return t}function is(e){return!!(e[C]&9216||e[Ie]?.dirty)}function Lc(e){e[Mt].changeDetectionScheduler?.notify(8),e[C]&64&&(e[C]|=1024),is(e)&&kr(e)}function kr(e){e[Mt].changeDetectionScheduler?.notify(0);let t=Yt(e);for(;t!==null&&!(t[C]&8192||(t[C]|=8192,!Ml(t)));)t=Yt(t)}function og(e,t){if(en(e))throw new E(911,!1);e[Tt]===null&&(e[Tt]=[]),e[Tt].push(t)}function OC(e,t){if(e[Tt]===null)return;let n=e[Tt].indexOf(t);n!==-1&&e[Tt].splice(n,1)}function Yt(e){let t=e[ie];return Je(t)?t[ie]:t}function sg(e){return e[Ao]??=[]}function ag(e){return e.cleanup??=[]}var N={lFrame:gg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Vc=!1;function PC(){return N.lFrame.elementDepthCount}function kC(){N.lFrame.elementDepthCount++}function FC(){N.lFrame.elementDepthCount--}function cg(){return N.bindingsEnabled}function Fr(){return N.skipHydrationRootTNode!==null}function LC(e){return N.skipHydrationRootTNode===e}function VC(e){N.skipHydrationRootTNode=e}function jC(){N.skipHydrationRootTNode=null}function Y(){return N.lFrame.lView}function Se(){return N.lFrame.tView}function Ne(e){return N.lFrame.contextLView=e,e[de]}function xe(e){return N.lFrame.contextLView=null,e}function Ee(){let e=lg();for(;e!==null&&e.type===64;)e=e.parent;return e}function lg(){return N.lFrame.currentTNode}function BC(){let e=N.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Lr(e,t){let n=N.lFrame;n.currentTNode=e,n.isParent=t}function ug(){return N.lFrame.isParent}function UC(){N.lFrame.isParent=!1}function dg(){return Vc}function Vh(e){let t=Vc;return Vc=e,t}function HC(e){return N.lFrame.bindingIndex=e}function Sl(){return N.lFrame.bindingIndex++}function $C(e){let t=N.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function GC(){return N.lFrame.inI18n}function WC(e,t){let n=N.lFrame;n.bindingIndex=n.bindingRootIndex=e,jc(t)}function zC(){return N.lFrame.currentDirectiveIndex}function jc(e){N.lFrame.currentDirectiveIndex=e}function qC(e){let t=N.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function fg(e){N.lFrame.currentQueryIndex=e}function YC(e){let t=e[D];return t.type===2?t.declTNode:t.type===1?e[Ue]:null}function hg(e,t,n){if(n&T.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&T.Host);)if(i=YC(o),i===null||(o=o[Ln],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=N.lFrame=pg();return r.currentTNode=t,r.lView=e,!0}function Nl(e){let t=pg(),n=e[D];N.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function pg(){let e=N.lFrame,t=e===null?null:e.child;return t===null?gg(e):t}function gg(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function mg(){let e=N.lFrame;return N.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var yg=mg;function xl(){let e=mg();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ZC(e){return(N.lFrame.contextLView=RC(e,N.lFrame.contextLView))[de]}function Vn(){return N.lFrame.selectedIndex}function Zt(e){N.lFrame.selectedIndex=e}function vg(){let e=N.lFrame;return rs(e.tView,e.selectedIndex)}function _g(){return N.lFrame.currentNamespace}var Eg=!0;function Al(){return Eg}function St(e){Eg=e}function KC(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Jp(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Dg(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Eo(e,t,n){Cg(e,t,3,n)}function Do(e,t,n,r){(e[C]&3)===n&&Cg(e,t,n,r)}function mc(e,t){let n=e[C];(n&3)===t&&(n&=16383,n+=1,e[C]=n)}function Cg(e,t,n,r){let i=r!==void 0?e[Dn]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Dn]+=65536),(a<o||o==-1)&&(QC(e,n,t,c),e[Dn]=(e[Dn]&4294901760)+c+2),c++}function jh(e,t){P(4,e,t);let n=A(null);try{t.call(e)}finally{A(n),P(5,e,t)}}function QC(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[C]>>14<e[Dn]>>16&&(e[C]&3)===t&&(e[C]+=16384,jh(a,o)):jh(a,o)}var Tn=-1,Kt=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=r}};function XC(e){return(e.flags&8)!==0}function JC(e){return(e.flags&16)!==0}function ew(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];nw(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function tw(e){return e===3||e===4||e===6}function nw(e){return e.charCodeAt(0)===64}function Sr(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Bh(e,n,i,null,t[++r]):Bh(e,n,i,null,null))}}return e}function Bh(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function wg(e){return e!==Tn}function Fo(e){return e&32767}function rw(e){return e>>16}function Lo(e,t){let n=rw(e),r=t;for(;n>0;)r=r[Ln],n--;return r}var Bc=!0;function Uh(e){let t=Bc;return Bc=e,t}var iw=256,bg=iw-1,Ig=5,ow=0,ze={};function sw(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(br)&&(r=n[br]),r==null&&(r=n[br]=ow++);let i=r&bg,o=1<<i;t.data[e+(i>>Ig)]|=o}function Vo(e,t){let n=Tg(e,t);if(n!==-1)return n;let r=t[D];r.firstCreatePass&&(e.injectorIndex=t.length,yc(r.data,e),yc(t,null),yc(r.blueprint,null));let i=Rl(e,t),o=e.injectorIndex;if(wg(i)){let s=Fo(i),a=Lo(i,t),c=a[D].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function yc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Tg(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Rl(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Rg(i),r===null)return Tn;if(n++,i=i[Ln],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Tn}function Uc(e,t,n){sw(e,t,n)}function Mg(e,t,n){if(n&T.Optional||e!==void 0)return e;_l(t,"NodeInjector")}function Sg(e,t,n,r){if(n&T.Optional&&r===void 0&&(r=null),(n&(T.Self|T.Host))===0){let i=e[Ye],o=De(void 0);try{return i?i.get(t,r,n&T.Optional):Fp(t,r,n&T.Optional)}finally{De(o)}}return Mg(r,t,n)}function Ng(e,t,n,r=T.Default,i){if(e!==null){if(t[C]&2048&&!(r&T.Self)){let s=dw(e,t,n,r,ze);if(s!==ze)return s}let o=xg(e,t,n,r,ze);if(o!==ze)return o}return Sg(t,n,r,i)}function xg(e,t,n,r,i){let o=lw(n);if(typeof o=="function"){if(!hg(t,e,r))return r&T.Host?Mg(i,n,r):Sg(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&T.Optional))_l(n);else return s}finally{yg()}}else if(typeof o=="number"){let s=null,a=Tg(e,t),c=Tn,l=r&T.Host?t[Te][Ue]:null;for((a===-1||r&T.SkipSelf)&&(c=a===-1?Rl(e,t):t[a+8],c===Tn||!$h(r,!1)?a=-1:(s=t[D],a=Fo(c),t=Lo(c,t)));a!==-1;){let u=t[D];if(Hh(o,a,u.data)){let d=aw(a,t,n,s,r,l);if(d!==ze)return d}c=t[a+8],c!==Tn&&$h(r,t[D].data[a+8]===l)&&Hh(o,a,t)?(s=u,a=Fo(c),t=Lo(c,t)):a=-1}}return i}function aw(e,t,n,r,i,o){let s=t[D],a=s.data[e+8],c=r==null?Jt(a)&&Bc:r!=s&&(a.type&3)!==0,l=i&T.Host&&o===a,u=cw(a,s,n,c,l);return u!==null?jo(t,s,u,a,i):ze}function cw(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&Ze(h)&&h.type===n)return c}return null}function jo(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof Kt){let a=o;a.resolving&&Pp(nC(s[n]));let c=Uh(a.canSeeViewProviders);a.resolving=!0;let l,u=a.injectImpl?De(a.injectImpl):null,d=hg(e,r,T.Default);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&KC(n,s[n],t)}finally{u!==null&&De(u),Uh(c),a.resolving=!1,yg()}}return o}function lw(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(br)?e[br]:void 0;return typeof t=="number"?t>=0?t&bg:uw:t}function Hh(e,t,n){let r=1<<e;return!!(n[t+(e>>Ig)]&r)}function $h(e,t){return!(e&T.Self)&&!(e&T.Host&&t)}var Wt=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Ng(this._tNode,this._lView,t,es(r),n)}};function uw(){return new Wt(Ee(),Y())}function Ag(e){return Ar(()=>{let t=e.prototype.constructor,n=t[To]||Hc(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[To]||Hc(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Hc(e){return Np(e)?()=>{let t=Hc(ue(e));return t&&t()}:Nn(e)}function dw(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[C]&2048&&!Mr(s);){let a=xg(o,s,n,r|T.Self,ze);if(a!==ze)return a;let c=o.parent;if(!c){let l=s[Zp];if(l){let u=l.get(n,ze,r);if(u!==ze)return u}c=Rg(s),s=s[Ln]}o=c}return i}function Rg(e){let t=e[D],n=t.type;return n===2?t.declTNode:n===1?e[Ue]:null}function Gh(e,t=null,n=null,r){let i=fw(e,t,n,r);return i.resolveInjectorInitializers(),i}function fw(e,t=null,n=null,r,i=new Set){let o=[n||Ce,gC(e)];return r=r||(typeof e=="object"?void 0:be(e)),new Ir(o,t||wl(),r||null,i)}var ft=class e{static THROW_IF_NOT_FOUND=Gt;static NULL=new xo;static create(t,n){if(Array.isArray(t))return Gh({name:""},n,t,"");{let r=t.name??"";return Gh({name:r},t.parent,t.providers,r)}}static \u0275prov=F({token:e,providedIn:"any",factory:()=>B(Bp)});static __NG_ELEMENT_ID__=-1};var hw=new _("");hw.__NG_ELEMENT_ID__=e=>{let t=Ee();if(t===null)throw new E(204,!1);if(t.type&2)return t.value;if(e&T.Optional)return null;throw new E(204,!1)};var Og=!1,os=(()=>{class e{static __NG_ELEMENT_ID__=pw;static __NG_ENV_ID__=n=>n}return e})(),$c=class extends os{_lView;constructor(t){super(),this._lView=t}onDestroy(t){let n=this._lView;return en(n)?(t(),()=>{}):(og(n,t),()=>OC(n,t))}};function pw(){return new $c(Y())}var Qt=class{},ss=new _("",{providedIn:"root",factory:()=>!1});var Pg=new _(""),kg=new _(""),tn=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Bt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=F({token:e,providedIn:"root",factory:()=>new e})}return e})(),gw=(()=>{class e{internalPendingTasks=y(tn);scheduler=y(Qt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return j(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=F({token:e,providedIn:"root",factory:()=>new e})}return e})(),Gc=class extends at{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,qp()&&(this.destroyRef=y(os,{optional:!0})??void 0,this.pendingTasks=y(tn,{optional:!0})??void 0)}emit(t){let n=A(null);try{super.next(t)}finally{A(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof le&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},we=Gc;function Bo(...e){}function Fg(e){let t,n;function r(){e=Bo;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Wh(e){return queueMicrotask(()=>e()),()=>{e=Bo}}var Ol="isAngularZone",Uo=Ol+"_ID",mw=0,J=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new we(!1);onMicrotaskEmpty=new we(!1);onStable=new we(!1);onError=new we(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Og}=t;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,_w(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ol)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new E(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,yw,Bo,Bo);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},yw={};function Pl(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function vw(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Fg(()=>{e.callbackScheduled=!1,Wc(e),e.isCheckStableRunning=!0,Pl(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Wc(e)}function _w(e){let t=()=>{vw(e)},n=mw++;e._inner=e._inner.fork({name:"angular",properties:{[Ol]:!0,[Uo]:n,[Uo+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Ew(c))return r.invokeTask(o,s,a,c);try{return zh(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),qh(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return zh(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!Dw(c)&&t(),qh(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Wc(e),Pl(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Wc(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function zh(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function qh(e){e._nesting--,Pl(e)}var zc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new we;onMicrotaskEmpty=new we;onStable=new we;onError=new we;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function Ew(e){return Lg(e,"__ignore_ng_zone__")}function Dw(e){return Lg(e,"__scheduler_tick__")}function Lg(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Qe=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Cw=new _("",{providedIn:"root",factory:()=>{let e=y(J),t=y(Qe);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function ww(){return as(Ee(),Y())}function as(e,t){return new Vr(et(e,t))}var Vr=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=ww}return e})();function bw(e){return typeof e=="function"&&e[ke]!==void 0}function jr(e,t){let n=Ha(e,t?.equal),r=n[ke];return n.set=i=>Hi(r,i),n.update=i=>$a(r,i),n.asReadonly=Iw.bind(n),n}function Iw(){let e=this[ke];if(e.readonlyFn===void 0){let t=()=>this();t[ke]=e,e.readonlyFn=t}return e.readonlyFn}function Vg(e){return bw(e)&&typeof e.set=="function"}var Tw="ngSkipHydration",Mw="ngskiphydration";function jg(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let r=t[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===Mw)return!0}return!1}function Bg(e){return e.hasAttribute(Tw)}function Ho(e){return(e.flags&128)===128}function Sw(e){if(Ho(e))return!0;let t=e.parent;for(;t;){if(Ho(e)||jg(t))return!0;t=t.parent}return!1}var Ug=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Ug||{}),Hg=new Map,Nw=0;function xw(){return Nw++}function Aw(e){Hg.set(e[ns],e)}function qc(e){Hg.delete(e[ns])}var Yh="__ngContext__";function Br(e,t){je(t)?(e[Yh]=t[ns],Aw(t)):e[Yh]=t}function $g(e){return Wg(e[Tr])}function Gg(e){return Wg(e[Ve])}function Wg(e){for(;e!==null&&!Je(e);)e=e[Ve];return e}var Yc;function zg(e){Yc=e}function cs(){if(Yc!==void 0)return Yc;if(typeof document<"u")return document;throw new E(210,!1)}var ct=new _("",{providedIn:"root",factory:()=>Rw}),Rw="ng",kl=new _(""),Ur=new _("",{providedIn:"platform",factory:()=>"unknown"});var Fl=new _("",{providedIn:"root",factory:()=>cs().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Ow(){let e=new jn;return e.store=Pw(cs(),y(ct)),e}var jn=(()=>{class e{static \u0275prov=F({token:e,providedIn:"root",factory:Ow});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function Pw(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+t,r)}return{}}var qg="h",Yg="b",kw="f",Fw="n",Lw="e",Vw="t",Ll="c",Zg="x",$o="r",jw="i",Bw="n",Kg="d";var Uw="di",Hw="s",$w="p";var mo=new _(""),Qg=!1,Xg=new _("",{providedIn:"root",factory:()=>Qg});var Jg=new _(""),Gw=!1,Ww=new _(""),Zh=new _("",{providedIn:"root",factory:()=>new Map}),Vl=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Vl||{}),Bn=new _(""),Kh=new Set;function nn(e){Kh.has(e)||(Kh.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var em=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=zw}return e})();function zw(){return new em(Y(),Ee())}var Cn=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Cn||{}),tm=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:e,providedIn:"root",factory:()=>new e})}return e})(),qw=[Cn.EarlyRead,Cn.Write,Cn.MixedReadWrite,Cn.Read],Yw=(()=>{class e{ngZone=y(J);scheduler=y(Qt);errorHandler=y(Qe,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){y(Bn,{optional:!0})}execute(){let n=this.sequences.size>0;n&&P(16),this.executing=!0;for(let r of qw)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&P(17)}register(n){let{view:r}=n;r!==void 0?((r[In]??=[]).push(n),kr(r),r[C]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Vl.AFTER_NEXT_RENDER,n):n()}static \u0275prov=F({token:e,providedIn:"root",factory:()=>new e})}return e})(),Zc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[In];t&&(this.view[In]=t.filter(n=>n!==this))}};function nm(e,t){!t?.injector&&Yp(nm);let n=t?.injector??y(ft);return nn("NgAfterNextRender"),Kw(e,n,t,!0)}function Zw(e,t){if(e instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[t]=e,n}else return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function Kw(e,t,n,r){let i=t.get(tm);i.impl??=t.get(Yw);let o=t.get(Bn,null,{optional:!0}),s=n?.phase??Cn.MixedReadWrite,a=n?.manualCleanup!==!0?t.get(os):null,c=t.get(em,null,{optional:!0}),l=new Zc(i.impl,Zw(e,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var ye=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(ye||{}),Qh=0,Qw=1,X=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(X||{});var Xw=0,ls=1;var Jw=4,eb=5;var tb=7,Mn=8,nb=9,rm=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(rm||{});function Co(e,t){let n=ib(e),r=t[n];if(r!==null){for(let i of r)i();t[n]=null}}function rb(e){Co(1,e),Co(0,e),Co(2,e)}function ib(e){let t=Jw;return e===1?t=eb:e===2&&(t=nb),t}function im(e){return e+1}function Hr(e,t){let n=e[D],r=im(t.index);return e[r]}function us(e,t){let n=im(t.index);return e.data[n]}function ob(e,t,n){let r=t[D],i=us(r,n);switch(e){case X.Complete:return i.primaryTmplIndex;case X.Loading:return i.loadingTmplIndex;case X.Error:return i.errorTmplIndex;case X.Placeholder:return i.placeholderTmplIndex;default:return null}}function Xh(e,t){return t===X.Placeholder?e.placeholderBlockConfig?.[Qh]??null:t===X.Loading?e.loadingBlockConfig?.[Qh]??null:null}function sb(e){return e.loadingBlockConfig?.[Qw]??null}function Jh(e,t){if(!e||e.length===0)return t;let n=new Set(e);for(let r of t)n.add(r);return e.length===n.size?e:Array.from(n)}function ab(e,t){let n=t.primaryTmplIndex+oe;return rs(e,n)}var ds="ngb";var cb=(e,t,n)=>{let r=e,i=r.__jsaction_fns??new Map,o=i.get(t)??[];o.push(n),i.set(t,o),r.__jsaction_fns=i},lb=(e,t)=>{let n=e,r=n.getAttribute(ds)??"",i=t.get(r)??new Set;i.has(n)||i.add(n),t.set(r,i)};var ub=e=>{e.removeAttribute(ac.JSACTION),e.removeAttribute(ds),e.__jsaction_fns=void 0},db=new _("",{providedIn:"root",factory:()=>({})});function om(e,t){let n=t?.__jsaction_fns?.get(e.type);if(!(!n||!t?.isConnected))for(let r of n)r(e)}var Kc=new Map;function fb(e,t){return Kc.set(e,t),()=>Kc.delete(e)}var ep=!1,sm=(e,t,n,r)=>{};function hb(e,t,n,r){sm(e,t,n,r)}function pb(){ep||(sm=(e,t,n,r)=>{let i=e[Ye].get(ct);Kc.get(i)?.(t,n,r)},ep=!0)}var jl=new _("");var gb="__nghData__",am=gb,mb="__nghDeferData__",yb=mb,vc="ngh",vb="nghm",cm=()=>null;function _b(e,t,n=!1){let r=e.getAttribute(vc);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,c={};if(r!==""){let u=t.get(jn,null,{optional:!0});u!==null&&(c=u.get(am,[])[Number(r)])}let l={data:c,firstChild:e.firstChild??null};return n&&(l.firstChild=e,fs(l,0,e.nextSibling)),a?e.setAttribute(vc,a):e.removeAttribute(vc),l}function Eb(){cm=_b}function lm(e,t,n=!1){return cm(e,t,n)}function Db(e){let t=e._lView;return t[D].type===2?null:(Mr(t)&&(t=t[oe]),t)}function Cb(e){return e.textContent?.replace(/\s/gm,"")}function wb(e){let t=cs(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=Cb(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(t.createTextNode("")):o.remove()}function fs(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function Qc(e,t){return e.segmentHeads?.[t]??null}function bb(e){return e.get(Ww,!1,{optional:!0})}function Ib(e,t){let n=e.data,r=n[Lw]?.[t]??null;return r===null&&n[Ll]?.[t]&&(r=Bl(e,t)),r}function um(e,t){return e.data[Ll]?.[t]??null}function Bl(e,t){let n=um(e,t)??[],r=0;for(let i of n)r+=i[$o]*(i[Zg]??1);return r}function Tb(e){if(typeof e.disconnectedNodes>"u"){let t=e.data[Kg];e.disconnectedNodes=t?new Set(t):null}return e.disconnectedNodes}function $r(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[Kg];e.disconnectedNodes=n?new Set(n):null}return!!Tb(e)?.has(t)}function Mb(e,t){let n=t.get(jl),i=t.get(jn).get(yb,{}),o=!1,s=e,a=null,c=[];for(;!o&&s;){o=n.has(s);let l=n.hydrating.get(s);if(a===null&&l!=null){a=l.promise;break}c.unshift(s),s=i[s][$w]}return{parentBlockPromise:a,hydrationQueue:c}}function _c(e){return!!e&&e.nodeType===Node.COMMENT_NODE&&e.textContent?.trim()===vb}function tp(e){for(;e&&e.nodeType===Node.TEXT_NODE;)e=e.previousSibling;return e}function Sb(e){for(let r of e.body.childNodes)if(_c(r))return;let t=tp(e.body.previousSibling);if(_c(t))return;let n=tp(e.head.lastChild);if(!_c(n))throw new E(-507,!1)}function dm(e,t){let n=e.contentQueries;if(n!==null){let r=A(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];fg(o),a.contentQueries(2,t[s],s)}}}finally{A(r)}}}function Xc(e,t,n){fg(0);let r=A(null);try{t(e,n)}finally{A(r)}}function fm(e,t,n){if(Qp(t)){let r=A(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{A(r)}}}var Xe=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Xe||{});var Jc=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zD})`}};function hm(e){return e instanceof Jc?e.changingThisBreaksApplicationSecurity:e}var Nb=/^>|^->|<!--|-->|--!>|<!-$/g,xb=/(<|>)/g,Ab="\u200B$1\u200B";function Rb(e){return e.replace(Nb,t=>t.replace(xb,Ab))}function pm(e,t){return e.createText(t)}function Ob(e,t,n){e.setValue(t,n)}function gm(e,t){return e.createComment(Rb(t))}function Ul(e,t,n){return e.createElement(t,n)}function Go(e,t,n,r,i){e.insertBefore(t,n,r,i)}function mm(e,t,n){e.appendChild(t,n)}function np(e,t,n,r,i){r!==null?Go(e,t,n,r,i):mm(e,t,n)}function Hl(e,t,n){e.removeChild(null,t,n)}function ym(e){e.textContent=""}function Pb(e,t,n){e.setAttribute(t,"style",n)}function kb(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function vm(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ew(e,t,r),i!==null&&kb(e,t,i),o!==null&&Pb(e,t,o)}function Fb(e){return e.ownerDocument.body}function Lb(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var _m="ng-template";function Vb(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&Lb(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if($l(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function $l(e){return e.type===4&&e.value!==_m}function jb(e,t,n){let r=e.type===4&&!n?_m:e.value;return t===r}function Bb(e,t,n){let r=4,i=e.attrs,o=i!==null?$b(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Le(r)&&!Le(c))return!1;if(s&&Le(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!jb(e,c,n)||c===""&&t.length===1){if(Le(r))return!1;s=!0}}else if(r&8){if(i===null||!Vb(e,i,c,n)){if(Le(r))return!1;s=!0}}else{let l=t[++a],u=Ub(c,i,$l(e),n);if(u===-1){if(Le(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Le(r))return!1;s=!0}}}}return Le(r)||s}function Le(e){return(e&1)===0}function Ub(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Gb(t,e)}function Hb(e,t,n=!1){for(let r=0;r<t.length;r++)if(Bb(e,t[r],n))return!0;return!1}function $b(e){for(let t=0;t<e.length;t++){let n=e[t];if(tw(n))return t}return e.length}function Gb(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function rp(e,t){return e?":not("+t.trim()+")":t}function Wb(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Le(s)&&(t+=rp(o,i),i=""),r=s,o=o||!Le(r);n++}return i!==""&&(t+=rp(o,i)),t}function zb(e){return e.map(Wb).join(",")}function qb(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Le(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var Un={};function Gl(e,t,n,r,i,o,s,a,c,l,u){let d=oe+r,f=d+i,h=Yb(d,f),p=typeof l=="function"?l():l;return h[D]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function Yb(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Un);return n}function Zb(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Gl(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Wl(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[_e]=i,d[C]=r|4|128|8|64|1024,(l!==null||e&&e[C]&2048)&&(d[C]|=2048),rg(d),d[ie]=d[Ln]=e,d[de]=n,d[Mt]=s||e&&e[Mt],d[z]=a||e&&e[z],d[Ye]=c||e&&e[Ye]||null,d[Ue]=o,d[ns]=xw(),d[qe]=u,d[Zp]=l,d[Te]=t.type==2?e[Te]:d,d}function Kb(e,t,n){let r=et(t,e),i=Zb(n),o=e[Mt].rendererFactory,s=zl(e,Wl(e,i,null,Em(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function Em(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Dm(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function zl(e,t){return e[Tr]?e[Fh][Ve]=t:e[Tr]=t,e[Fh]=t,t}function Z(e=1){Cm(Se(),Y(),Vn()+e,!1)}function Cm(e,t,n,r){if(!r)if((t[C]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Eo(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Do(t,o,0,n)}Zt(n)}var hs=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(hs||{});function el(e,t,n,r){let i=A(null);try{let[o,s,a]=e.inputs[n],c=null;(s&hs.SignalBased)!==0&&(c=t[o][ke]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):Xp(t,c,o,r)}finally{A(i)}}function wm(e,t,n,r,i){let o=Vn(),s=r&2;try{Zt(-1),s&&t.length>oe&&Cm(e,t,oe,!1),P(s?2:0,i),n(r,i)}finally{Zt(o),P(s?3:1,i)}}function ql(e,t,n){rI(e,t,n),(n.flags&64)===64&&iI(e,t,n)}function bm(e,t,n=et){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function Qb(e,t,n,r){let o=r.get(Xg,Qg)||n===Xe.ShadowDom,s=e.selectRootElement(t,o);return Xb(s),s}function Xb(e){Im(e)}var Im=()=>null;function Jb(e){Bg(e)?ym(e):wb(e)}function eI(){Im=Jb}function tI(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Tm(e,t,n,r,i,o,s,a){if(!a&&Zl(t,e,n,r,i)){Jt(t)&&nI(n,t.index);return}if(t.type&3){let c=et(t,n);r=tI(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(c,r,i)}else t.type&12}function nI(e,t){let n=Ke(t,e);n[C]&16||(n[C]|=64)}function rI(e,t,n){let r=n.directiveStart,i=n.directiveEnd;Jt(n)&&Kb(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Vo(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=jo(t,e,s,n);if(Br(c,t),o!==null&&sI(t,s-r,c,a,n,o),Ze(a)){let l=Ke(n.index,t);l[de]=jo(t,e,s,n)}}}function iI(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=zC();try{Zt(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];jc(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&oI(c,l)}}finally{Zt(-1),jc(s)}}function oI(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Mm(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Hb(t,o.selectors,!1)&&(r??=[],Ze(o)?r.unshift(o):r.push(o))}return r}function sI(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];el(r,n,c,l)}}function Yl(e,t){let n=e[Ye],r=n?n.get(Qe,null):null;r&&r.handleError(t)}function Zl(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];el(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];el(u,l,r,i),a=!0}return a}function aI(e,t){let n=Ke(t,e),r=n[D];cI(r,n);let i=n[_e];i!==null&&n[qe]===null&&(n[qe]=lm(i,n[Ye])),P(18),Kl(r,n,n[de]),P(19,n[de])}function cI(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Kl(e,t,n){Nl(t);try{let r=e.viewQuery;r!==null&&Xc(1,r,n);let i=e.template;i!==null&&wm(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[On]?.finishViewCreation(e),e.staticContentQueries&&dm(e,t),e.staticViewQueries&&Xc(2,e.viewQuery,n);let o=e.components;o!==null&&lI(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[C]&=-5,xl()}}function lI(e,t){for(let n=0;n<t.length;n++)aI(e,t[n])}function Sm(e,t,n,r){let i=A(null);try{let o=t.tView,a=e[C]&4096?4096:16,c=Wl(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[Rn]=l;let u=e[On];return u!==null&&(c[On]=u.createEmbeddedView(o)),Kl(o,c,n),c}finally{A(i)}}function tl(e,t){return!t||t.firstChild===null||Ho(e)}var uI;function Ql(e,t){return uI(e,t)}var ht=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(ht||{});function Hn(e){return(e.flags&32)===32}function wn(e,t,n,r,i){if(r!=null){let o,s=!1;Je(r)?o=r:je(r)&&(s=!0,r=r[_e]);let a=Be(r);e===0&&n!==null?i==null?mm(t,n,a):Go(t,n,a,i||null,!0):e===1&&n!==null?Go(t,n,a,i||null,!0):e===2?Hl(t,a,s):e===3&&t.destroyNode(a),o!=null&&CI(t,e,o,n,i)}}function dI(e,t){Nm(e,t),t[_e]=null,t[Ue]=null}function fI(e,t,n,r,i,o){r[_e]=i,r[Ue]=t,ps(e,r,n,1,i,o)}function Nm(e,t){t[Mt].changeDetectionScheduler?.notify(9),ps(e,t,t[z],2,null,null)}function hI(e){let t=e[Tr];if(!t)return Ec(e[D],e);for(;t;){let n=null;if(je(t))n=t[Tr];else{let r=t[ve];r&&(n=r)}if(!n){for(;t&&!t[Ve]&&t!==e;)je(t)&&Ec(t[D],t),t=t[ie];t===null&&(t=e),je(t)&&Ec(t[D],t),n=t&&t[Ve]}t=n}}function Xl(e,t){let n=e[Po],r=n.indexOf(t);n.splice(r,1)}function Jl(e,t){if(en(t))return;let n=t[z];n.destroyNode&&ps(e,t,n,3,null,null),hI(t)}function Ec(e,t){if(en(t))return;let n=A(null);try{t[C]&=-129,t[C]|=256,t[Ie]&&ja(t[Ie]),gI(e,t),pI(e,t),t[D].type===1&&t[z].destroy();let r=t[Rn];if(r!==null&&Je(t[ie])){r!==t[ie]&&Xl(r,t);let i=t[On];i!==null&&i.detachView(e)}qc(t)}finally{A(n)}}function pI(e,t){let n=e.cleanup,r=t[Ao];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[Ao]=null);let i=t[Tt];if(i!==null){t[Tt]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Ro];if(o!==null){t[Ro]=null;for(let s of o)s.destroy()}}function gI(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Kt)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];P(4,a,c);try{c.call(a)}finally{P(5,a,c)}}else{P(4,i,o);try{o.call(i)}finally{P(5,i,o)}}}}}function mI(e,t,n){return yI(e,t.parent,n)}function yI(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[_e];if(Jt(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Xe.None||i===Xe.Emulated)return null}return et(r,n)}function vI(e,t,n){return EI(e,t,n)}function _I(e,t,n){return e.type&40?et(e,n):null}var EI=_I,ip;function eu(e,t,n,r){let i=mI(e,r,t),o=t[z],s=r.parent||t[Ue],a=vI(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)np(o,i,n[c],a,!1);else np(o,i,n,a,!1);ip!==void 0&&ip(o,r,t,n,i)}function wr(e,t){if(t!==null){let n=t.type;if(n&3)return et(t,e);if(n&4)return nl(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return wr(e,r);{let i=e[t.index];return Je(i)?nl(-1,i):Be(i)}}else{if(n&128)return wr(e,t.next);if(n&32)return Ql(t,e)()||Be(e[t.index]);{let r=xm(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Yt(e[Te]);return wr(i,r)}else return wr(e,t.next)}}}return null}function xm(e,t){if(t!==null){let r=e[Te][Ue],i=t.projection;return r.projection[i]}return null}function nl(e,t){let n=ve+e+1;if(n<t.length){let r=t[n],i=r[D].firstChild;if(i!==null)return wr(r,i)}return t[dt]}function tu(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Br(Be(a),r),n.flags|=2),!Hn(n))if(c&8)tu(e,t,n.child,r,i,o,!1),wn(t,e,i,a,o);else if(c&32){let l=Ql(n,r),u;for(;u=l();)wn(t,e,i,u,o);wn(t,e,i,a,o)}else c&16?DI(e,t,r,n,i,o):wn(t,e,i,a,o);n=s?n.projectionNext:n.next}}function ps(e,t,n,r,i,o){tu(n,r,e.firstChild,t,i,o,!1)}function DI(e,t,n,r,i,o){let s=n[Te],c=s[Ue].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];wn(t,e,i,u,o)}else{let l=c,u=s[ie];Ho(r)&&(l.flags|=128),tu(e,t,l,u,i,o,!0)}}function CI(e,t,n,r,i){let o=n[dt],s=Be(n);o!==s&&wn(t,e,r,o,i);for(let a=ve;a<n.length;a++){let c=n[a];ps(c[D],c,e,t,r,o)}}function wI(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:ht.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ht.Important),e.setStyle(n,r,i,o))}}function Wo(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(Be(o)),Je(o)&&bI(o,r);let s=n.type;if(s&8)Wo(e,t,n.child,r);else if(s&32){let a=Ql(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=xm(t,n);if(Array.isArray(a))r.push(...a);else{let c=Yt(t[Te]);Wo(c[D],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function bI(e,t){for(let n=ve;n<e.length;n++){let r=e[n],i=r[D].firstChild;i!==null&&Wo(r[D],r,i,t)}e[dt]!==e[_e]&&t.push(e[dt])}function Am(e){if(e[In]!==null){for(let t of e[In])t.impl.addSequence(t);e[In].length=0}}var Rm=[];function II(e){return e[Ie]??TI(e)}function TI(e){let t=Rm.pop()??Object.create(SI);return t.lView=e,t}function MI(e){e.lView[Ie]!==e&&(e.lView=null,Rm.push(e))}var SI=W(b({},yr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{kr(e.lView)},consumerOnSignalRead(){this.lView[Ie]=this}});function NI(e){let t=e[Ie]??Object.create(xI);return t.lView=e,t}var xI=W(b({},yr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Yt(e.lView);for(;t&&!Om(t[D]);)t=Yt(t);t&&ig(t)},consumerOnSignalRead(){this.lView[Ie]=this}});function Om(e){return e.type!==2}function Pm(e){if(e[Ro]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Ro])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[C]&8192)}}var AI=100;function km(e,t=!0,n=0){let i=e[Mt].rendererFactory,o=!1;o||i.begin?.();try{RI(e,n)}catch(s){throw t&&Yl(e,s),s}finally{o||i.end?.()}}function RI(e,t){let n=dg();try{Vh(!0),rl(e,t);let r=0;for(;is(e);){if(r===AI)throw new E(103,!1);r++,rl(e,1)}}finally{Vh(n)}}function OI(e,t,n,r){if(en(t))return;let i=t[C],o=!1,s=!1;Nl(t);let a=!0,c=null,l=null;o||(Om(e)?(l=II(t),c=ji(l)):Oa()===null?(a=!1,l=NI(t),c=ji(l)):t[Ie]&&(ja(t[Ie]),t[Ie]=null));try{rg(t),HC(e.bindingStartIndex),n!==null&&wm(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&Eo(t,h,null)}else{let h=e.preOrderHooks;h!==null&&Do(t,h,0,null),mc(t,0)}if(s||PI(t),Pm(t),Fm(t,0),e.contentQueries!==null&&dm(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&Eo(t,h)}else{let h=e.contentHooks;h!==null&&Do(t,h,1),mc(t,1)}FI(e,t);let d=e.components;d!==null&&Vm(t,d,0);let f=e.viewQuery;if(f!==null&&Xc(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&Eo(t,h)}else{let h=e.viewHooks;h!==null&&Do(t,h,2),mc(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[gc]){for(let h of t[gc])h();t[gc]=null}o||(Am(t),t[C]&=-73)}catch(u){throw o||kr(t),u}finally{l!==null&&(La(l,c),a&&MI(l)),xl()}}function Fm(e,t){for(let n=$g(e);n!==null;n=Gg(n))for(let r=ve;r<n.length;r++){let i=n[r];Lm(i,t)}}function PI(e){for(let t=$g(e);t!==null;t=Gg(t)){if(!(t[C]&2))continue;let n=t[Po];for(let r=0;r<n.length;r++){let i=n[r];ig(i)}}}function kI(e,t,n){P(18);let r=Ke(t,e);Lm(r,n),P(19,r[de])}function Lm(e,t){Ml(e)&&rl(e,t)}function rl(e,t){let r=e[D],i=e[C],o=e[Ie],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Va(o)),s||=!1,o&&(o.dirty=!1),e[C]&=-9217,s)OI(r,e,r.template,e[de]);else if(i&8192){Pm(e),Fm(e,1);let a=r.components;a!==null&&Vm(e,a,1),Am(e)}}function Vm(e,t,n){for(let r=0;r<t.length;r++)kI(e,t[r],n)}function FI(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Zt(~i);else{let o=i,s=n[++r],a=n[++r];WC(s,o);let c=t[o];P(24,c),a(2,c),P(25,c)}}}finally{Zt(-1)}}function gs(e,t){let n=dg()?64:1088;for(e[Mt].changeDetectionScheduler?.notify(t);e;){e[C]|=n;let r=Yt(e);if(Mr(e)&&!r)return e;e=r}return null}function jm(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Bm(e,t,n,r=!0){let i=t[D];if(VI(i,t,e,n),r){let s=nl(n,e),a=t[z],c=a.parentNode(e[dt]);c!==null&&fI(i,e[Ue],a,t,c,s)}let o=t[qe];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function LI(e,t){let n=zo(e,t);return n!==void 0&&Jl(n[D],n),n}function zo(e,t){if(e.length<=ve)return;let n=ve+t,r=e[n];if(r){let i=r[Rn];i!==null&&i!==e&&Xl(i,r),t>0&&(e[n-1][Ve]=r[Ve]);let o=No(e,ve+t);dI(r[D],r);let s=o[On];s!==null&&s.detachView(o[D]),r[ie]=null,r[Ve]=null,r[C]&=-129}return r}function VI(e,t,n,r){let i=ve+r,o=n.length;r>0&&(n[i-1][Ve]=t),r<o-ve?(t[Ve]=n[i],jp(n,ve+r,t)):(n.push(t),t[Ve]=null),t[ie]=n;let s=t[Rn];s!==null&&n!==s&&Um(s,t);let a=t[On];a!==null&&a.insertView(e),Lc(t),t[C]|=128}function Um(e,t){let n=e[Po],r=t[ie];if(je(r))e[C]|=2;else{let i=r[ie][Te];t[Te]!==i&&(e[C]|=2)}n===null?e[Po]=[t]:n.push(t)}var Nr=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,n=t[D];return Wo(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[de]}set context(t){this._lView[de]=t}get destroyed(){return en(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ie];if(Je(t)){let n=t[Oo],r=n?n.indexOf(this):-1;r>-1&&(zo(t,r),No(n,r))}this._attachedToViewContainer=!1}Jl(this._lView[D],this._lView)}onDestroy(t){og(this._lView,t)}markForCheck(){gs(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[C]&=-129}reattach(){Lc(this._lView),this._lView[C]|=128}detectChanges(){this._lView[C]|=1024,km(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Mr(this._lView),n=this._lView[Rn];n!==null&&!t&&Xl(n,this._lView),Nm(this._lView[D],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=t;let n=Mr(this._lView),r=this._lView[Rn];r!==null&&!n&&Um(r,this._lView),Lc(this._lView)}};var ms=(()=>{class e{static __NG_ELEMENT_ID__=UI}return e})(),jI=ms,BI=class extends jI{_declarationLView;_declarationTContainer;elementRef;constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=Sm(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Nr(i)}};function UI(){return HI(Ee(),Y())}function HI(e,t){return e.type&4?new BI(t,e,as(e,t)):null}function nu(e,t,n,r,i){let o=e.data[t];if(o===null)o=$I(e,t,n,r,i),GC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=BC();o.injectorIndex=s===null?-1:s.injectorIndex}return Lr(o,!0),o}function $I(e,t,n,r,i){let o=lg(),s=ug(),a=s?o:o&&o.parent,c=e.data[t]=WI(e,a,n,t,r,i);return GI(e,c,o,s),c}function GI(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function WI(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return Fr()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var zI=new RegExp(`^(\\d+)*(${Yg}|${qg})*(.*)`);function qI(e){let t=e.match(zI),[n,r,i,o]=t,s=r?parseInt(r,10):i,a=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function YI(e){return!e.prev&&e.parent?.type===8}function Dc(e){return e.index-oe}function ZI(e,t){let n=e.i18nNodes;if(n)return n.get(t)}function ys(e,t,n,r){let i=Dc(r),o=ZI(e,i);if(o===void 0){let s=e.data[Bw];if(s?.[i])o=QI(s[i],n);else if(t.firstChild===r)o=e.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(YI(r)){let l=Dc(r.parent);o=Qc(e,l)}else{let l=et(c,n);if(a)o=l.firstChild;else{let u=Dc(c),d=Qc(e,u);if(c.type===2&&d){let h=Bl(e,u)+1;o=vs(h,d)}else o=l.nextSibling}}}}return o}function vs(e,t){let n=t;for(let r=0;r<e;r++)n=n.nextSibling;return n}function KI(e,t){let n=e;for(let r=0;r<t.length;r+=2){let i=t[r],o=t[r+1];for(let s=0;s<o;s++)switch(i){case kw:n=n.firstChild;break;case Fw:n=n.nextSibling;break}}return n}function QI(e,t){let[n,...r]=qI(e),i;if(n===qg)i=t[Te][_e];else if(n===Yg)i=Fb(t[Te][_e]);else{let o=Number(n);i=Be(t[o+oe])}return KI(i,r)}var XI=!1;function JI(e){XI=e}function e0(e){let t=e[qe];if(t){let{i18nNodes:n,dehydratedIcuData:r}=t;if(n&&r){let i=e[z];for(let o of r.values())t0(i,n,o)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function t0(e,t,n){for(let r of n.node.cases[n.case]){let i=t.get(r.index-oe);i&&Hl(e,i,!1)}}function Hm(e){let t=e[ut]??[],r=e[ie][z],i=[];for(let o of t)o.data[Uw]!==void 0?i.push(o):$m(o,r);e[ut]=i}function n0(e){let{lContainer:t}=e,n=t[ut];if(n===null)return;let i=t[ie][z];for(let o of n)$m(o,i)}function $m(e,t){let n=0,r=e.firstChild;if(r){let i=e.data[$o];for(;n<i;){let o=r.nextSibling;Hl(t,r,!1),r=o,n++}}}function _s(e){Hm(e);let t=e[_e];je(t)&&qo(t);for(let n=ve;n<e.length;n++)qo(e[n])}function qo(e){e0(e);let t=e[D];for(let n=oe;n<t.bindingStartIndex;n++)if(Je(e[n])){let r=e[n];_s(r)}else je(e[n])&&qo(e[n])}function Gm(e){let t=e._views;for(let n of t){let r=Db(n);r!==null&&r[_e]!==null&&(je(r)?qo(r):_s(r))}}function r0(e,t,n,r){e!==null&&(n.cleanup(t),_s(e.lContainer),Gm(r))}function i0(e,t){let n=[];for(let r of t)for(let i=0;i<(r[Zg]??1);i++){let o={data:r,firstChild:null};r[$o]>0&&(o.firstChild=e,e=vs(r[$o],e)),n.push(o)}return[e,n]}var Wm=()=>null;function o0(e,t){let n=e[ut];return!t||n===null||n.length===0?null:n[0].data[jw]===t?n.shift():(Hm(e),null)}function s0(){Wm=o0}function op(e,t){return Wm(e,t)}var a0=class{},zm=class{},il=class{resolveComponentFactory(t){throw Error(`No component factory found for ${be(t)}.`)}},ru=class{static NULL=new il},Pn=class{},Es=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>c0()}return e})();function c0(){let e=Y(),t=Ee(),n=Ke(t.index,e);return(je(n)?n:e)[z]}var l0=(()=>{class e{static \u0275prov=F({token:e,providedIn:"root",factory:()=>null})}return e})();var Cc={},Sn=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=es(r);let i=this.injector.get(t,Cc,r);return i!==Cc||n===Cc?i:this.parentInjector.get(t,n,r)}};function sp(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Nh(i,a);else if(o==2){let c=a,l=t[++s];r=Nh(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function q(e,t=T.Default){let n=Y();if(n===null)return B(e,t);let r=Ee();return Ng(r,n,ue(e),t)}function qm(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a,c=null,l=null,u=d0(s);u===null?a=s:[a,c,l]=u,p0(e,t,n,a,o,c,l)}o!==null&&r!==null&&u0(n,r,o)}function u0(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new E(-301,!1);r.push(t[i],o)}}function d0(e){let t=null,n=!1;for(let s=0;s<e.length;s++){let a=e[s];if(s===0&&Ze(a)&&(t=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of e)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,f0(s,r,o,i)),s===t&&(r??=[],r.push(s));return r!==null?(r.push(...t===null?e:e.slice(1)),[r,i,o]):null}function f0(e,t,n,r){let i=t.length;e.findHostDirectiveDefs(e,t,r),n.set(e,[i,t.length-1])}function h0(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function p0(e,t,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&Ze(h)&&(c=!0,h0(e,n,f)),Uc(Vo(n,t),e,h.type)}E0(n,e.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=Dm(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=Sr(n.mergedAttrs,h.hostAttrs),m0(e,n,t,d,h),_0(d,h,i),s!==null&&s.has(h)){let[m,w]=s.get(h);n.directiveToIndex.set(h.type,[d,m+n.directiveStart,w+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}g0(e,n,o)}function g0(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))ap(0,t,i,r),ap(1,t,i,r),lp(t,r,!1);else{let o=n.get(i);cp(0,t,o,r),cp(1,t,o,r),lp(t,r,!0)}}}function ap(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),Ym(t,o)}}function cp(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Ym(t,s)}}function Ym(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function lp(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||$l(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function m0(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=Nn(i.type,!0)),s=new Kt(o,Ze(i),q);e.blueprint[r]=s,n[r]=s,y0(e,t,r,Dm(e,n,i.hostVars,Un),i)}function y0(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;v0(s)!=a&&s.push(a),s.push(n,r,o)}}function v0(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function _0(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ze(t)&&(n[""]=e)}}function E0(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Zm(e,t,n,r,i,o,s,a){let c=t.consts,l=ko(c,s),u=nu(t,e,2,r,l);return o&&qm(t,n,u,ko(c,a),i),u.mergedAttrs=Sr(u.mergedAttrs,u.attrs),u.attrs!==null&&sp(u,u.attrs,!1),u.mergedAttrs!==null&&sp(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function Km(e,t){Dg(e,t),Qp(t)&&e.queries.elementEnd(t)}var ol=class extends ru{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=xn(t);return new Yo(n,this.ngModule)}};function D0(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&hs.SignalBased)!==0};return i&&(o.transform=i),o})}function C0(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function w0(e,t,n){let r=t instanceof lt?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Sn(n,r):n}function b0(e){let t=e.get(Pn,null);if(t===null)throw new E(407,!1);let n=e.get(l0,null),r=e.get(Qt,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r}}function I0(e,t){let n=(e.selectors[0][0]||"div").toLowerCase();return Ul(t,n,n==="svg"?NC:n==="math"?xC:null)}var Yo=class extends zm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=D0(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=C0(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=zb(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i){P(22);let o=A(null);try{let s=this.componentDef,a=r?["ng-version","19.2.17"]:qb(this.componentDef.selectors[0]),c=Gl(0,null,null,1,0,null,null,null,null,[a],null),l=w0(s,i||this.ngModule,t),u=b0(l),d=u.rendererFactory.createRenderer(null,s),f=r?Qb(d,r,s.encapsulation,l):I0(s,d),h=Wl(null,c,null,512|Em(s),null,null,u,d,l,null,lm(f,l,!0));h[oe]=f,Nl(h);let p=null;try{let m=Zm(oe,c,h,"#host",()=>[this.componentDef],!0,0);f&&(vm(d,f,m),Br(f,h)),ql(c,h,m),fm(c,m,h),Km(c,m),n!==void 0&&T0(m,this.ngContentSelectors,n),p=Ke(m.index,h),h[de]=p[de],Kl(c,h,null)}catch(m){throw p!==null&&qc(p),qc(h),m}finally{P(23),xl()}return new sl(this.componentType,h)}finally{A(o)}}},sl=class extends a0{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n){super(),this._rootLView=n,this._tNode=rs(n[D],oe),this.location=as(this._tNode,n),this.instance=Ke(this._tNode.index,n)[de],this.hostView=this.changeDetectorRef=new Nr(n,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=Zl(r,i[D],i,t,n);this.previousInputValues.set(t,n);let s=Ke(r.index,i);gs(s,1)}get injector(){return new Wt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function T0(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ds=(()=>{class e{static __NG_ELEMENT_ID__=M0}return e})();function M0(){let e=Ee();return N0(e,Y())}var S0=Ds,Qm=class extends S0{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return as(this._hostTNode,this._hostLView)}get injector(){return new Wt(this._hostTNode,this._hostLView)}get parentInjector(){let t=Rl(this._hostTNode,this._hostLView);if(wg(t)){let n=Lo(t,this._hostLView),r=Fo(t),i=n[D].data[r+8];return new Wt(i,n)}else return new Wt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=up(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ve}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=op(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,tl(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!IC(t),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?t:new Yo(xn(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(s?l:this.parentInjector).get(lt,null);m&&(o=m)}let u=xn(c.componentType??{}),d=op(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,tl(this._hostTNode,d)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(AC(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[ie],l=new Qm(c,c[Ue],c[ie]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return Bm(s,i,o,r),t.attachToViewContainerRef(),jp(wc(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=up(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=zo(this._lContainer,n);r&&(No(wc(this._lContainer),n),Jl(r[D],r))}detach(t){let n=this._adjustIndex(t,-1),r=zo(this._lContainer,n);return r&&No(wc(this._lContainer),n)!=null?new Nr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function up(e){return e[Oo]}function wc(e){return e[Oo]||(e[Oo]=[])}function N0(e,t){let n,r=t[e.index];return Je(r)?n=r:(n=jm(r,t,null,e),t[e.index]=n,zl(t,n)),Xm(n,t,e,r),new Qm(n,e,t)}function x0(e,t){let n=e[z],r=n.createComment(""),i=et(t,e),o=n.parentNode(i);return Go(n,o,r,n.nextSibling(i),!1),r}var Xm=Jm,iu=()=>!1;function A0(e,t,n){return iu(e,t,n)}function Jm(e,t,n,r){if(e[dt])return;let i;n.type&8?i=Be(r):i=x0(t,n),e[dt]=i}function R0(e,t,n){if(e[dt]&&e[ut])return!0;let r=n[qe],i=t.index-oe;if(!r||Sw(t)||$r(r,i))return!1;let s=Qc(r,i),a=r.data[Ll]?.[i],[c,l]=i0(s,a);return e[dt]=c,e[ut]=l,!0}function O0(e,t,n,r){iu(e,n,t)||Jm(e,t,n,r)}function P0(){Xm=O0,iu=R0}var Zo=class{};var Ko=class extends Zo{injector;componentFactoryResolver=new ol(this);instance=null;constructor(t){super();let n=new Ir([...t.providers,{provide:Zo,useValue:this},{provide:ru,useValue:this.componentFactoryResolver}],t.parent||wl(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function ey(e,t,n=null){return new Ko({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var k0=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Dl(!1,n.type),i=r.length>0?ey([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:e,providedIn:"environment",factory:()=>new e(B(lt))})}return e})();function ty(e){return Ar(()=>{let t=ny(e),n=W(b({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Ug.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(k0).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Xe.Emulated,styles:e.styles||Ce,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&nn("NgStandalone"),ry(n);let r=e.dependencies;return n.directiveDefs=dp(r,!1),n.pipeDefs=dp(r,!0),n.id=B0(n),n})}function F0(e){return xn(e)||Hp(e)}function L0(e){return e!==null}function $n(e){return Ar(()=>({type:e.type,bootstrap:e.bootstrap||Ce,declarations:e.declarations||Ce,imports:e.imports||Ce,exports:e.exports||Ce,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function V0(e,t){if(e==null)return zt;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=hs.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function j0(e){if(e==null)return zt;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function pt(e){return Ar(()=>{let t=ny(e);return ry(t),t})}function ny(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||zt,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Ce,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:V0(e.inputs,t),outputs:j0(e.outputs),debugInfo:null}}function ry(e){e.features?.forEach(t=>t(e))}function dp(e,t){if(!e)return null;let n=t?$p:F0;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(L0)}function B0(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function U0(e){return Object.getPrototypeOf(e.prototype).constructor}function Gn(e){let t=U0(e.type),n=!0,r=[e];for(;t;){let i;if(Ze(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new E(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=bc(e.inputs),s.declaredInputs=bc(e.declaredInputs),s.outputs=bc(e.outputs);let a=i.hostBindings;a&&z0(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&G0(e,c),l&&W0(e,l),H0(e,i),ZD(e.outputs,i.outputs),Ze(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===Gn&&(n=!1)}}t=Object.getPrototypeOf(t)}$0(r)}function H0(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function $0(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Sr(i.hostAttrs,n=Sr(n,i.hostAttrs))}}function bc(e){return e===zt?{}:e===Ce?[]:e}function G0(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function W0(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function z0(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function iy(e){return Y0(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function q0(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function Y0(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Cs(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function Z0(e,t,n,r,i,o,s,a,c){let l=t.consts,u=nu(t,e,4,s||null,a||null);cg()&&qm(t,n,u,ko(l,c),Mm),u.mergedAttrs=Sr(u.mergedAttrs,u.attrs),Dg(t,u);let d=u.tView=Gl(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function K0(e,t,n,r,i,o,s,a,c,l){let u=n+oe,d=t.firstCreatePass?Z0(u,t,e,r,i,o,s,a,c):t.data[u];Lr(d,!1);let f=oy(t,e,d,n);Al()&&eu(t,e,f,d),Br(f,e);let h=jm(f,e,f,d);return e[u]=h,zl(e,h),A0(h,d,e),Il(d)&&ql(t,e,d),c!=null&&bm(e,d,l),d}function Nt(e,t,n,r,i,o,s,a){let c=Y(),l=Se(),u=ko(l.consts,o);return K0(c,l,e,t,n,r,i,u,s,a),Nt}var oy=sy;function sy(e,t,n,r){return St(!0),t[z].createComment("")}function Q0(e,t,n,r){let i=t[qe],o=!i||Fr()||Hn(n)||$r(i,r);if(St(o),o)return sy(e,t);let s=i.data[Vw]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=ys(i,e,t,n);fs(i,r,a);let c=Bl(i,r);return vs(c,a)}function X0(){oy=Q0}var J0=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?ey(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:e,providedIn:"environment",factory:()=>new e})}return e})();var eT=new _("");function Ic(e,t,n){return e.get(J0).getOrCreateInjector(t,e,n,"")}function tT(e,t,n){if(e instanceof Sn){let i=e.injector,o=e.parentInjector,s=Ic(o,t,n);return new Sn(i,s)}let r=e.get(lt);if(r!==e){let i=Ic(r,t,n);return new Sn(e,i)}return Ic(e,t,n)}function bn(e,t,n,r=!1){let i=n[ie],o=i[D];if(en(i))return;let s=Hr(i,t),a=s[ls],c=s[tb];if(!(c!==null&&e<c)&&fp(a,e)&&fp(s[Xw]??-1,e)){let l=us(o,t),d=!r&&!0&&(sb(l)!==null||Xh(l,X.Loading)!==null||Xh(l,X.Placeholder))?iT:rT;try{d(e,s,n,t,i)}catch(f){Yl(i,f)}}}function nT(e,t){let n=e[ut]?.findIndex(i=>i.data[Hw]===t[ls])??-1;return{dehydratedView:n>-1?e[ut][n]:null,dehydratedViewIx:n}}function rT(e,t,n,r,i){P(20);let o=ob(e,i,r);if(o!==null){t[ls]=e;let s=i[D],a=o+oe,c=rs(s,a),l=0;LI(n,l);let u;if(e===X.Complete){let p=us(s,r),m=p.providers;m&&m.length>0&&(u=tT(i[Ye],p,m))}let{dehydratedView:d,dehydratedViewIx:f}=nT(n,t),h=Sm(i,c,null,{injector:u,dehydratedView:d});if(Bm(n,h,l,tl(c,d)),gs(h,2),f>-1&&n[ut]?.splice(f,1),(e===X.Complete||e===X.Error)&&Array.isArray(t[Mn])){for(let p of t[Mn])p();t[Mn]=null}}P(21)}function fp(e,t){return e<t}function hp(e,t,n){e.loadingPromise.then(()=>{e.loadingState===ye.COMPLETE?bn(X.Complete,t,n):e.loadingState===ye.FAILED&&bn(X.Error,t,n)})}var iT=null;var ay=new _("");var oT=(()=>{class e{static \u0275prov=F({token:e,providedIn:"root",factory:()=>new al})}return e})(),al=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,n]of this.queues)t===null?this.flushQueue(n):t.run(()=>this.flushQueue(n))}flushQueue(t){for(let n of t)t.delete(n),this.queuedEffectCount--,n.run()}};function Gr(e){return!!e&&typeof e.then=="function"}function cy(e){return!!e&&typeof e.subscribe=="function"}var sT=new _("");var ly=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=y(sT,{optional:!0})??[];injector=y(ft);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=bl(this.injector,i);if(Gr(o))n.push(o);else if(cy(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Wr=new _("");function aT(){Ua(()=>{throw new E(600,!1)})}function cT(e){return e.isBoundToModule}var lT=10;var Me=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=y(Cw);afterRenderManager=y(tm);zonelessEnabled=y(ss);rootEffectScheduler=y(oT);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new at;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=y(tn).hasPendingTasks.pipe(Ht(n=>!n));constructor(){y(Bn,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=y(lt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ft.NULL){P(10);let o=n instanceof zm;if(!this._injector.get(ly).done){let h="";throw new E(405,h)}let a;o?a=n:a=this._injector.get(ru).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let c=cT(a)?void 0:this._injector.get(Zo),l=r||a.selector,u=a.create(i,[],l,c),d=u.location.nativeElement,f=u.injector.get(ay,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),wo(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),P(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){P(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Vl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new E(101,!1);let n=A(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,A(n),this.afterTick.next(),P(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Pn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<lT;)P(14),this.synchronizeOnce(),P(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)uT(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>is(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;wo(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Wr,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>wo(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function wo(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function uT(e,t,n,r){if(!n&&!is(e))return;km(e,t,n&&!r?0:1)}function dT(e,t,n){let r=t[Ye],i=t[D];if(e.loadingState!==ye.NOT_STARTED)return e.loadingPromise??Promise.resolve();let o=Hr(t,n),s=ab(i,e);e.loadingState=ye.IN_PROGRESS,Co(1,o);let a=e.dependencyResolverFn,c=r.get(gw).add();return a?(e.loadingPromise=Promise.allSettled(a()).then(l=>{let u=!1,d=[],f=[];for(let h of l)if(h.status==="fulfilled"){let p=h.value,m=xn(p)||Hp(p);if(m)d.push(m);else{let w=$p(p);w&&f.push(w)}}else{u=!0;break}if(u){if(e.loadingState=ye.FAILED,e.errorTmplIndex===null){let h="",p=new E(-750,!1);Yl(t,p)}}else{e.loadingState=ye.COMPLETE;let h=s.tView;if(d.length>0){h.directiveRegistry=Jh(h.directiveRegistry,d);let p=d.map(w=>w.type),m=Dl(!1,...p);e.providers=m}f.length>0&&(h.pipeRegistry=Jh(h.pipeRegistry,f))}}),e.loadingPromise.finally(()=>{e.loadingPromise=null,c()})):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=ye.COMPLETE,c()}),e.loadingPromise)}function fT(e,t){return t[Ye].get(eT,null,{optional:!0})?.behavior!==rm.Manual}function hT(e,t,n){let r=t[D],i=t[n.index];if(!fT(e,t))return;let o=Hr(t,n),s=us(r,n);switch(rb(o),s.loadingState){case ye.NOT_STARTED:bn(X.Loading,n,i),dT(s,t,n),s.loadingState===ye.IN_PROGRESS&&hp(s,n,i);break;case ye.IN_PROGRESS:bn(X.Loading,n,i),hp(s,n,i);break;case ye.COMPLETE:bn(X.Complete,n,i);break;case ye.FAILED:bn(X.Error,n,i);break;default:}}function pT(e,t,n){return j(this,null,function*(){let r=e.get(jl);if(r.hydrating.has(t))return;let{parentBlockPromise:o,hydrationQueue:s}=Mb(t,e);if(s.length===0)return;o!==null&&s.shift(),yT(r,s),o!==null&&(yield o);let a=s[0];r.has(a)?yield pp(e,s,n):r.awaitParentBlock(a,()=>j(null,null,function*(){return yield pp(e,s,n)}))})}function pp(e,t,n){return j(this,null,function*(){let r=e.get(jl),i=r.hydrating,o=e.get(tn),s=o.add();for(let c=0;c<t.length;c++){let l=t[c],u=r.get(l);if(u!=null){if(yield _T(u),yield vT(e),gT(u)){n0(u),gp(t.slice(c),r);break}i.get(l).resolve()}else{mT(c,t,r),gp(t.slice(c),r);break}}let a=t[t.length-1];yield i.get(a)?.promise,o.remove(s),n&&n(t),r0(r.get(a),t,r,e.get(Me))})}function gT(e){return Hr(e.lView,e.tNode)[ls]===X.Error}function mT(e,t,n){let r=e-1,i=r>-1?n.get(t[r]):null;i&&_s(i.lContainer)}function gp(e,t){let n=t.hydrating;for(let r in e)n.get(r)?.reject();t.cleanup(e)}function yT(e,t){for(let n of t)e.hydrating.set(n,Promise.withResolvers())}function vT(e){return new Promise(t=>nm(t,{injector:e}))}function _T(e){return j(this,null,function*(){let{tNode:t,lView:n}=e,r=Hr(n,t);return new Promise(i=>{ET(r,i),hT(2,n,t)})})}function ET(e,t){Array.isArray(e[Mn])||(e[Mn]=[]),e[Mn].push(t)}function DT(e,t,n,r){return Cs(e,Sl(),n)?t+Op(n)+r:Un}function yo(e,t){return e<<17|t<<2}function Xt(e){return e>>17&32767}function CT(e){return(e&2)==2}function wT(e,t){return e&131071|t<<17}function cl(e){return e|2}function kn(e){return(e&131068)>>2}function Tc(e,t){return e&-131069|t<<2}function bT(e){return(e&1)===1}function ll(e){return e|1}function IT(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Xt(s),c=kn(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Or(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=Xt(e[a+1]);e[r+1]=yo(f,a),f!==0&&(e[f+1]=Tc(e[f+1],r)),e[a+1]=wT(e[a+1],r)}else e[r+1]=yo(a,0),a!==0&&(e[a+1]=Tc(e[a+1],r)),a=r;else e[r+1]=yo(c,0),a===0?a=r:e[c+1]=Tc(e[c+1],r),c=r;l&&(e[r+1]=cl(e[r+1])),mp(e,u,r,!0),mp(e,u,r,!1),TT(t,u,e,r,o),s=yo(a,c),o?t.classBindings=s:t.styleBindings=s}function TT(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Or(o,t)>=0&&(n[r+1]=ll(n[r+1]))}function mp(e,t,n,r){let i=e[n+1],o=t===null,s=r?Xt(i):kn(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];MT(c,t)&&(a=!0,e[s+1]=r?ll(l):cl(l)),s=r?Xt(l):kn(l)}a&&(e[n+1]=r?cl(i):ll(i))}function MT(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Or(e,t)>=0:!1}function Ae(e,t,n){let r=Y(),i=Sl();if(Cs(r,i,t)){let o=Se(),s=vg();Tm(o,s,r,e,t,r[z],n,!1)}return Ae}function yp(e,t,n,r,i){Zl(t,e,n,i?"class":"style",r)}function ou(e,t,n){return uy(e,t,n,!1),ou}function zr(e,t){return uy(e,t,null,!0),zr}function uy(e,t,n,r){let i=Y(),o=Se(),s=$C(2);if(o.firstUpdatePass&&NT(o,e,s,r),t!==Un&&Cs(i,s,t)){let a=o.data[Vn()];PT(o,a,i,i[z],e,i[s+1]=kT(t,n),r,s)}}function ST(e,t){return t>=e.expandoStartIndex}function NT(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Vn()],s=ST(e,n);FT(o,r)&&t===null&&!s&&(t=!1),t=xT(i,o,t,r),IT(i,o,t,n,s,r)}}function xT(e,t,n,r){let i=qC(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Mc(null,e,t,n,r),n=xr(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=Mc(i,e,t,n,r),o===null){let c=AT(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Mc(null,e,t,c[1],r),c=xr(c,t.attrs,r),RT(e,t,r,c))}else o=OT(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function AT(e,t,n){let r=n?t.classBindings:t.styleBindings;if(kn(r)!==0)return e[Xt(r)]}function RT(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Xt(i)]=r}function OT(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=xr(r,s,n)}return xr(r,t.attrs,n)}function Mc(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=xr(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function xr(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),hC(e,s,n?!0:t[++o]))}return e===void 0?null:e}function PT(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=bT(l)?vp(c,t,n,i,kn(l),s):void 0;if(!Qo(u)){Qo(o)||CT(l)&&(o=vp(c,null,n,i,a,s));let d=ng(Vn(),n);wI(r,s,d,i,o)}}function vp(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===Un&&(f=d?Ce:void 0);let h=d?hc(f,r):u===r?f:void 0;if(l&&!Qo(h)&&(h=hc(c,r)),Qo(h)&&(a=h,s))return a;let p=e[i+1];i=s?Xt(p):kn(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=hc(c,r))}return a}function Qo(e){return e!==void 0}function kT(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=be(hm(e)))),e}function FT(e,t){return(e.flags&(t?8:16))!==0}function k(e,t,n,r){let i=Y(),o=Se(),s=oe+e,a=i[z],c=o.firstCreatePass?Zm(s,o,i,t,Mm,cg(),n,r):o.data[s],l=dy(o,i,c,a,t,e);i[s]=l;let u=Il(c);return Lr(c,!0),vm(a,l,c),!Hn(c)&&Al()&&eu(o,i,l,c),(PC()===0||u)&&Br(l,i),kC(),u&&(ql(o,i,c),fm(o,c,i)),r!==null&&bm(i,c),k}function L(){let e=Ee();ug()?UC():(e=e.parent,Lr(e,!1));let t=e;LC(t)&&jC(),FC();let n=Se();return n.firstCreatePass&&Km(n,t),t.classesWithoutHost!=null&&XC(t)&&yp(n,t,Y(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&JC(t)&&yp(n,t,Y(),t.stylesWithoutHost,!1),L}function ws(e,t,n,r){return k(e,t,n,r),L(),ws}var dy=(e,t,n,r,i,o)=>(St(!0),Ul(r,i,_g()));function LT(e,t,n,r,i,o){let s=t[qe],a=!s||Fr()||Hn(n)||$r(s,o);if(St(a),a)return Ul(r,i,_g());let c=ys(s,e,t,n);return um(s,o)&&fs(s,o,c.nextSibling),s&&(jg(n)||Bg(c))&&Jt(n)&&(VC(n),ym(c)),c}function VT(){dy=LT}var jT=(e,t,n,r)=>(St(!0),gm(t[z],""));function BT(e,t,n,r){let i,o=t[qe],s=!o||Fr()||$r(o,r)||Hn(n);if(St(s),s)return gm(t[z],"");let a=ys(o,e,t,n),c=Ib(o,r);return fs(o,r,a),i=vs(c,a),i}function UT(){jT=BT}function Wn(){return Y()}var Xo="en-US";var HT=Xo;function $T(e){typeof e=="string"&&(HT=e.toLowerCase().replace(/_/g,"-"))}function _p(e,t,n){return function r(i){if(i===Function)return n;let o=Jt(e)?Ke(e.index,t):t;gs(o,5);let s=t[de],a=Ep(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=Ep(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Ep(e,t,n,r){let i=A(null);try{return P(6,t,n),n(r)!==!1}catch(o){return GT(e,o),!1}finally{P(7,t,n),A(i)}}function GT(e,t){let n=e[Ye],r=n?n.get(Qe,null):null;r&&r.handleError(t)}function Dp(e,t,n,r,i,o){let s=t[n],a=t[D],l=a.data[n].outputs[r],u=s[l],d=a.firstCreatePass?ag(a):null,f=sg(t),h=u.subscribe(o),p=f.length;f.push(o,h),d&&d.push(i,e.index,p,-(p+1))}function fe(e,t,n,r){let i=Y(),o=Se(),s=Ee();return fy(o,i,i[z],s,e,t,r),fe}function WT(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Ao],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function fy(e,t,n,r,i,o,s){let a=Il(r),l=e.firstCreatePass?ag(e):null,u=sg(t),d=!0;if(r.type&3||s){let f=et(r,t),h=s?s(f):f,p=u.length,m=s?$=>s(Be($[r.index])):r.index,w=null;if(!s&&a&&(w=WT(e,t,i,r.index)),w!==null){let $=w.__ngLastListenerFn__||w;$.__ngNextListenerFn__=o,w.__ngLastListenerFn__=o,d=!1}else{o=_p(r,t,o),hb(t,h,i,o);let $=n.listen(h,i,o);u.push(o,$),l&&l.push(i,m,p,p+1)}}else o=_p(r,t,o);if(d){let f=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],w=h[p+1];Dp(r,t,m,w,i,o)}if(f&&f.length)for(let p of f)Dp(r,t,p,i,i,o)}}function se(e=1){return ZC(e)}function ee(e,t=""){let n=Y(),r=Se(),i=e+oe,o=r.firstCreatePass?nu(r,i,1,t,null):r.data[i],s=hy(r,n,o,t,e);n[i]=s,Al()&&eu(r,n,s,o),Lr(o,!1)}var hy=(e,t,n,r,i)=>(St(!0),pm(t[z],r));function zT(e,t,n,r,i){let o=t[qe],s=!o||Fr()||Hn(n)||$r(o,i);return St(s),s?pm(t[z],r):ys(o,e,t,n)}function qT(){hy=zT}function gt(e){return rn("",e,""),gt}function rn(e,t,n){let r=Y(),i=DT(r,e,t,n);return i!==Un&&YT(r,Vn(),i),rn}function YT(e,t,n){let r=ng(t,e);Ob(e[z],r,n)}function su(e,t,n){Vg(t)&&(t=t());let r=Y(),i=Sl();if(Cs(r,i,t)){let o=Se(),s=vg();Tm(o,s,r,e,t,r[z],n,!1)}return su}function py(e,t){let n=Vg(e);return n&&e.set(t),n}function au(e,t){let n=Y(),r=Se(),i=Ee();return fy(r,n,n[z],i,e,t),au}function ZT(e,t,n){let r=Se();if(r.firstCreatePass){let i=Ze(e);ul(n,r.data,r.blueprint,i,!0),ul(t,r.data,r.blueprint,i,!1)}}function ul(e,t,n,r,i){if(e=ue(e),Array.isArray(e))for(let o=0;o<e.length;o++)ul(e[o],t,n,r,i);else{let o=Se(),s=Y(),a=Ee(),c=An(e)?e:ue(e.provide),l=zp(e),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(An(e)||!e.multi){let h=new Kt(l,i,q),p=Nc(c,t,i?u:u+f,d);p===-1?(Uc(Vo(a,s),o,c),Sc(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=Nc(c,t,u+f,d),p=Nc(c,t,u,u+f),m=h>=0&&n[h],w=p>=0&&n[p];if(i&&!w||!i&&!m){Uc(Vo(a,s),o,c);let $=XT(i?QT:KT,n.length,i,r,l);!i&&w&&(n[p].providerFactory=$),Sc(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push($),s.push($)}else{let $=gy(n[i?p:h],l,!i&&r);Sc(o,e,h>-1?h:p,$)}!i&&r&&w&&n[p].componentProviders++}}}function Sc(e,t,n,r){let i=An(t),o=_C(t);if(i||o){let c=(o?ue(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function gy(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Nc(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function KT(e,t,n,r,i){return dl(this.multi,[])}function QT(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=jo(r,r[D],this.providerFactory.index,i);s=c.slice(0,a),dl(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],dl(o,s);return s}function dl(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function XT(e,t,n,r,i){let o=new Kt(e,n,q);return o.multi=[],o.index=t,o.componentProviders=0,gy(o,i,r&&!n),o}function cu(e,t=[]){return n=>{n.providersResolver=(r,i)=>ZT(r,i?i(e):e,t)}}var JT=(()=>{class e{zone=y(J);changeDetectionScheduler=y(Qt);applicationRef=y(Me);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),eM=new _("",{factory:()=>!1});function my({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new J(W(b({},vy()),{scheduleInRootZone:n})),[{provide:J,useFactory:e},{provide:qt,multi:!0,useFactory:()=>{let r=y(JT,{optional:!0});return()=>r.initialize()}},{provide:qt,multi:!0,useFactory:()=>{let r=y(tM);return()=>{r.initialize()}}},t===!0?{provide:Pg,useValue:!0}:[],{provide:kg,useValue:n??Og}]}function yy(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,r=my({ngZoneFactory:()=>{let i=vy(e);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&nn("NgZone_CoalesceEvent"),new J(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return Pr([{provide:eM,useValue:!0},{provide:ss,useValue:!1},r])}function vy(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var tM=(()=>{class e{subscription=new le;initialized=!1;zone=y(J);pendingTasks=y(tn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{J.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var nM=(()=>{class e{appRef=y(Me);taskService=y(tn);ngZone=y(J);zonelessEnabled=y(ss);tracing=y(Bn,{optional:!0});disableScheduling=y(Pg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new le;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Uo):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(y(kg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof zc||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Wh:Fg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Uo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Wh(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function rM(){return typeof $localize<"u"&&$localize.locale||Xo}var lu=new _("",{providedIn:"root",factory:()=>y(lu,T.Optional|T.SkipSelf)||rM()});var fl=new _(""),iM=new _("");function Dr(e){return!e.moduleRef}function oM(e){let t=Dr(e)?e.r3Injector:e.moduleRef.injector,n=t.get(J);return n.run(()=>{Dr(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Qe,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Dr(e)){let o=()=>t.destroy(),s=e.platformInjector.get(fl);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(fl);s.add(o),e.moduleRef.onDestroy(()=>{wo(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return aM(r,n,()=>{let o=t.get(ly);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(lu,Xo);if($T(s||Xo),!t.get(iM,!0))return Dr(e)?t.get(Me):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Dr(e)){let c=t.get(Me);return e.rootComponent!==void 0&&c.bootstrap(e.rootComponent),c}else return sM(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function sM(e,t){let n=e.injector.get(Me);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new E(-403,!1);t.push(e)}function aM(e,t,n){try{let r=n();return Gr(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var bo=null;function cM(e=[],t){return ft.create({name:t,providers:[{provide:ts,useValue:"platform"},{provide:fl,useValue:new Set([()=>bo=null])},...e]})}function lM(e=[]){if(bo)return bo;let t=cM(e);return bo=t,aT(),uM(t),t}function uM(e){let t=e.get(kl,null);bl(e,()=>{t?.forEach(n=>n())})}var uu=(()=>{class e{static __NG_ELEMENT_ID__=dM}return e})();function dM(e){return fM(Ee(),Y(),(e&16)===16)}function fM(e,t,n){if(Jt(e)&&!n){let r=Ke(e.index,t);return new Nr(r,r)}else if(e.type&175){let r=t[Te];return new Nr(r,t)}return null}var hl=class{constructor(){}supports(t){return iy(t)}create(t){return new pl(t)}},hM=(e,t)=>t,pl=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||hM}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Cp(r,i,o)?n:r,a=Cp(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!iy(t))throw new E(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,q0(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new gl(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Jo),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Jo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},gl=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},ml=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Jo=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new ml,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Cp(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function wp(){return new du([new hl])}var du=(()=>{class e{factories;static \u0275prov=F({token:e,providedIn:"root",factory:wp});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||wp()),deps:[[e,new dC,new Vp]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new E(901,!1)}}return e})();function _y(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;P(8);try{let o=i?.injector??lM(r),s=[my({}),{provide:Qt,useExisting:nM},...n||[]],a=new Ko({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return oM({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{P(9)}}var vo=new WeakSet,bp="",Io=[];function Ip(e){return e.get(Jg,Gw)}function Ey(){let e=[{provide:Jg,useFactory:()=>{let t=!0;{let n=y(ct);t=!!window._ejsas?.[n]}return t&&nn("NgEventReplay"),t}}];return e.push({provide:qt,useValue:()=>{let t=y(Me),{injector:n}=t;if(!vo.has(t)){let r=y(Zh);if(Ip(n)){pb();let i=n.get(ct),o=fb(i,(s,a,c)=>{s.nodeType===Node.ELEMENT_NODE&&(cb(s,a,c),lb(s,r))});t.onDestroy(o)}}},multi:!0},{provide:Wr,useFactory:()=>{let t=y(Me),{injector:n}=t;return()=>{!Ip(n)||vo.has(t)||(vo.add(t),t.onDestroy(()=>{vo.delete(t);{let r=n.get(ct);fc(r)}}),t.whenStable().then(()=>{if(t.destroyed)return;let r=n.get(db);pM(r,n);let i=n.get(Zh);i.get(bp)?.forEach(ub),i.delete(bp);let o=r.instance;bb(n)?t.onDestroy(()=>o.cleanUp()):o.cleanUp()}))}},multi:!0}),e}var pM=(e,t)=>{let n=t.get(ct),r=window._ejsas[n],i=e.instance=new Mh(new ho(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=Sh(n);i.replayEarlyEventInfos(o),fc(n);let s=new po(a=>{gM(t,a,a.currentTarget)});Th(i,s)};function gM(e,t,n){let r=(n&&n.getAttribute(ds))??"";/d\d+/.test(r)?mM(r,e,t,n):t.eventPhase===dc.REPLAY&&om(t,n)}function mM(e,t,n,r){Io.push({event:n,currentTarget:r}),pT(t,e,yM)}function yM(e){let t=[...Io],n=new Set(e);Io=[];for(let{event:r,currentTarget:i}of t){let o=i.getAttribute(ds);n.has(o)?om(r,i):Io.push({event:r,currentTarget:i})}}var Tp=!1;function vM(){Tp||(Tp=!0,Eb(),VT(),qT(),UT(),X0(),P0(),s0(),eI())}function _M(e){return e.whenStable()}function Dy(){let e=[{provide:mo,useFactory:()=>{let t=!0;return t=!!y(jn,{optional:!0})?.get(am,null),t&&nn("NgHydration"),t}},{provide:qt,useValue:()=>{JI(!1),y(mo)&&(Sb(cs()),vM())},multi:!0}];return e.push({provide:Xg,useFactory:()=>y(mo)},{provide:Wr,useFactory:()=>{if(y(mo)){let t=y(Me);return()=>{_M(t).then(()=>{t.destroyed||Gm(t)})}}return()=>{}},multi:!0}),Pr(e)}function Cy(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function xt(e){return Wa(e)}function qr(e,t){return Ba(e,t?.equal)}var Mp=class{[ke];constructor(t){this[ke]=t}destroy(){this[ke].destroy()}};var tt=new _("");var wy=null;function At(){return wy}function fu(e){wy??=e}var Yr=class{};var bs=class{$implicit;ngForOf;index;count;constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ts=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new bs(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),by(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);by(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(q(Ds),q(ms),q(du))};static \u0275dir=pt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function by(e,t){e.context.$implicit=t.item}var hu=(()=>{class e{_viewContainer;_context=new Is;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Iy(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Iy(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(q(Ds),q(ms))};static \u0275dir=pt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),Is=class{$implicit=null;ngIf=null};function Iy(e,t){if(e&&!e.createEmbeddedView)throw new E(2020,!1)}var Ms=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=$n({type:e});static \u0275inj=Fn({})}return e})();function pu(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var gu="browser",Ty="server";function Ss(e){return e===Ty}var Zr=class{};var As=new _(""),_u=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(B(As),B(J))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),Kr=class{_doc;constructor(t){this._doc=t}manager},Ns="ng-app-id";function My(e){for(let t of e)t.remove()}function Sy(e,t){let n=t.createElement("style");return n.textContent=e,n}function DM(e,t,n,r){let i=e.head?.querySelectorAll(`style[${Ns}="${t}"],link[${Ns}="${t}"]`);if(i)for(let o of i)o.removeAttribute(Ns),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function yu(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var Eu=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=Ss(o),DM(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Sy);r?.forEach(i=>this.addUsage(i,this.external,yu))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(My(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])My(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Sy(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,yu(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ns,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(B(tt),B(ct),B(Fl,8),B(Ur))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),mu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Du=/%COMP%/g;var xy="%COMP%",CM=`_nghost-${xy}`,wM=`_ngcontent-${xy}`,bM=!0,IM=new _("",{providedIn:"root",factory:()=>bM});function TM(e){return wM.replace(Du,e)}function MM(e){return CM.replace(Du,e)}function Ay(e,t){return t.map(n=>n.replace(Du,e))}var Cu=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=Ss(a),this.defaultRenderer=new Qr(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Xe.ShadowDom&&(r=W(b({},r),{encapsulation:Xe.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof xs?i.applyToHost(n):i instanceof Xr&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case Xe.Emulated:o=new xs(c,l,r,this.appId,u,s,a,d,f);break;case Xe.ShadowDom:return new vu(c,l,n,r,s,a,this.nonce,d,f);default:o=new Xr(c,l,r,u,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(B(_u),B(Eu),B(ct),B(IM),B(tt),B(Ur),B(J),B(Fl),B(Bn,8))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),Qr=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(mu[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Ny(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Ny(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=mu[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=mu[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(ht.DashCase|ht.Important)?t.style.setProperty(n,r,i&ht.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&ht.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=At().getGlobalEventTarget(this.doc,t),!t))throw new E(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Ny(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var vu=class extends Qr{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Ay(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=yu(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xr=class extends Qr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c,l){super(t,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?Ay(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},xs=class extends Xr{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(t,n,r,o,s,a,c,l,u),this.contentAttr=TM(u),this.hostAttr=MM(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Rs=class e extends Yr{supportsDOMEvents=!0;static makeCurrent(){fu(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=NM();return n==null?null:xM(n)}resetBaseElement(){Jr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return pu(document.cookie,t)}},Jr=null;function NM(){return Jr=Jr||document.head.querySelector("base"),Jr?Jr.getAttribute("href"):null}function xM(e){return new URL(e,document.baseURI).pathname}var AM=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),Oy=(()=>{class e extends Kr{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(B(tt))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),Ry=["alt","control","meta","shift"],RM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OM={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Py=(()=>{class e extends Kr{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>At().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ry.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=RM[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ry.forEach(s=>{if(s!==i){let a=OM[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(B(tt))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})();function wu(e,t,n){return _y(b({rootComponent:e,platformRef:n?.platformRef},PM(t)))}function PM(e){return{appProviders:[...jM,...e?.providers??[]],platformProviders:VM}}function kM(){Rs.makeCurrent()}function FM(){return new Qe}function LM(){return zg(document),document}var VM=[{provide:Ur,useValue:gu},{provide:kl,useValue:kM,multi:!0},{provide:tt,useFactory:LM}];var jM=[{provide:ts,useValue:"root"},{provide:Qe,useFactory:FM},{provide:As,useClass:Oy,multi:!0,deps:[tt]},{provide:As,useClass:Py,multi:!0,deps:[tt]},Cu,Eu,_u,{provide:Pn,useExisting:Cu},{provide:Zr,useClass:AM},[]];var ei=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var BM="X-Request-URL",UM="text/plain",HM="application/json",FL=`${HM}, ${UM}, */*`;var Iu=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Iu||{}),bu=class{headers;status;statusText;url;ok;type;constructor(t,n=200,r="OK"){this.headers=t.headers||new ei,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var ti=class e extends bu{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Iu.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var ky=new _("");var LL=RegExp(`^${BM}:`,"m");var $M=new _(""),GM="b",WM="h",zM="s",qM="st",YM="u",ZM="rt",Tu=new _(""),KM=["GET","HEAD"];function QM(e,t){let f=y(Tu),{isCacheActive:n}=f,r=Rf(f,["isCacheActive"]),{transferCache:i,method:o}=e;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!KM.includes(o)||!r.includeRequestsWithAuthHeaders&&XM(e)||r.filter?.(e)===!1)return t(e);let s=y(jn);if(y($M,{optional:!0}))throw new E(2803,!1);let c=e.url,l=JM(e,c),u=s.get(l,null),d=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(d=i.includeHeaders),u){let{[GM]:h,[ZM]:p,[WM]:m,[zM]:w,[qM]:$,[YM]:Oe}=u,Pe=h;switch(p){case"arraybuffer":Pe=new TextEncoder().encode(h).buffer;break;case"blob":Pe=new Blob([h]);break}let gr=new ei(m);return ec(new ti({body:Pe,headers:gr,status:w,statusText:$,url:Oe}))}return t(e).pipe(nc(h=>{h instanceof ti}))}function XM(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function Fy(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function JM(e,t){let{params:n,method:r,responseType:i}=e,o=Fy(n),s=e.serializeBody();s instanceof URLSearchParams?s=Fy(s):typeof s!="string"&&(s="");let a=[r,i,t,s,o].join("|"),c=eS(a);return c}function eS(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function Ly(e){return[{provide:Tu,useFactory:()=>(nn("NgHttpTransferCache"),b({isCacheActive:!0},e))},{provide:ky,useValue:QM,multi:!0},{provide:Wr,multi:!0,useFactory:()=>{let t=y(Me),n=y(Tu);return()=>{t.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var Os=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(Os||{});function nS(e,t=[],n={}){return{\u0275kind:e,\u0275providers:t}}function Vy(){return nS(Os.EventReplay,Ey())}function jy(...e){let t=[],n=new Set;for(let{\u0275providers:i,\u0275kind:o}of e)n.add(o),i.length&&t.push(i);let r=n.has(Os.HttpTransferCacheOptions);return Pr([[],Dy(),n.has(Os.NoHttpTransferCache)||r?[]:Ly({}),t])}var By={providers:[yy({eventCoalescing:!0}),jy(Vy())]};var Yy=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(q(Es),q(Vr))};static \u0275dir=pt({type:e})}return e})(),rS=(()=>{class e extends Yy{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ag(e)))(i||e)}})();static \u0275dir=pt({type:e,features:[Gn]})}return e})(),Zy=new _("");var iS={provide:Zy,useExisting:Rr(()=>Vs),multi:!0};function oS(){let e=At()?At().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var sS=new _(""),Vs=(()=>{class e extends Yy{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!oS())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(q(Es),q(Vr),q(sS,8))};static \u0275dir=pt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&fe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[cu([iS]),Gn]})}return e})();var aS=new _(""),cS=new _("");function Ky(e){return e!=null}function Qy(e){return Gr(e)?Er(e):e}function Xy(e){let t={};return e.forEach(n=>{t=n!=null?b(b({},t),n):t}),Object.keys(t).length===0?null:t}function Jy(e,t){return t.map(n=>n(e))}function lS(e){return!e.validate}function ev(e){return e.map(t=>lS(t)?t:n=>t.validate(n))}function uS(e){if(!e)return null;let t=e.filter(Ky);return t.length==0?null:function(n){return Xy(Jy(n,t))}}function tv(e){return e!=null?uS(ev(e)):null}function dS(e){if(!e)return null;let t=e.filter(Ky);return t.length==0?null:function(n){let r=Jy(n,t).map(Qy);return tc(r).pipe(Ht(Xy))}}function nv(e){return e!=null?dS(ev(e)):null}function Uy(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function fS(e){return e._rawValidators}function hS(e){return e._rawAsyncValidators}function Mu(e){return e?Array.isArray(e)?e:[e]:[]}function ks(e,t){return Array.isArray(e)?e.includes(t):e===t}function Hy(e,t){let n=Mu(t);return Mu(e).forEach(i=>{ks(n,i)||n.push(i)}),n}function $y(e,t){return Mu(t).filter(n=>!ks(e,n))}var Fs=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=tv(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=nv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Su=class extends Fs{name;get formDirective(){return null}get path(){return null}},si=class extends Fs{_parent=null;name=null;valueAccessor=null},Nu=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qV=W(b({},pS),{"[class.ng-submitted]":"isSubmitted"}),rv=(()=>{class e extends Nu{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(q(si,2))};static \u0275dir=pt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&zr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Gn]})}return e})();var ni="VALID",Ps="INVALID",qn="PENDING",ri="DISABLED",Zn=class{},Ls=class extends Zn{value;source;constructor(t,n){super(),this.value=t,this.source=n}},ii=class extends Zn{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},oi=class extends Zn{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},Yn=class extends Zn{status;source;constructor(t,n){super(),this.status=t,this.source=n}};function gS(e){return(js(e)?e.validators:e)||null}function mS(e){return Array.isArray(e)?tv(e):e||null}function yS(e,t){return(js(t)?t.asyncValidators:e)||null}function vS(e){return Array.isArray(e)?nv(e):e||null}function js(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var xu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return xt(this.statusReactive)}set status(t){xt(()=>this.statusReactive.set(t))}_status=qr(()=>this.statusReactive());statusReactive=jr(void 0);get valid(){return this.status===ni}get invalid(){return this.status===Ps}get pending(){return this.status==qn}get disabled(){return this.status===ri}get enabled(){return this.status!==ri}errors;get pristine(){return xt(this.pristineReactive)}set pristine(t){xt(()=>this.pristineReactive.set(t))}_pristine=qr(()=>this.pristineReactive());pristineReactive=jr(!0);get dirty(){return!this.pristine}get touched(){return xt(this.touchedReactive)}set touched(t){xt(()=>this.touchedReactive.set(t))}_touched=qr(()=>this.touchedReactive());touchedReactive=jr(!1);get untouched(){return!this.touched}_events=new at;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Hy(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Hy(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators($y(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators($y(t,this._rawAsyncValidators))}hasValidator(t){return ks(this._rawValidators,t)}hasAsyncValidator(t){return ks(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(W(b({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new oi(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new oi(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(W(b({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new ii(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new ii(!0,r))}markAsPending(t={}){this.status=qn;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Yn(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(W(b({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ri,this.errors=null,this._forEachChild(i=>{i.disable(W(b({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ls(this.value,r)),this._events.next(new Yn(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(W(b({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ni,this._forEachChild(r=>{r.enable(W(b({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(W(b({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ni||this.status===qn)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ls(this.value,n)),this._events.next(new Yn(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(W(b({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ri:ni}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=qn,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=Qy(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Yn(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?ri:this.errors?Ps:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qn)?qn:this._anyControlsHaveStatus(Ps)?Ps:ni}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new ii(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new oi(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){js(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=mS(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=vS(this._rawAsyncValidators)}};var iv=new _("",{providedIn:"root",factory:()=>Au}),Au="always";function _S(e,t){return[...t.path,e]}function ES(e,t,n=Au){CS(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),wS(e,t),IS(e,t),bS(e,t),DS(e,t)}function Gy(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function DS(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function CS(e,t){let n=fS(e);t.validator!==null?e.setValidators(Uy(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=hS(e);t.asyncValidator!==null?e.setAsyncValidators(Uy(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();Gy(t._rawValidators,i),Gy(t._rawAsyncValidators,i)}function wS(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&ov(e,t)})}function bS(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&ov(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function ov(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function IS(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function TS(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function MS(e){return Object.getPrototypeOf(e.constructor)===rS}function SS(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Vs?n=o:MS(o)?r=o:i=o}),i||r||n||null}function Wy(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function zy(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var NS=class extends xu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(gS(n),yS(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),js(n)&&(n.nonNullable||n.initialValueIsDefault)&&(zy(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Wy(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Wy(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){zy(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var xS={provide:si,useExisting:Rr(()=>Ru)},qy=Promise.resolve(),Ru=(()=>{class e extends si{_changeDetectorRef;callSetDisabledState;control=new NS;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new we;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SS(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),TS(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ES(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){qy.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Cy(r);qy.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?_S(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(q(Su,9),q(aS,10),q(cS,10),q(Zy,10),q(uu,8),q(iv,8))};static \u0275dir=pt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[cu([xS]),Gn,Tl]})}return e})();var AS=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=$n({type:e});static \u0275inj=Fn({})}return e})();var sv=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:iv,useValue:n.callSetDisabledState??Au}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=$n({type:e});static \u0275inj=Fn({imports:[AS]})}return e})();var av=()=>{};var Ou={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(e,t){if(!e)throw sn(t)},sn=function(e){return new Error("Firebase Database ("+Ou.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var uv=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},OS=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},Hs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){let o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(uv(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):OS(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){let o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;let l=i<e.length?n[e.charAt(i)]:64;++i;let d=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Pu;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Pu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ku=function(e){let t=uv(e);return Hs.encodeByteArray(t,!0)},ci=function(e){return ku(e).replace(/\./g,"")},Bs=function(e){try{return Hs.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function dv(e){return fv(void 0,e)}function fv(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!PS(n)||(e[n]=fv(e[n],t[n]));return e}function PS(e){return e!=="__proto__"}function kS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var FS=()=>kS().__FIREBASE_DEFAULTS__,LS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},VS=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Bs(e[1]);return t&&JSON.parse(t)},hv=()=>{try{return av()||FS()||LS()||VS()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},jS=e=>hv()?.emulatorHosts?.[e],pv=e=>{let t=jS(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Fu=()=>hv()?.config;var Rt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function $s(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function gv(e){return j(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function mv(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=b({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ci(JSON.stringify(n)),ci(JSON.stringify(s)),""].join(".")}var ai={};function BS(){let e={prod:[],emulator:[]};for(let t of Object.keys(ai))ai[t]?e.emulator.push(t):e.prod.push(t);return e}function US(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var cv=!1;function yv(e,t){if(typeof window>"u"||typeof document>"u"||!$s(window.location.host)||ai[e]===t||ai[e]||cv)return;ai[e]=t;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=BS().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function l(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{cv=!0,s()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=US(r),h=n("text"),p=document.getElementById(h)||document.createElement("span"),m=n("learnmore"),w=document.getElementById(m)||document.createElement("a"),$=n("preprendIcon"),Oe=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let Pe=f.element;a(Pe),u(w,m);let gr=l();c(Oe,$),Pe.append(Oe,p,w,gr),document.body.appendChild(Pe)}o?(p.innerText="Preview backend disconnected.",Oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function HS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(HS())}function vv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nt(){return Ou.NODE_CLIENT===!0||Ou.NODE_ADMIN===!0}function _v(){try{return typeof indexedDB=="object"}catch{return!1}}function Ev(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}var $S="FirebaseError",on=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=$S,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,li.prototype.create)}},li=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?GS(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new on(i,a,r)}};function GS(e,t){return e.replace(WS,(n,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var WS=/\{\$([^}]+)}/g;function Kn(e){return JSON.parse(e)}function te(e){return JSON.stringify(e)}var Dv=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=Kn(Bs(o[0])||""),n=Kn(Bs(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};var Cv=function(e){let t=Dv(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},wv=function(e){let t=Dv(e).claims;return typeof t=="object"&&t.admin===!0};function rt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function an(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Vu(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ui(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Qn(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let o=e[i],s=t[i];if(lv(o)&&lv(s)){if(!Qn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function lv(e){return e!==null&&typeof e=="object"}function bv(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Us=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function Gs(e,t){return`${e} failed: ${t} argument `}var Iv=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,g(r<e.length,"Surrogate pair missing trail surrogate.");let s=e.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},di=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var XV=4*60*60*1e3;function Xn(e){return e&&e._delegate?e._delegate:e}var mt=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var cn="[DEFAULT]";var Ws=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new Rt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){let n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(qS(t))try{this.getOrInitializeService({instanceIdentifier:cn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=cn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return j(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=cn){return this.instances.has(t)}getOptions(t=cn){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&t(o,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zS(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=cn){return this.component?this.component.multipleInstances?t:cn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zS(e){return e===cn?void 0:e}function qS(e){return e.instantiationMode==="EAGER"}var fi=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new Ws(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var YS=[],U=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(U||{}),ZS={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},KS=U.INFO,QS={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},XS=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=QS[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Jn=class{constructor(t){this.name=t,this._logLevel=KS,this._logHandler=XS,this._userLogHandler=null,YS.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in U))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ZS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...t),this._logHandler(this,U.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...t),this._logHandler(this,U.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,U.INFO,...t),this._logHandler(this,U.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,U.WARN,...t),this._logHandler(this,U.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...t),this._logHandler(this,U.ERROR,...t)}};var JS=(e,t)=>t.some(n=>e instanceof n),Tv,Mv;function eN(){return Tv||(Tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tN(){return Mv||(Mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Sv=new WeakMap,Bu=new WeakMap,Nv=new WeakMap,ju=new WeakMap,Hu=new WeakMap;function nN(e){let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(it(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&Sv.set(n,e)}).catch(()=>{}),Hu.set(t,e),t}function rN(e){if(Bu.has(e))return;let t=new Promise((n,r)=>{let i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});Bu.set(e,t)}var Uu={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Bu.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Nv.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return it(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function xv(e){Uu=e(Uu)}function iN(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(zs(this),t,...n);return Nv.set(r,t.sort?t.sort():[t]),it(r)}:tN().includes(e)?function(...t){return e.apply(zs(this),t),it(Sv.get(this))}:function(...t){return it(e.apply(zs(this),t))}}function oN(e){return typeof e=="function"?iN(e):(e instanceof IDBTransaction&&rN(e),JS(e,eN())?new Proxy(e,Uu):e)}function it(e){if(e instanceof IDBRequest)return nN(e);if(ju.has(e))return ju.get(e);let t=oN(e);return t!==e&&(ju.set(e,t),Hu.set(t,e)),t}var zs=e=>Hu.get(e);function Rv(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,t),a=it(s);return r&&s.addEventListener("upgradeneeded",c=>{r(it(s.result),c.oldVersion,c.newVersion,it(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var sN=["get","getKey","getAll","getAllKeys","count"],aN=["put","add","delete","clear"],$u=new Map;function Av(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if($u.get(t))return $u.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=aN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sN.includes(n)))return;let o=function(s,...a){return j(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return $u.set(t,o),o}xv(e=>W(b({},e),{get:(t,n,r)=>Av(t,n)||e.get(t,n,r),has:(t,n)=>!!Av(t,n)||e.has(t,n)}));var Wu=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cN(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function cN(e){return e.getComponent()?.type==="VERSION"}var zu="@firebase/app",Ov="0.14.6";var yt=new Jn("@firebase/app"),lN="@firebase/app-compat",uN="@firebase/analytics-compat",dN="@firebase/analytics",fN="@firebase/app-check-compat",hN="@firebase/app-check",pN="@firebase/auth",gN="@firebase/auth-compat",mN="@firebase/database",yN="@firebase/data-connect",vN="@firebase/database-compat",_N="@firebase/functions",EN="@firebase/functions-compat",DN="@firebase/installations",CN="@firebase/installations-compat",wN="@firebase/messaging",bN="@firebase/messaging-compat",IN="@firebase/performance",TN="@firebase/performance-compat",MN="@firebase/remote-config",SN="@firebase/remote-config-compat",NN="@firebase/storage",xN="@firebase/storage-compat",AN="@firebase/firestore",RN="@firebase/ai",ON="@firebase/firestore-compat",PN="firebase",kN="12.6.0";var qu="[DEFAULT]",FN={[zu]:"fire-core",[lN]:"fire-core-compat",[dN]:"fire-analytics",[uN]:"fire-analytics-compat",[hN]:"fire-app-check",[fN]:"fire-app-check-compat",[pN]:"fire-auth",[gN]:"fire-auth-compat",[mN]:"fire-rtdb",[yN]:"fire-data-connect",[vN]:"fire-rtdb-compat",[_N]:"fire-fn",[EN]:"fire-fn-compat",[DN]:"fire-iid",[CN]:"fire-iid-compat",[wN]:"fire-fcm",[bN]:"fire-fcm-compat",[IN]:"fire-perf",[TN]:"fire-perf-compat",[MN]:"fire-rc",[SN]:"fire-rc-compat",[NN]:"fire-gcs",[xN]:"fire-gcs-compat",[AN]:"fire-fst",[ON]:"fire-fst-compat",[RN]:"fire-vertex","fire-js":"fire-js",[PN]:"fire-js-all"};var qs=new Map,LN=new Map,Yu=new Map;function Pv(e,t){try{e.container.addComponent(t)}catch(n){yt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function hi(e){let t=e.name;if(Yu.has(t))return yt.debug(`There were multiple attempts to register component ${t}.`),!1;Yu.set(t,e);for(let n of qs.values())Pv(n,e);for(let n of LN.values())Pv(n,e);return!0}function Vv(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function jv(e){return e==null?!1:e.settings!==void 0}var VN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ot=new li("app","Firebase",VN);var Zu=class{constructor(t,n,r){this._isDeleted=!1,this._options=b({},t),this._config=b({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ot.create("app-deleted",{appName:this._name})}};var Bv=kN;function Xu(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=b({name:qu,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw Ot.create("bad-app-name",{appName:String(i)});if(n||(n=Fu()),!n)throw Ot.create("no-options");let o=qs.get(i);if(o){if(Qn(n,o.options)&&Qn(r,o.config))return o;throw Ot.create("duplicate-app",{appName:i})}let s=new fi(i);for(let c of Yu.values())s.addComponent(c);let a=new Zu(n,r,s);return qs.set(i,a),a}function Uv(e=qu){let t=qs.get(e);if(!t&&e===qu&&Fu())return Xu();if(!t)throw Ot.create("no-app",{appName:e});return t}function Pt(e,t,n){let r=FN[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${t}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yt.warn(s.join(" "));return}hi(new mt(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var jN="firebase-heartbeat-database",BN=1,pi="firebase-heartbeat-store",Gu=null;function Hv(){return Gu||(Gu=Rv(jN,BN,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(pi)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ot.create("idb-open",{originalErrorMessage:e.message})})),Gu}function UN(e){return j(this,null,function*(){try{let n=(yield Hv()).transaction(pi),r=yield n.objectStore(pi).get($v(e));return yield n.done,r}catch(t){if(t instanceof on)yt.warn(t.message);else{let n=Ot.create("idb-get",{originalErrorMessage:t?.message});yt.warn(n.message)}}})}function kv(e,t){return j(this,null,function*(){try{let r=(yield Hv()).transaction(pi,"readwrite");yield r.objectStore(pi).put(t,$v(e)),yield r.done}catch(n){if(n instanceof on)yt.warn(n.message);else{let r=Ot.create("idb-set",{originalErrorMessage:n?.message});yt.warn(r.message)}}})}function $v(e){return`${e.name}!${e.options.appId}`}var HN=1024,$N=30,Ku=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Qu(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return j(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Fv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>$N){let i=WN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){yt.warn(t)}})}getHeartbeatsHeader(){return j(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Fv(),{heartbeatsToSend:n,unsentEntries:r}=GN(this._heartbeatsCache.heartbeats),i=ci(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return yt.warn(t),""}})}};function Fv(){return new Date().toISOString().substring(0,10)}function GN(e,t=HN){let n=[],r=e.slice();for(let i of e){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Lv(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Lv(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Qu=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return j(this,null,function*(){return _v()?Ev().then(()=>!0).catch(()=>!1):!1})}read(){return j(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield UN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return j(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return kv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return j(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return kv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function Lv(e){return ci(JSON.stringify({version:2,heartbeats:e})).length}function WN(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function zN(e){hi(new mt("platform-logger",t=>new Wu(t),"PRIVATE")),hi(new mt("heartbeat",t=>new Ku(t),"PRIVATE")),Pt(zu,Ov,e),Pt(zu,Ov,"esm2020"),Pt("fire-js","")}zN("");var qN="firebase",YN="12.7.0";Pt(qN,YN,"app");var Gv="@firebase/database",Wv="1.1.0";var rf="";function ZN(e){rf=e}var sd=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),te(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Kn(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var ad=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return rt(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var b_=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new sd(t)}}catch{}return new ad},un=b_("localStorage"),cd=b_("sessionStorage");var nr=new Jn("@firebase/database"),KN=function(){let e=1;return function(){return e++}}(),I_=function(e){let t=Iv(e),n=new Us;n.update(t);let r=n.digest();return Hs.encodeByteArray(r)},xi=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=xi.apply(null,r):typeof r=="object"?t+=te(r):t+=r,t+=" "}return t},fn=null,zv=!0,QN=function(e,t){g(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(nr.logLevel=U.VERBOSE,fn=nr.log.bind(nr),t&&cd.set("logging_enabled",!0)):typeof e=="function"?fn=e:(fn=null,cd.remove("logging_enabled"))},ce=function(...e){if(zv===!0&&(zv=!1,fn===null&&cd.get("logging_enabled")===!0&&QN(!0)),fn){let t=xi.apply(null,e);fn(t)}},Ai=function(e){return function(...t){ce(e,...t)}},ld=function(...e){let t="FIREBASE INTERNAL ERROR: "+xi(...e);nr.error(t)},vt=function(...e){let t=`FIREBASE FATAL ERROR: ${xi(...e)}`;throw nr.error(t),new Error(t)},pe=function(...e){let t="FIREBASE WARNING: "+xi(...e);nr.warn(t)},XN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&pe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},T_=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},JN=function(e){if(nt()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},or="[MIN_NAME]",hn="[MAX_NAME]",fr=function(e,t){if(e===t)return 0;if(e===or||t===hn)return-1;if(t===or||e===hn)return 1;{let n=qv(e),r=qv(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},ex=function(e,t){return e===t?0:e<t?-1:1},gi=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+te(t))},of=function(e){if(typeof e!="object"||e===null)return te(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=te(t[r]),n+=":",n+=of(e[t[r]]);return n+="}",n},M_=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ge(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var S_=function(e){g(!T_(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},tx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},nx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function rx(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var ix=new RegExp("^-?(0*)\\d{1,10}$"),ox=-2147483648,sx=2147483647,qv=function(e){if(ix.test(e)){let t=Number(e);if(t>=ox&&t<=sx)return t}return null},hr=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw pe("Exception was thrown by user callback.",n),t},Math.floor(0))}},ax=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ei=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var ud=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,jv(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){pe(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var dd=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(ce("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pe(t)}},Di=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Zs="5",N_="v",x_="s",A_="r",R_="f",O_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,P_="ls",k_="p",fd="ac",F_="websocket",L_="long_polling";var Ks=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1,l=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=un.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&un.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function cx(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function V_(e,t,n){g(typeof t=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(t===F_)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===L_)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);cx(e)&&(n.ns=e.namespace);let i=[];return ge(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var hd=class{constructor(){this.counters_={}}incrementCounter(t,n=1){rt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return dv(this.counters_)}};var Ju={},ed={};function sf(e){let t=e.toString();return Ju[t]||(Ju[t]=new hd),Ju[t]}function lx(e,t){let n=e.toString();return ed[n]||(ed[n]=t()),ed[n]}var pd=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&hr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Yv="start",ux="close",dx="pLPCommand",fx="pRTLPCB",j_="id",B_="pw",U_="ser",hx="cb",px="seg",gx="ts",mx="d",yx="dframe",H_=1870,$_=30,vx=H_-$_,_x=25e3,Ex=3e4,gd=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ai(t),this.stats_=sf(n),this.urlFn=c=>(this.appCheckToken&&(c[fd]=this.appCheckToken),V_(n,L_,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new pd(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ex)),JN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new md((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Yv)this.id=a,this.password=c;else if(s===ux)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[Yv]="t",r[U_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[hx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[N_]=Zs,this.transportSessionId&&(r[x_]=this.transportSessionId),this.lastSessionId&&(r[P_]=this.lastSessionId),this.applicationId&&(r[k_]=this.applicationId),this.appCheckToken&&(r[fd]=this.appCheckToken),typeof location<"u"&&location.hostname&&O_.test(location.hostname)&&(r[A_]=R_);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return nt()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!tx()&&!nx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=te(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=ku(n),i=M_(r,vx);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(nt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[yx]="t",r[j_]=t,r[B_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=te(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},md=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,nt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=KN(),window[dx+this.uniqueCallbackIdentifier]=t,window[fx+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){ce("frame writing exception"),a.stack&&ce(a.stack),ce(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ce("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[j_]=this.myID,t[B_]=this.myPW,t[U_]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$_+r.length<=H_;){let s=this.pendingSegs.shift();r=r+"&"+px+i+"="+s.seg+"&"+gx+i+"="+s.ts+"&"+mx+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(_x)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){nt()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ce("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Dx=16384,Cx=45e3,Qs=null;typeof MozWebSocket<"u"?Qs=MozWebSocket:typeof WebSocket<"u"&&(Qs=WebSocket);var mi=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ai(this.connId),this.stats_=sf(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[N_]=Zs,!nt()&&typeof location<"u"&&location.hostname&&O_.test(location.hostname)&&(a[A_]=R_),r&&(a[x_]=r),i&&(a[P_]=i),o&&(a[fd]=o),s&&(a[k_]=s),V_(n,F_,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,un.set("previous_websocket_failure",!0);try{let i;if(nt()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Zs}/${rf}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Qs(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Qs!==null&&!e.forceDisallow_}static previouslyFailed(){return un.isInMemoryStorage||un.get("previous_websocket_failure")===!0}markConnectionHealthy(){un.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Kn(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=te(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=M_(r,Dx);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Cx))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),wx=(()=>{class e{static get ALL_TRANSPORTS(){return[gd,mi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=mi&&mi.isAvailable(),i=r&&!mi.previouslyFailed();if(n.webSocketOnly&&(r||pe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[mi];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),bx=6e4,Ix=5e3,Tx=10*1024,Mx=100*1024,td="t",Zv="d",Sx="s",Kv="r",Nx="e",Qv="o",Xv="a",Jv="n",e_="p",xx="h",yd=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ai("c:"+this.id+":"),this.transportManager_=new wx(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ei(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Mx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Tx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(td in t){let n=t[td];n===Xv?this.upgradeIfSecondaryHealthy_():n===Kv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Qv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=gi("t",t),r=gi("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:e_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Xv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Jv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=gi("t",t),r=gi("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=gi(td,t);if(Zv in t){let r=t[Zv];if(n===xx){let i=b({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Jv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Sx?this.onConnectionShutdown_(r):n===Kv?this.onReset_(r):n===Nx?ld("Server Error: "+r):n===Qv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ld("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Zs!==r&&pe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ei(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bx))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ei(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Ix))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:e_,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(un.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Xs=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var Js=class{constructor(t){this.allowedEvents_=t,this.listeners_={},g(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){g(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var ea=class e extends Js{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return g(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var t_=32,n_=768,V=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function O(){return new V("")}function M(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ft(e){return e.pieces_.length-e.pieceNum_}function H(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new V(e.pieces_,t)}function G_(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ax(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function W_(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function z_(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new V(t,0)}function ne(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof V)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new V(n,0)}function x(e){return e.pieceNum_>=e.pieces_.length}function he(e,t){let n=M(e),r=M(t);if(n===null)return t;if(n===r)return he(H(e),H(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function af(e,t){if(Ft(e)!==Ft(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function $e(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Ft(e)>Ft(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var vd=class{constructor(t,n){this.errorPrefix_=n,this.parts_=W_(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=di(this.parts_[r]);q_(this)}};function Rx(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=di(t),q_(e)}function Ox(e){let t=e.parts_.pop();e.byteLength_-=di(t),e.parts_.length>0&&(e.byteLength_-=1)}function q_(e){if(e.byteLength_>n_)throw new Error(e.errorPrefix_+"has a key path longer than "+n_+" bytes ("+e.byteLength_+").");if(e.parts_.length>t_)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t_+") or object contains a cycle "+ln(e))}function ln(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var _d=class e extends Js{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return g(t==="visible","Unknown event type: "+t),[this.visible_]}};var yi=1e3,Px=60*5*1e3,r_=30*1e3,kx=1.3,Fx=3e4,Lx="server_kill",i_=3,cf=(()=>{class e extends Xs{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=Ai("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yi,this.maxReconnectDelay_=Px,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!nt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_d.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&ea.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(te(s)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Rt,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&rt(n,"w")){let i=an(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();pe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||wv(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=r_)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=Cv(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+te(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ld("Unrecognized action received from server: "+te(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yi,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=yi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Fx&&(this.reconnectDelay_=yi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*kx)}this.onConnectStatus_(!1)}establishConnection_(){return j(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?ce("getToken() completed but was canceled"):(ce("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new yd(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{pe(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(Lx)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&pe(f),l())}}})}interrupt(n){ce("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ce("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Vu(this.interruptReasons_)&&(this.reconnectDelay_=yi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>of(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new V(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){ce("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=i_&&(this.reconnectDelay_=r_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){ce("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=i_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";nt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+rf.replace(/\./g,"-")]=1,Lu()?n["framework.cordova"]=1:vv()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=ea.getInstance().currentlyOnline();return Vu(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),S=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var sr=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new S(or,t),i=new S(or,n);return this.compare(r,i)!==0}minPost(){return S.MIN}};var Ys,ta=class extends sr{static get __EMPTY_NODE(){return Ys}static set __EMPTY_NODE(t){Ys=t}compare(t,n){return fr(t.name,n.name)}isDefinedOn(t){throw sn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return S.MIN}maxPost(){return new S(hn,Ys)}makePost(t,n){return g(typeof t=="string","KeyIndex indexValue must always be a string."),new S(t,Ys)}toString(){return".key"}},rr=new ta;var tr=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},He=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??Re.EMPTY_NODE,this.right=s??Re.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Re.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Re.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Ed=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new He(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Re=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,He.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,He.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new tr(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new tr(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new tr(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new tr(this.root_,null,this.comparator_,!0,t)}};Re.EMPTY_NODE=new Ed;function Vx(e,t){return fr(e.name,t.name)}function lf(e,t){return fr(e,t)}var Dd;function jx(e){Dd=e}var Y_=function(e){return typeof e=="number"?"number:"+S_(e):"string:"+e},Z_=function(e){if(e.isLeafNode()){let t=e.val();g(typeof t=="string"||typeof t=="number"||typeof t=="object"&&rt(t,".sv"),"Priority must be a string or number.")}else g(e===Dd||e.isEmpty(),"priority of unexpected type.");g(e===Dd||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var o_,ar=(()=>{class e{static set __childrenNodeConstructor(n){o_=n}static get __childrenNodeConstructor(){return o_}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Z_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return x(n)?this:M(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=M(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||Ft(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Y_(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=S_(this.value_):n+=this.value_,this.lazyHash_=I_(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return g(o>=0,"Unknown leaf type: "+r),g(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),K_,Q_;function Bx(e){K_=e}function Ux(e){Q_=e}var Cd=class extends sr{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?fr(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return S.MIN}maxPost(){return new S(hn,new ar("[PRIORITY-POST]",Q_))}makePost(t,n){let r=K_(t);return new S(n,new ar("[PRIORITY-POST]",r))}toString(){return".priority"}},K=new Cd;var Hx=Math.log(2),wd=class{constructor(t){let n=o=>parseInt(Math.log(o)/Hx,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},na=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=e[c],f=n?n(d):d,new He(f,d.node,He.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),m=i(h+1,l);return d=e[h],f=n?n(d):d,new He(f,d.node,He.BLACK,p,m)}},o=function(c){let l=null,u=null,d=e.length,f=function(p,m){let w=d-p,$=d;d-=p;let Oe=i(w+1,$),Pe=e[w],gr=n?n(Pe):Pe;h(new He(gr,Pe.node,m,null,Oe))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let m=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));m?f(w,He.BLACK):(f(w,He.BLACK),f(w,He.RED))}return u},s=new wd(e.length),a=o(s);return new Re(r||t,a)};var nd,er={},cr=class e{static get Default(){return g(er&&K,"ChildrenNode.ts has not been loaded"),nd=nd||new e({".priority":er},{".priority":K}),nd}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=an(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Re?n:null}hasIndex(t){return rt(this.indexSet_,t.toString())}addIndex(t,n){g(t!==rr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(S.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=na(r,t.getCompare()):a=er;let c=t.toString(),l=b({},this.indexSet_);l[c]=t;let u=b({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=ui(this.indexes_,(i,o)=>{let s=an(this.indexSet_,o);if(g(s,"Missing index implementation for "+o),i===er)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(S.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),na(a,s.getCompare())}else return er;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new S(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=ui(this.indexes_,i=>{if(i===er)return i;{let o=n.get(t.name);return o?i.remove(new S(t.name,o)):i}});return new e(r,this.indexSet_)}};var vi,I=(()=>{class e{static get EMPTY_NODE(){return vi||(vi=new e(new Re(lf),null,cr.Default))}constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Z_(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vi}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?vi:r}}getChild(n){let r=M(n);return r===null?this:this.getImmediateChild(r).getChild(H(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new S(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?vi:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=M(n);if(i===null)return r;{g(M(n)!==".priority"||Ft(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(H(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(K,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Y_(this.getPriority().val())+":"),this.forEachChild(K,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":I_(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new S(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new S(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new S(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,S.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,S.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Ri?-1:0}withIndex(n){if(n===rr||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===rr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(K),o=r.getIterator(K),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===rr?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),bd=class extends I{constructor(){super(new Re(lf),I.EMPTY_NODE,cr.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return I.EMPTY_NODE}isEmpty(){return!1}},Ri=new bd;Object.defineProperties(S,{MIN:{value:new S(or,I.EMPTY_NODE)},MAX:{value:new S(hn,Ri)}});ta.__EMPTY_NODE=I.EMPTY_NODE;ar.__childrenNodeConstructor=I;jx(Ri);Ux(Ri);var $x=!0;function ae(e,t=null){if(e===null)return I.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),g(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new ar(n,ae(t))}if(!(e instanceof Array)&&$x){let n=[],r=!1;if(ge(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=ae(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new S(s,c)))}}),n.length===0)return I.EMPTY_NODE;let o=na(n,Vx,s=>s.name,lf);if(r){let s=na(n,K.getCompare());return new I(o,ae(t),new cr({".priority":s},{".priority":K}))}else return new I(o,ae(t),cr.Default)}else{let n=I.EMPTY_NODE;return ge(e,(r,i)=>{if(rt(e,r)&&r.substring(0,1)!=="."){let o=ae(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ae(t))}}Bx(ae);var Id=class extends sr{constructor(t){super(),this.indexPath_=t,g(!x(t)&&M(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?fr(t.name,n.name):o}makePost(t,n){let r=ae(t),i=I.EMPTY_NODE.updateChild(this.indexPath_,r);return new S(n,i)}maxPost(){let t=I.EMPTY_NODE.updateChild(this.indexPath_,Ri);return new S(hn,t)}toString(){return W_(this.indexPath_,0).join("/")}};var Td=class extends sr{compare(t,n){let r=t.node.compareTo(n.node);return r===0?fr(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return S.MIN}maxPost(){return S.MAX}makePost(t,n){let r=ae(t);return new S(n,r)}toString(){return".value"}},Gx=new Td;function X_(e){return{type:"value",snapshotNode:e}}function lr(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ii(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ti(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function Wx(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Mi=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){g(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(Ii(n,a)):g(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(lr(n,r)):s.trackChildChange(Ti(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(K,(i,o)=>{n.hasChild(i)||r.trackChildChange(Ii(i,o))}),n.isLeafNode()||n.forEachChild(K,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(Ti(i,o,s))}else r.trackChildChange(lr(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?I.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var ra=class e{constructor(t){this.indexedFilter_=new Mi(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new S(n,r))||(r=I.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=I.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(I.EMPTY_NODE);let o=this;return n.forEachChild(K,(s,a)=>{o.matches(new S(s,a))||(i=i.updateImmediateChild(s,I.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var Md=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ra(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new S(n,r))||(r=I.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=I.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=I.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(I.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,I.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;g(a.numChildren()===this.limit_,"");let c=new S(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Ti(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Ii(n,d));let m=a.updateImmediateChild(n,I.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(lr(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Ii(l.name,l.node)),o.trackChildChange(lr(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,I.EMPTY_NODE)):t}};var Sd=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=K}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:or}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===K}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function zx(e){return e.loadsAllData()?new Mi(e.getIndex()):e.hasLimit()?new Md(e):new ra(e)}function s_(e){let t={};if(e.isDefault())return t;let n;if(e.index_===K?n="$priority":e.index_===Gx?n="$value":e.index_===rr?n="$key":(g(e.index_ instanceof Id,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=te(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=te(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+te(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=te(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+te(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function a_(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==K&&(t.i=e.index_.toString()),t}var Nd=class e extends Xs{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(g(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ai("p:rest:"),this.listens_={}}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=s_(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),an(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=s_(t._queryParams),r=t._path.toString(),i=new Rt;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+bv(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Kn(a.responseText)}catch{pe("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&pe("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var xd=class{constructor(){this.rootNode_=I.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function ia(){return{value:null,children:new Map}}function J_(e,t,n){if(x(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=M(t);e.children.has(r)||e.children.set(r,ia());let i=e.children.get(r);t=H(t),J_(i,t,n)}}function Ad(e,t,n){e.value!==null?n(t,e.value):qx(e,(r,i)=>{let o=new V(t.toString()+"/"+r);Ad(i,o,n)})}function qx(e,t){e.children.forEach((n,r)=>{t(r,n)})}var Rd=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=b({},t);return this.last_&&ge(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var c_=10*1e3,Yx=30*1e3,Zx=5*60*1e3,Od=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Rd(t);let r=c_+(Yx-c_)*Math.random();Ei(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;ge(t,(i,o)=>{o>0&&rt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ei(this.reportStats_.bind(this),Math.floor(Math.random()*2*Zx))}};var ot=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(ot||{});function eE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function uf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function df(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Pd=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=ot.ACK_USER_WRITE,this.source=eE()}operationForChild(t){if(x(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new V(t));return new e(O(),n,this.revert)}}else return g(M(this.path)===t,"operationForChild called for unrelated child."),new e(H(this.path),this.affectedTree,this.revert)}};var oa=class e{constructor(t,n){this.source=t,this.path=n,this.type=ot.LISTEN_COMPLETE}operationForChild(t){return x(this.path)?new e(this.source,O()):new e(this.source,H(this.path))}};var ur=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=ot.OVERWRITE}operationForChild(t){return x(this.path)?new e(this.source,O(),this.snap.getImmediateChild(t)):new e(this.source,H(this.path),this.snap)}};var sa=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=ot.MERGE}operationForChild(t){if(x(this.path)){let n=this.children.subtree(new V(t));return n.isEmpty()?null:n.value?new ur(this.source,O(),n.value):new e(this.source,O(),n)}else return g(M(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,H(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var _t=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(x(t))return this.isFullyInitialized()&&!this.filtered_;let n=M(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var kd=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function Kx(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(Wx(s.childName,s.snapshotNode))}),_i(e,i,"child_removed",t,r,n),_i(e,i,"child_added",t,r,n),_i(e,i,"child_moved",o,r,n),_i(e,i,"child_changed",t,r,n),_i(e,i,"value",t,r,n),i}function _i(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>Xx(e,a,c)),s.forEach(a=>{let c=Qx(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function Qx(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Xx(e,t,n){if(t.childName==null||n.childName==null)throw sn("Should only compare child_ events.");let r=new S(t.childName,t.snapshotNode),i=new S(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function va(e,t){return{eventCache:e,serverCache:t}}function Ci(e,t,n,r){return va(new _t(t,n,r),e.serverCache)}function tE(e,t,n,r){return va(e.eventCache,new _t(t,n,r))}function Fd(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function pn(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var rd,Jx=()=>(rd||(rd=new Re(ex)),rd),me=class e{static fromObject(t){let n=new e(null);return ge(t,(r,i)=>{n=n.set(new V(r),i)}),n}constructor(t,n=Jx()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:O(),value:this.value};if(x(t))return null;{let r=M(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(H(t),n);return o!=null?{path:ne(new V(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(x(t))return this;{let n=M(t),r=this.children.get(n);return r!==null?r.subtree(H(t)):new e(null)}}set(t,n){if(x(t))return new e(n,this.children);{let r=M(t),o=(this.children.get(r)||new e(null)).set(H(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(x(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=M(t),r=this.children.get(n);if(r){let i=r.remove(H(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(x(t))return this.value;{let n=M(t),r=this.children.get(n);return r?r.get(H(t)):null}}setTree(t,n){if(x(t))return n;{let r=M(t),o=(this.children.get(r)||new e(null)).setTree(H(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(O(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(ne(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,O(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(x(t))return null;{let o=M(t),s=this.children.get(o);return s?s.findOnPath_(H(t),ne(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,O(),n)}foreachOnPath_(t,n,r){if(x(t))return this;{this.value&&r(n,this.value);let i=M(t),o=this.children.get(i);return o?o.foreachOnPath_(H(t),ne(n,i),r):new e(null)}}foreach(t){this.foreach_(O(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ne(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var Ge=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new me(null))}};function wi(e,t,n){if(x(t))return new Ge(new me(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=he(i,t);return o=o.updateChild(s,n),new Ge(e.writeTree_.set(i,o))}else{let i=new me(n),o=e.writeTree_.setTree(t,i);return new Ge(o)}}}function l_(e,t,n){let r=e;return ge(n,(i,o)=>{r=wi(r,ne(t,i),o)}),r}function u_(e,t){if(x(t))return Ge.empty();{let n=e.writeTree_.setTree(t,new me(null));return new Ge(n)}}function Ld(e,t){return gn(e,t)!=null}function gn(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(he(n.path,t)):null}function d_(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(K,(r,i)=>{t.push(new S(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new S(r,i.value))}),t}function kt(e,t){if(x(t))return e;{let n=gn(e,t);return n!=null?new Ge(new me(n)):new Ge(e.writeTree_.subtree(t))}}function Vd(e){return e.writeTree_.isEmpty()}function dr(e,t){return nE(O(),e.writeTree_,t)}function nE(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(g(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=nE(ne(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(ne(e,".priority"),r)),n}}function ff(e,t){return sE(t,e)}function eA(e,t,n,r,i){g(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=wi(e.visibleWrites,t,n)),e.lastWriteId=r}function tA(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function nA(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);g(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&rA(a,r.path)?i=!1:$e(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return iA(e),!0;if(r.snap)e.visibleWrites=u_(e.visibleWrites,r.path);else{let a=r.children;ge(a,c=>{e.visibleWrites=u_(e.visibleWrites,ne(r.path,c))})}return!0}else return!1}function rA(e,t){if(e.snap)return $e(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&$e(ne(e.path,n),t))return!0;return!1}function iA(e){e.visibleWrites=rE(e.allWrites,oA,O()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function oA(e){return e.visible}function rE(e,t,n){let r=Ge.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)$e(n,s)?(a=he(n,s),r=wi(r,a,o.snap)):$e(s,n)&&(a=he(s,n),r=wi(r,O(),o.snap.getChild(a)));else if(o.children){if($e(n,s))a=he(n,s),r=l_(r,a,o.children);else if($e(s,n))if(a=he(s,n),x(a))r=l_(r,O(),o.children);else{let c=an(o.children,M(a));if(c){let l=c.getChild(H(a));r=wi(r,O(),l)}}}else throw sn("WriteRecord should have .snap or .children")}}return r}function iE(e,t,n,r,i){if(!r&&!i){let o=gn(e.visibleWrites,t);if(o!=null)return o;{let s=kt(e.visibleWrites,t);if(Vd(s))return n;if(n==null&&!Ld(s,O()))return null;{let a=n||I.EMPTY_NODE;return dr(s,a)}}}else{let o=kt(e.visibleWrites,t);if(!i&&Vd(o))return n;if(!i&&n==null&&!Ld(o,O()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&($e(l.path,t)||$e(t,l.path))},a=rE(e.allWrites,s,t),c=n||I.EMPTY_NODE;return dr(a,c)}}}function sA(e,t,n){let r=I.EMPTY_NODE,i=gn(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(K,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=kt(e.visibleWrites,t);return n.forEachChild(K,(s,a)=>{let c=dr(kt(o,new V(s)),a);r=r.updateImmediateChild(s,c)}),d_(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=kt(e.visibleWrites,t);return d_(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function aA(e,t,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=ne(t,n);if(Ld(e.visibleWrites,o))return null;{let s=kt(e.visibleWrites,o);return Vd(s)?i.getChild(n):dr(s,i.getChild(n))}}function cA(e,t,n,r){let i=ne(t,n),o=gn(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=kt(e.visibleWrites,i);return dr(s,r.getNode().getImmediateChild(n))}else return null}function lA(e,t){return gn(e.visibleWrites,t)}function uA(e,t,n,r,i,o,s){let a,c=kt(e.visibleWrites,t),l=gn(c,O());if(l!=null)a=l;else if(n!=null)a=dr(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function dA(){return{visibleWrites:Ge.empty(),allWrites:[],lastWriteId:-1}}function aa(e,t,n,r){return iE(e.writeTree,e.treePath,t,n,r)}function hf(e,t){return sA(e.writeTree,e.treePath,t)}function f_(e,t,n,r){return aA(e.writeTree,e.treePath,t,n,r)}function ca(e,t){return lA(e.writeTree,ne(e.treePath,t))}function fA(e,t,n,r,i,o){return uA(e.writeTree,e.treePath,t,n,r,i,o)}function pf(e,t,n){return cA(e.writeTree,e.treePath,t,n)}function oE(e,t){return sE(ne(e.treePath,t),e.writeTree)}function sE(e,t){return{treePath:e,writeTree:t}}var jd=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Ti(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Ii(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,lr(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ti(r,t.snapshotNode,i.oldSnap));else throw sn("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var Bd=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},aE=new Bd,Si=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new _t(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pf(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:pn(this.viewCache_),o=fA(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function hA(e){return{filter:e}}function pA(e,t){g(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),g(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function gA(e,t,n,r,i){let o=new jd,s,a;if(n.type===ot.OVERWRITE){let l=n;l.source.fromUser?s=Ud(e,t,l.path,l.snap,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!x(l.path),s=la(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===ot.MERGE){let l=n;l.source.fromUser?s=yA(e,t,l.path,l.children,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=Hd(e,t,l.path,l.children,r,i,a,o))}else if(n.type===ot.ACK_USER_WRITE){let l=n;l.revert?s=EA(e,t,l.path,r,i,o):s=vA(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===ot.LISTEN_COMPLETE)s=_A(e,t,n.path,r,o);else throw sn("Unknown operation type: "+n.type);let c=o.getChanges();return mA(t,s,c),{viewCache:s,changes:c}}function mA(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Fd(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(X_(Fd(t)))}}function cE(e,t,n,r,i,o){let s=t.eventCache;if(ca(r,n)!=null)return t;{let a,c;if(x(n))if(g(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=pn(t),u=l instanceof I?l:I.EMPTY_NODE,d=hf(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=aa(r,pn(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=M(n);if(l===".priority"){g(Ft(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=f_(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=H(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let f=f_(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=pf(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Ci(t,a,s.isFullyInitialized()||x(n),e.filter.filtersNodes())}}function la(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(x(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=M(n);if(!c.isCompleteForPath(n)&&Ft(n)>1)return t;let p=H(n),w=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),h,w,p,aE,null)}let d=tE(t,l,c.isFullyInitialized()||x(n),u.filtersNodes()),f=new Si(i,d,o);return cE(e,d,n,i,f,a)}function Ud(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new Si(i,t,o);if(x(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=Ci(t,l,!0,e.filter.filtersNodes());else{let d=M(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=Ci(t,l,a.isFullyInitialized(),a.isFiltered());else{let f=H(n),h=a.getNode().getImmediateChild(d),p;if(x(f))p=r;else{let m=u.getCompleteChild(d);m!=null?G_(f)===".priority"&&m.getChild(z_(f)).isEmpty()?p=m:p=m.updateChild(f,r):p=I.EMPTY_NODE}if(h.equals(p))c=t;else{let m=e.filter.updateChild(a.getNode(),d,p,f,u,s);c=Ci(t,m,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function h_(e,t){return e.eventCache.isCompleteForChild(t)}function yA(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=ne(n,c);h_(t,M(u))&&(a=Ud(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=ne(n,c);h_(t,M(u))||(a=Ud(e,a,u,l,i,o,s))}),a}function p_(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function Hd(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;x(n)?l=r:l=new me(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),p=p_(e,h,f);c=la(e,c,new V(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=t.serverCache.getNode().getImmediateChild(d),m=p_(e,p,f);c=la(e,c,new V(d),m,i,o,s,a)}}),c}function vA(e,t,n,r,i,o,s){if(ca(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(x(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return la(e,t,n,c.getNode().getChild(n),i,o,a,s);if(x(n)){let l=new me(null);return c.getNode().forEachChild(rr,(u,d)=>{l=l.set(new V(u),d)}),Hd(e,t,n,l,i,o,a,s)}else return t}else{let l=new me(null);return r.foreach((u,d)=>{let f=ne(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Hd(e,t,n,l,i,o,a,s)}}function _A(e,t,n,r,i){let o=t.serverCache,s=tE(t,o.getNode(),o.isFullyInitialized()||x(n),o.isFiltered());return cE(e,s,n,r,aE,i)}function EA(e,t,n,r,i,o){let s;if(ca(r,n)!=null)return t;{let a=new Si(r,t,i),c=t.eventCache.getNode(),l;if(x(n)||M(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=aa(r,pn(t));else{let d=t.serverCache.getNode();g(d instanceof I,"serverChildren would be complete if leaf node"),u=hf(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=M(n),d=pf(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,H(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,I.EMPTY_NODE,H(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=aa(r,pn(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||ca(r,O())!=null,Ci(t,l,s,e.filter.filtersNodes())}}var $d=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Mi(r.getIndex()),o=zx(r);this.processor_=hA(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(I.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(I.EMPTY_NODE,a.getNode(),null),u=new _t(c,s.isFullyInitialized(),i.filtersNodes()),d=new _t(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=va(d,u),this.eventGenerator_=new kd(this.query_)}get query(){return this.query_}};function DA(e){return e.viewCache_.serverCache.getNode()}function CA(e,t){let n=pn(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!x(t)&&!n.getImmediateChild(M(t)).isEmpty())?n.getChild(t):null}function g_(e){return e.eventRegistrations_.length===0}function wA(e,t){e.eventRegistrations_.push(t)}function m_(e,t,n){let r=[];if(n){g(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function y_(e,t,n,r){t.type===ot.MERGE&&t.source.queryId!==null&&(g(pn(e.viewCache_),"We should always have a full cache before handling merges"),g(Fd(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=gA(e.processor_,i,t,n,r);return pA(e.processor_,o.viewCache),g(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,lE(e,o.changes,o.viewCache.eventCache.getNode(),null)}function bA(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(K,(o,s)=>{r.push(lr(o,s))}),n.isFullyInitialized()&&r.push(X_(n.getNode())),lE(e,r,n.getNode(),t)}function lE(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return Kx(e.eventGenerator_,t,n,i)}var ua,Gd=class{constructor(){this.views=new Map}};function IA(e){g(!ua,"__referenceConstructor has already been defined"),ua=e}function TA(){return g(ua,"Reference.ts has not been loaded"),ua}function MA(e){return e.views.size===0}function gf(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return g(o!=null,"SyncTree gave us an op for an invalid query."),y_(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(y_(s,t,n,r));return o}}function SA(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=aa(n,i?r:null),c=!1;a?c=!0:r instanceof I?(a=hf(n,r),c=!1):(a=I.EMPTY_NODE,c=!1);let l=va(new _t(a,c,!1),new _t(r,i,!1));return new $d(t,l)}return s}function NA(e,t,n,r,i,o){let s=SA(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),wA(s,n),bA(s,n)}function xA(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Lt(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(m_(l,n,r)),g_(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(m_(c,n,r)),g_(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Lt(e)&&o.push(new(TA())(t._repo,t._path)),{removed:o,events:s}}function uE(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ir(e,t){let n=null;for(let r of e.views.values())n=n||CA(r,t);return n}function dE(e,t){if(t._queryParams.loadsAllData())return _a(e);{let r=t._queryIdentifier;return e.views.get(r)}}function fE(e,t){return dE(e,t)!=null}function Lt(e){return _a(e)!=null}function _a(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var da;function AA(e){g(!da,"__referenceConstructor has already been defined"),da=e}function RA(){return g(da,"Reference.ts has not been loaded"),da}var OA=1,fa=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new me(null),this.pendingWriteTree_=dA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function hE(e,t,n,r,i){return eA(e.pendingWriteTree_,t,n,r,i),i?Oi(e,new ur(eE(),t,n)):[]}function dn(e,t,n=!1){let r=tA(e.pendingWriteTree_,t);if(nA(e.pendingWriteTree_,t)){let o=new me(null);return r.snap!=null?o=o.set(O(),!0):ge(r.children,s=>{o=o.set(new V(s),!0)}),Oi(e,new Pd(r.path,o,n))}else return[]}function Ea(e,t,n){return Oi(e,new ur(uf(),t,n))}function PA(e,t,n){let r=me.fromObject(n);return Oi(e,new sa(uf(),t,r))}function kA(e,t){return Oi(e,new oa(uf(),t))}function FA(e,t,n){let r=yf(e,n);if(r){let i=vf(r),o=i.path,s=i.queryId,a=he(o,t),c=new oa(df(s),a);return _f(e,o,c)}else return[]}function Wd(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||fE(s,t))){let c=xA(s,t,n,r);MA(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>Lt(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=jA(f);for(let p=0;p<h.length;++p){let m=h[p],w=m.query,$=mE(e,m);e.listenProvider_.startListening(bi(w),ha(e,w),$.hashFn,$.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(bi(t),null):l.forEach(f=>{let h=e.queryToTagMap.get(Da(f));e.listenProvider_.stopListening(bi(f),h)}))}BA(e,l)}return a}function LA(e,t,n,r){let i=yf(e,r);if(i!=null){let o=vf(i),s=o.path,a=o.queryId,c=he(s,t),l=new ur(df(a),c,n);return _f(e,s,l)}else return[]}function VA(e,t,n,r){let i=yf(e,r);if(i){let o=vf(i),s=o.path,a=o.queryId,c=he(s,t),l=me.fromObject(n),u=new sa(df(a),c,l);return _f(e,s,u)}else return[]}function v_(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=he(f,i);o=o||ir(h,p),s=s||Lt(h)});let a=e.syncPointTree_.get(i);a?(s=s||Lt(a),o=o||ir(a,O())):(a=new Gd,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=I.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,p)=>{let m=ir(p,O());m&&(o=o.updateImmediateChild(h,m))}));let l=fE(a,t);if(!l&&!t._queryParams.loadsAllData()){let f=Da(t);g(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=UA();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=ff(e.pendingWriteTree_,i),d=NA(a,t,n,u,o,c);if(!l&&!s&&!r){let f=dE(a,t);d=d.concat(HA(e,t,f))}return d}function mf(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=he(s,t),l=ir(a,c);if(l)return l});return iE(i,t,o,n,!0)}function Oi(e,t){return pE(t,e.syncPointTree_,null,ff(e.pendingWriteTree_,O()))}function pE(e,t,n,r){if(x(e.path))return gE(e,t,n,r);{let i=t.get(O());n==null&&i!=null&&(n=ir(i,O()));let o=[],s=M(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=oE(r,s);o=o.concat(pE(a,c,l,u))}return i&&(o=o.concat(gf(i,e,r,n))),o}}function gE(e,t,n,r){let i=t.get(O());n==null&&i!=null&&(n=ir(i,O()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=oE(r,s),u=e.operationForChild(s);u&&(o=o.concat(gE(u,a,c,l)))}),i&&(o=o.concat(gf(i,e,r,n))),o}function mE(e,t){let n=t.query,r=ha(e,n);return{hashFn:()=>(DA(t)||I.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?FA(e,n._path,r):kA(e,n._path);{let o=rx(i,n);return Wd(e,n,null,o)}}}}function ha(e,t){let n=Da(t);return e.queryToTagMap.get(n)}function Da(e){return e._path.toString()+"$"+e._queryIdentifier}function yf(e,t){return e.tagToQueryMap.get(t)}function vf(e){let t=e.indexOf("$");return g(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new V(e.substr(0,t))}}function _f(e,t,n){let r=e.syncPointTree_.get(t);g(r,"Missing sync point for query tag that we're tracking");let i=ff(e.pendingWriteTree_,t);return gf(r,n,i,null)}function jA(e){return e.fold((t,n,r)=>{if(n&&Lt(n))return[_a(n)];{let i=[];return n&&(i=uE(n)),ge(r,(o,s)=>{i=i.concat(s)}),i}})}function bi(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(RA())(e._repo,e._path):e}function BA(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=Da(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function UA(){return OA++}function HA(e,t,n){let r=t._path,i=ha(e,t),o=mE(e,n),s=e.listenProvider_.startListening(bi(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)g(!Lt(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!x(l)&&u&&Lt(u))return[_a(u).query];{let f=[];return u&&(f=f.concat(uE(u).map(h=>h.query))),ge(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(bi(u),ha(e,u))}}return s}var zd=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},qd=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=ne(this.path_,t);return new e(this.syncTree_,n)}node(){return mf(this.syncTree_,this.path_)}},$A=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},__=function(e,t,n){if(!e||typeof e!="object")return e;if(g(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return GA(e[".sv"],t,n);if(typeof e[".sv"]=="object")return WA(e[".sv"],t);g(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},GA=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+e)}},WA=function(e,t,n){e.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=t.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},zA=function(e,t,n,r){return Ef(t,new qd(n,e),r)},yE=function(e,t,n){return Ef(e,new zd(t),n)};function Ef(e,t,n){let r=e.getPriority().val(),i=__(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=__(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new ar(a,ae(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new ar(i))),s.forEachChild(K,(a,c)=>{let l=Ef(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Ni=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function Df(e,t){let n=t instanceof V?t:new V(t),r=e,i=M(n);for(;i!==null;){let o=an(r.node.children,i)||{children:{},childCount:0};r=new Ni(i,r,o),n=H(n),i=M(n)}return r}function pr(e){return e.node.value}function vE(e,t){e.node.value=t,Yd(e)}function _E(e){return e.node.childCount>0}function qA(e){return pr(e)===void 0&&!_E(e)}function Ca(e,t){ge(e.node.children,(n,r)=>{t(new Ni(n,e,r))})}function EE(e,t,n,r){n&&!r&&t(e),Ca(e,i=>{EE(i,t,!0,r)}),n&&r&&t(e)}function YA(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Pi(e){return new V(e.parent===null?e.name:Pi(e.parent)+"/"+e.name)}function Yd(e){e.parent!==null&&ZA(e.parent,e.name,e)}function ZA(e,t,n){let r=qA(n),i=rt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Yd(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,Yd(e))}var KA=/[\[\].#$\/\u0000-\u001F\u007F]/,QA=/[\[\].#$\u0000-\u001F\u007F]/,id=10*1024*1024,DE=function(e){return typeof e=="string"&&e.length!==0&&!KA.test(e)},CE=function(e){return typeof e=="string"&&e.length!==0&&!QA.test(e)},XA=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),CE(e)};var JA=function(e,t,n,r){r&&t===void 0||Cf(Gs(e,"value"),t,n)},Cf=function(e,t,n){let r=n instanceof V?new vd(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+ln(r));if(typeof t=="function")throw new Error(e+"contains a function "+ln(r)+" with contents = "+t.toString());if(T_(t))throw new Error(e+"contains "+t.toString()+" "+ln(r));if(typeof t=="string"&&t.length>id/3&&di(t)>id)throw new Error(e+"contains a string greater than "+id+" utf8 bytes "+ln(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(ge(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!DE(s)))throw new Error(e+" contains an invalid key ("+s+") "+ln(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Rx(r,s),Cf(e,a,r),Ox(r)}),i&&o)throw new Error(e+' contains ".value" child '+ln(r)+" in addition to actual children.")}};var wE=function(e,t,n,r){if(!(r&&n===void 0)&&!CE(n))throw new Error(Gs(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},eR=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),wE(e,t,n,r)},bE=function(e,t){if(M(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},tR=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!DE(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!XA(n))throw new Error(Gs(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Zd=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function wf(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!af(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function IE(e,t,n){wf(e,n),TE(e,r=>af(r,t))}function Et(e,t,n){wf(e,n),TE(e,r=>$e(r,t)||$e(t,r))}function TE(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(nR(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function nR(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();fn&&ce("event: "+n.toString()),hr(r)}}}var rR="repo_interrupt",iR=25,Kd=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zd,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ia(),this.transactionQueueTree_=new Ni,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function oR(e,t,n){if(e.stats_=sf(e.repoInfo_),e.forceRestClient_||ax())e.server_=new Nd(e.repoInfo_,(r,i,o,s)=>{E_(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>D_(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{te(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new cf(e.repoInfo_,t,(r,i,o,s)=>{E_(e,r,i,o,s)},r=>{D_(e,r)},r=>{aR(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=lx(e.repoInfo_,()=>new Od(e.stats_,e.server_)),e.infoData_=new xd,e.infoSyncTree_=new fa({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=Ea(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),If(e,"connected",!1),e.serverSyncTree_=new fa({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Et(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function sR(e){let n=e.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function bf(e){return $A({timestamp:sR(e)})}function E_(e,t,n,r,i){e.dataUpdateCount++;let o=new V(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=ui(n,l=>ae(l));s=VA(e.serverSyncTree_,o,c,i)}else{let c=ae(n);s=LA(e.serverSyncTree_,o,c,i)}else if(r){let c=ui(n,l=>ae(l));s=PA(e.serverSyncTree_,o,c)}else{let c=ae(n);s=Ea(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=wa(e,o)),Et(e.eventQueue_,a,s)}function D_(e,t){If(e,"connected",t),t===!1&&lR(e)}function aR(e,t){ge(t,(n,r)=>{If(e,n,r)})}function If(e,t,n){let r=new V("/.info/"+t),i=ae(n);e.infoData_.updateSnapshot(r,i);let o=Ea(e.infoSyncTree_,r,i);Et(e.eventQueue_,r,o)}function ME(e){return e.nextWriteId_++}function cR(e,t,n,r,i){Tf(e,"set",{path:t.toString(),value:n,priority:r});let o=bf(e),s=ae(n,r),a=mf(e.serverSyncTree_,t),c=yE(s,a,o),l=ME(e),u=hE(e.serverSyncTree_,t,c,l,!0);wf(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||pe("set at "+t+" failed: "+f);let m=dn(e.serverSyncTree_,l,!p);Et(e.eventQueue_,t,m),fR(e,i,f,h)});let d=RE(e,t);wa(e,d),Et(e.eventQueue_,d,[])}function lR(e){Tf(e,"onDisconnectEvents");let t=bf(e),n=ia();Ad(e.onDisconnect_,O(),(i,o)=>{let s=zA(i,o,e.serverSyncTree_,t);J_(n,i,s)});let r=[];Ad(n,O(),(i,o)=>{r=r.concat(Ea(e.serverSyncTree_,i,o));let s=RE(e,i);wa(e,s)}),e.onDisconnect_=ia(),Et(e.eventQueue_,O(),r)}function uR(e,t,n){let r;M(t._path)===".info"?r=v_(e.infoSyncTree_,t,n):r=v_(e.serverSyncTree_,t,n),IE(e.eventQueue_,t._path,r)}function C_(e,t,n){let r;M(t._path)===".info"?r=Wd(e.infoSyncTree_,t,n):r=Wd(e.serverSyncTree_,t,n),IE(e.eventQueue_,t._path,r)}function dR(e){e.persistentConnection_&&e.persistentConnection_.interrupt(rR)}function Tf(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),ce(n,...t)}function fR(e,t,n,r){t&&hr(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function SE(e,t,n){return mf(e.serverSyncTree_,t,n)||I.EMPTY_NODE}function Mf(e,t=e.transactionQueueTree_){if(t||ba(e,t),pr(t)){let n=xE(e,t);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&hR(e,Pi(t),n)}else _E(t)&&Ca(t,n=>{Mf(e,n)})}function hR(e,t,n){let r=n.map(l=>l.currentWriteId),i=SE(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=he(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{Tf(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(dn(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();ba(e,Df(e.transactionQueueTree_,t)),Mf(e,e.transactionQueueTree_),Et(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)hr(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{pe("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}wa(e,t)}},s)}function wa(e,t){let n=NE(e,t),r=Pi(n),i=xE(e,n);return pR(e,i,r),r}function pR(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=he(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(dn(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=iR)u=!0,d="maxretry",i=i.concat(dn(e.serverSyncTree_,c.currentWriteId,!0));else{let f=SE(e,c.path,s);c.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){Cf("transaction failed: Data returned ",h,c.path);let p=ae(h);typeof h=="object"&&h!=null&&rt(h,".priority")||(p=p.updatePriority(f.getPriority()));let w=c.currentWriteId,$=bf(e),Oe=yE(p,f,$);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=Oe,c.currentWriteId=ME(e),s.splice(s.indexOf(w),1),i=i.concat(hE(e.serverSyncTree_,c.path,Oe,c.currentWriteId,c.applyLocally)),i=i.concat(dn(e.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(dn(e.serverSyncTree_,c.currentWriteId,!0))}Et(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}ba(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)hr(r[a]);Mf(e,e.transactionQueueTree_)}function NE(e,t){let n,r=e.transactionQueueTree_;for(n=M(t);n!==null&&pr(r)===void 0;)r=Df(r,n),t=H(t),n=M(t);return r}function xE(e,t){let n=[];return AE(e,t,n),n.sort((r,i)=>r.order-i.order),n}function AE(e,t,n){let r=pr(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ca(t,i=>{AE(e,i,n)})}function ba(e,t){let n=pr(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,vE(t,n.length>0?n:void 0)}Ca(t,r=>{ba(e,r)})}function RE(e,t){let n=Pi(NE(e,t)),r=Df(e.transactionQueueTree_,t);return YA(r,i=>{od(e,i)}),od(e,r),EE(r,i=>{od(e,i)}),n}function od(e,t){let n=pr(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(g(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(g(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(dn(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?vE(t,void 0):n.length=o+1,Et(e.eventQueue_,Pi(t),i);for(let s=0;s<r.length;s++)hr(r[s])}}function gR(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function mR(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):pe(`Invalid query segment '${n}' in query '${e}'`)}return t}var w_=function(e,t){let n=yR(e),r=n.namespace;n.domain==="firebase.com"&&vt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&vt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||XN();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ks(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new V(n.pathString)}},yR=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=gR(e.substring(u,d)));let f=mR(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let h=t.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var pa=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+te(this.snapshot.exportVal())}},ga=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Qd=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Xd=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return x(this._path)?null:G_(this._path)}get ref(){return new Dt(this._repo,this._path)}get _queryIdentifier(){let t=a_(this._queryParams),n=of(t);return n==="{}"?"default":n}get _queryObject(){return a_(this._queryParams)}isEqual(t){if(t=Xn(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=af(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ax(this._path)}};var Dt=class e extends Xd{constructor(t,n){super(t,n,new Sd,!1)}get parent(){let t=z_(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},ma=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new V(t),r=ya(this.ref,t);return new e(this._node.getChild(n),r,K)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,ya(this.ref,r),K)))}hasChild(t){let n=new V(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Ia(e,t){return e=Xn(e),e._checkNotDeleted("ref"),t!==void 0?ya(e._root,t):e._root}function ya(e,t){return e=Xn(e),M(e._path)===null?eR("child","path",t,!1):wE("child","path",t,!1),new Dt(e._repo,ne(e._path,t))}function OE(e){return bE("remove",e._path),Sf(e,null)}function Sf(e,t){e=Xn(e),bE("set",e._path),JA("set",t,e._path,!1);let n=new Rt;return cR(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}var Jd=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new pa("value",this,new ma(t.snapshotNode,new Dt(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new ga(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},ef=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new ga(this,t,n):null}createEvent(t,n){g(t.childName!=null,"Child events should have a childName.");let r=ya(new Dt(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new pa(t.type,this,new ma(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function vR(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{C_(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Qd(n,o||void 0),a=t==="value"?new Jd(s):new ef(t,s);return uR(e._repo,e,a),()=>C_(e._repo,e,a)}function PE(e,t,n,r){return vR(e,"value",t,n,r)}IA(Dt);AA(Dt);var _R="FIREBASE_DATABASE_EMULATOR_HOST",tf={},ER=!1;function DR(e,t,n,r){let i=t.lastIndexOf(":"),o=t.substring(0,i),s=$s(o);e.repoInfo_=new Ks(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function CR(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||vt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ce("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=w_(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[_R]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=w_(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Di(Di.OWNER):new dd(e.name,e.options,t);tR("Invalid Firebase Database URL",s),x(s.path)||vt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=bR(a,e,u,new ud(e,n));return new nf(d,e)}function wR(e,t){let n=tf[t];(!n||n[e.key]!==e)&&vt(`Database ${t}(${e.repoInfo_}) has already been deleted.`),dR(e),delete n[e.key]}function bR(e,t,n,r){let i=tf[t.name];i||(i={},tf[t.name]=i);let o=i[e.toURLString()];return o&&vt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Kd(e,ER,n,r),i[e.toURLString()]=o,o}var nf=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dt(this._repo,O())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&vt("Cannot call "+t+" on a deleted database.")}};function kE(e=Uv(),t){let n=Vv(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=pv("database");r&&IR(n,...r)}return n}function IR(e,t,n,r={}){e=Xn(e),e._checkNotDeleted("useEmulator");let i=`${t}:${n}`,o=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Qn(r,o.repoInfo_.emulatorOptions))return;vt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&vt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Di(Di.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:mv(r.mockUserToken,e.app.options.projectId);s=new Di(a)}$s(t)&&(gv(t),yv("Database",!0)),DR(o,i,r,s)}function TR(e){ZN(Bv),hi(new mt("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return CR(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Pt(Gv,Wv,e),Pt(Gv,Wv,"esm2020")}cf.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};cf.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};TR();var Ta=class e{db;participantsSubject=new Bt([]);participants$=this.participantsSubject.asObservable();constructor(){let t={apiKey:"AIzaSyBNORKbQDMjvMmovUWVAIKxmfOAcIpUtLY",authDomain:"whos-eating.firebaseapp.com",databaseURL:"https://whos-eating-default-rtdb.europe-west1.firebasedatabase.app",projectId:"whos-eating",storageBucket:"whos-eating.firebasestorage.app",messagingSenderId:"1027430586394",appId:"1:1027430586394:web:1f956d00af660575da59a3"};try{let n=Xu(t);this.db=kE(n),console.log("\u2705 Firebase initialis\xE9 avec succ\xE8s"),this.listenToChanges()}catch(n){console.error("\u274C Erreur lors de l'initialisation Firebase:",n)}}listenToChanges(){let t=new Date().toDateString(),n=Ia(this.db,`lunches/${t}`);console.log("\u{1F50D} \xC9coute des changements pour:",t),PE(n,r=>{let i=r.val();console.log("\u{1F4E1} Donn\xE9es re\xE7ues de Firebase:",i),i&&i.participants?(console.log("\u2705 Mise \xE0 jour avec",i.participants.length,"participants"),this.participantsSubject.next(i.participants)):(console.log("\u2139\uFE0F Aucune donn\xE9e - tableau vide"),this.participantsSubject.next([]))},r=>{console.error("\u274C Erreur lors de la lecture Firebase:",r)})}saveParticipants(t){return j(this,null,function*(){try{let n=new Date().toDateString(),r=Ia(this.db,`lunches/${n}`);console.log("\u{1F4BE} Sauvegarde de",t.length,"participants dans Firebase"),yield Sf(r,{date:n,participants:t}),console.log("\u2705 Sauvegarde r\xE9ussie")}catch(n){console.error("\u274C Erreur lors de la sauvegarde:",n)}})}resetDay(){return j(this,null,function*(){try{let t=new Date().toDateString(),n=Ia(this.db,`lunches/${t}`);console.log("\u{1F504} R\xE9initialisation de la journ\xE9e"),yield OE(n),console.log("\u2705 R\xE9initialisation r\xE9ussie")}catch(t){console.error("\u274C Erreur lors de la r\xE9initialisation:",t)}})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})};function SR(e,t){if(e&1&&(k(0,"div",19),ws(1,"div",20),L()),e&2){let n=t.$implicit;ou("top",n.top,"%")("left",n.left,"%")("transform",n.transform)}}function NR(e,t){if(e&1){let n=Wn();k(0,"div",26)(1,"button",27),fe("click",function(){Ne(n);let i=se().$implicit,o=se();return xe(o.openGuestForm(i))}),ee(2," \u{1F464}+ "),L(),k(3,"button",28),fe("click",function(){Ne(n);let i=se().$implicit,o=se();return xe(o.removeMember(i))}),ee(4," \u2715 "),L()()}}function xR(e,t){if(e&1){let n=Wn();k(0,"div",21)(1,"button",22),fe("click",function(){let i=Ne(n).$implicit,o=se();return xe(o.addMember(i))}),k(2,"span",23),ee(3),L(),k(4,"span",24),ee(5),L()(),Nt(6,NR,5,0,"div",25),L()}if(e&2){let n=t.$implicit,r=se();Z(),zr("registered",r.hasMemberRegistered(n)),Ae("disabled",r.hasMemberRegistered(n)),Z(2),gt(n),Z(2),gt(r.hasMemberRegistered(n)?"\u2713":"+"),Z(),Ae("ngIf",r.hasMemberRegistered(n))}}function AR(e,t){if(e&1&&(k(0,"span",39),ee(1),L()),e&2){let n=se().$implicit;Z(),rn(" (invit\xE9 de ",n.addedBy,") ")}}function RR(e,t){if(e&1){let n=Wn();k(0,"div",32)(1,"div",33)(2,"span",34),ee(3),L(),k(4,"div",35)(5,"span",36),ee(6),L(),Nt(7,AR,2,1,"span",37),L()(),k(8,"button",38),fe("click",function(){let i=Ne(n).$implicit,o=se(2);return xe(o.removeParticipant(i))}),ee(9,"\u2715"),L()()}if(e&2){let n=t.$implicit;Z(3),gt(n.isGuest?"\u{1F464}":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}"),Z(3),gt(n.name),Z(),Ae("ngIf",n.isGuest)}}function OR(e,t){if(e&1&&(k(0,"div",29)(1,"h2",13),ee(2),L(),k(3,"div",30),Nt(4,RR,10,3,"div",31),L()()),e&2){let n=se();Z(2),rn("Participants (",n.totalCount,")"),Z(2),Ae("ngForOf",n.participants)}}function PR(e,t){if(e&1){let n=Wn();k(0,"div",40),fe("click",function(){Ne(n);let i=se();return xe(i.cancelGuestForm())}),k(1,"div",41),fe("click",function(i){return Ne(n),xe(i.stopPropagation())}),k(2,"h3",42),ee(3),L(),k(4,"input",43),au("ngModelChange",function(i){Ne(n);let o=se();return py(o.guestName,i)||(o.guestName=i),xe(i)}),fe("keyup.enter",function(){Ne(n);let i=se();return xe(i.addGuest(i.selectedMember))}),L(),k(5,"div",44)(6,"button",45),fe("click",function(){Ne(n);let i=se();return xe(i.cancelGuestForm())}),ee(7,"Annuler"),L(),k(8,"button",46),fe("click",function(){Ne(n);let i=se();return xe(i.addGuest(i.selectedMember))}),ee(9,"Ajouter"),L()()()()}if(e&2){let n=se();Z(3),rn("Invit\xE9 de ",n.selectedMember,""),Z(),su("ngModel",n.guestName),Z(4),Ae("disabled",!n.guestName.trim())}}function kR(e,t){if(e&1){let n=Wn();k(0,"footer",47)(1,"button",48),fe("click",function(){Ne(n);let i=se();return xe(i.resetDay())}),ee(2,"\u{1F504} R\xE9initialiser"),L()()}}var Ma=class e{constructor(t){this.dataService=t}title="Qui Mange Ce Midi ? \u{1F37D}\uFE0F";familyMembers=["Papa","Maman","David","Apo","Clovis","Julien"];participants=[];guestName="";selectedMember="";showGuestForm=!1;ngOnInit(){this.dataService.participants$.subscribe(t=>{this.participants=t})}getCurrentDate(){return new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}getEmojis(){return this.totalCount===0?"\u{1F634}":"\u{1F37D}\uFE0F".repeat(Math.min(this.totalCount,10))}getPlates(){let t=[],n=this.totalCount,r=42,i=50,o=50;for(let s=0;s<n;s++){let a=s*360/n-90,c=a*Math.PI/180,l=i+r*Math.cos(c),u=o+r*Math.sin(c);t.push({top:u,left:l,transform:`translate(-50%, -50%) rotate(${a}deg)`})}return t}get totalCount(){return this.participants.length}get availableMembers(){return this.familyMembers.filter(t=>!this.participants.some(n=>n.name===t&&!n.isGuest))}hasMemberRegistered(t){return this.participants.some(n=>n.name===t&&!n.isGuest)}hasAnyRegistered(){return this.participants.some(t=>!t.isGuest)}addMember(t){if(!this.hasMemberRegistered(t)){let n=[...this.participants,{name:t,isGuest:!1}];this.dataService.saveParticipants(n)}}removeMember(t){let n=this.participants.filter(r=>!(r.name===t&&!r.isGuest)&&r.addedBy!==t);this.dataService.saveParticipants(n)}addGuest(t){if(this.guestName.trim()&&t){let n=[...this.participants,{name:this.guestName.trim(),isGuest:!0,addedBy:t}];this.guestName="",this.showGuestForm=!1,this.selectedMember="",this.dataService.saveParticipants(n)}}removeParticipant(t){let n=this.participants.filter(r=>r!==t);this.dataService.saveParticipants(n)}openGuestForm(t){this.selectedMember=t,this.showGuestForm=!0}cancelGuestForm(){this.showGuestForm=!1,this.guestName="",this.selectedMember=""}resetDay(){this.dataService.resetDay()}static \u0275fac=function(n){return new(n||e)(q(Ta))};static \u0275cmp=ty({type:e,selectors:[["app-root"]],decls:24,vars:9,consts:[[1,"container"],[1,"header"],[1,"title"],[1,"date"],[1,"counter-section"],[1,"table-container"],[1,"table-top"],[1,"table-wood-grain"],[1,"counter-number"],[1,"counter-label"],[1,"plates-container"],["class","plate",3,"top","left","transform",4,"ngFor","ngForOf"],[1,"add-section"],[1,"section-title"],[1,"family-grid"],["class","member-card",4,"ngFor","ngForOf"],["class","participants-section",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","footer",4,"ngIf"],[1,"plate"],[1,"plate-inner"],[1,"member-card"],[1,"member-btn",3,"click","disabled"],[1,"member-name"],[1,"member-status"],["class","member-actions",4,"ngIf"],[1,"member-actions"],["title","Ajouter un invit\xE9",1,"action-btn","guest-add-btn",3,"click"],["title","Se d\xE9sinscrire",1,"action-btn","member-remove-btn",3,"click"],[1,"participants-section"],[1,"participants-list"],["class","participant-card",4,"ngFor","ngForOf"],[1,"participant-card"],[1,"participant-info"],[1,"participant-icon"],[1,"participant-details"],[1,"participant-name"],["class","participant-label",4,"ngIf"],["title","Retirer",1,"remove-btn",3,"click"],[1,"participant-label"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-title"],["type","text","placeholder","Nom de l'invit\xE9","autofocus","",1,"guest-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"modal-buttons"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click","disabled"],[1,"footer"],[1,"reset-btn",3,"click"]],template:function(n,r){n&1&&(k(0,"div",0)(1,"header",1)(2,"h1",2),ee(3),L(),k(4,"div",3),ee(5),L()(),k(6,"div",4)(7,"div",5)(8,"div",6),ws(9,"div",7),k(10,"div",8),ee(11),L(),k(12,"div",9),ee(13),L(),k(14,"div",10),Nt(15,SR,2,6,"div",11),L()()()(),k(16,"div",12)(17,"h2",13),ee(18,"Qui vient manger ?"),L(),k(19,"div",14),Nt(20,xR,7,6,"div",15),L()(),Nt(21,OR,5,2,"div",16)(22,PR,10,3,"div",17)(23,kR,3,0,"footer",18),L()),n&2&&(Z(3),gt(r.title),Z(2),gt(r.getCurrentDate()),Z(6),gt(r.totalCount),Z(2),rn("convive",r.totalCount>1?"s":"",""),Z(2),Ae("ngForOf",r.getPlates()),Z(5),Ae("ngForOf",r.familyMembers),Z(),Ae("ngIf",r.participants.length>0),Z(),Ae("ngIf",r.showGuestForm),Z(),Ae("ngIf",r.participants.length>0))},dependencies:[Ms,Ts,hu,sv,Vs,rv,Ru],styles:["[_nghost-%COMP%]{--retro-orange: #ff6b35;--retro-yellow: #f7b801;--retro-pink: #ff006e;--retro-blue: #8338ec;--retro-green: #06ffa5;--retro-cream: #fffbeb;--retro-brown: #3d2314;--retro-light: #fff8e7;--shadow: 4px 4px 0px rgba(0, 0, 0, .25)}.container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:15px;min-height:100vh}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:15px;padding:15px;background:var(--retro-yellow);border:3px solid var(--retro-brown);border-radius:15px;box-shadow:var(--shadow);transform:rotate(-1deg)}.title[_ngcontent-%COMP%]{font-size:1.6rem;margin:0;color:var(--retro-brown);text-shadow:2px 2px 0px var(--retro-orange);font-weight:700;line-height:1.2}.date[_ngcontent-%COMP%]{font-size:.85rem;color:var(--retro-brown);margin-top:5px;font-weight:600;text-transform:capitalize}.counter-section[_ngcontent-%COMP%]{padding:20px;margin-bottom:15px}.table-container[_ngcontent-%COMP%]{perspective:800px}.table-top[_ngcontent-%COMP%]{position:relative;width:100%;max-width:350px;height:350px;margin:0 auto;background:linear-gradient(135deg,#8b4513,sienna,#8b4513);border-radius:50%;border:8px solid var(--retro-brown);box-shadow:0 10px 30px #0000004d,inset 0 0 40px #0003,inset 0 0 80px #8b45134d;display:flex;flex-direction:column;align-items:center;justify-content:center;transform:rotateX(25deg)}.table-wood-grain[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:50%;background:repeating-linear-gradient(90deg,transparent,transparent 10px,rgba(0,0,0,.03) 10px,rgba(0,0,0,.03) 20px);pointer-events:none}.counter-number[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:900;color:var(--retro-yellow);text-shadow:3px 3px 0px var(--retro-brown),0 0 20px rgba(247,184,1,.5);line-height:1;z-index:10;position:relative}.counter-label[_ngcontent-%COMP%]{font-size:1rem;color:var(--retro-cream);margin-top:5px;font-weight:700;text-transform:uppercase;letter-spacing:2px;z-index:10;position:relative;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.plates-container[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none}.plate[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;border-radius:50%;background:#fff;border:3px solid var(--retro-brown);box-shadow:0 4px 8px #0003,inset 0 0 10px #0000001a;animation:_ngcontent-%COMP%_plateAppear .5s ease-out}.plate-inner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:35px;height:35px;border-radius:50%;border:2px solid #e0e0e0}@keyframes _ngcontent-%COMP%_plateAppear{0%{transform:translate(-50%,-50%) scale(0) rotate(180deg);opacity:0}to{transform:translate(-50%,-50%) scale(1) rotate(0);opacity:1}}.add-section[_ngcontent-%COMP%]{margin-bottom:15px}.section-title[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:12px;color:var(--retro-brown);text-align:center;font-weight:700;text-shadow:2px 2px 0px var(--retro-yellow)}.family-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:15px}.member-card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:6px}.member-btn[_ngcontent-%COMP%]{background:var(--retro-blue);color:#fff;border:3px solid var(--retro-brown);border-radius:12px;padding:15px 12px;font-size:1rem;font-weight:700;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .2s ease;box-shadow:var(--shadow);font-family:Comic Sans MS,cursive}.member-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translate(-2px,-2px);box-shadow:6px 6px #00000040}.member-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translate(2px,2px);box-shadow:2px 2px #00000040}.member-btn.registered[_ngcontent-%COMP%]{background:var(--retro-green);color:var(--retro-brown);cursor:default}.member-status[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700}.member-actions[_ngcontent-%COMP%]{display:flex;gap:6px}.action-btn[_ngcontent-%COMP%]{flex:1;border:2px solid var(--retro-brown);border-radius:8px;padding:8px 6px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s ease;box-shadow:2px 2px #0003;font-family:Comic Sans MS,cursive}.action-btn[_ngcontent-%COMP%]:hover{transform:translate(-1px,-1px);box-shadow:3px 3px #00000040}.action-btn[_ngcontent-%COMP%]:active{transform:translate(1px,1px);box-shadow:1px 1px #00000026}.guest-add-btn[_ngcontent-%COMP%]{background:var(--retro-orange);color:#fff}.guest-add-btn[_ngcontent-%COMP%]:hover{background:#ff7c4a}.member-remove-btn[_ngcontent-%COMP%]{background:var(--retro-pink);color:#fff}.member-remove-btn[_ngcontent-%COMP%]:hover{background:#ff1a7e}.participants-section[_ngcontent-%COMP%]{margin-top:15px}.participants-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.participant-card[_ngcontent-%COMP%]{background:#fff;padding:12px;border-radius:10px;border:3px solid var(--retro-brown);display:flex;justify-content:space-between;align-items:center;box-shadow:3px 3px #00000026;transition:transform .2s ease}.participant-card[_ngcontent-%COMP%]:hover{transform:translate(5px)}.participant-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.participant-icon[_ngcontent-%COMP%]{font-size:1.5rem}.participant-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.participant-name[_ngcontent-%COMP%]{font-weight:700;color:var(--retro-brown);font-size:1rem}.participant-label[_ngcontent-%COMP%]{font-size:.75rem;color:#666;font-style:italic}.remove-btn[_ngcontent-%COMP%]{background:var(--retro-pink);border:2px solid var(--retro-brown);color:#fff;font-size:1.2rem;cursor:pointer;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s ease;font-weight:700;flex-shrink:0}.remove-btn[_ngcontent-%COMP%]:hover{background:#d90058;transform:rotate(90deg)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#3d2314cc;display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease;padding:15px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal[_ngcontent-%COMP%]{background:var(--retro-cream);padding:20px;border-radius:15px;border:4px solid var(--retro-brown);box-shadow:0 10px 40px #0000004d;width:100%;max-width:350px;position:relative;animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-title[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:15px;color:var(--retro-brown);text-align:center;font-weight:700}.guest-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:3px solid var(--retro-brown);border-radius:10px;font-size:1rem;margin-bottom:15px;font-family:Comic Sans MS,cursive;background:#fff;box-sizing:border-box}.guest-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--retro-blue);box-shadow:0 0 0 3px #8338ec33}.modal-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.btn-cancel[_ngcontent-%COMP%], .btn-confirm[_ngcontent-%COMP%]{flex:1;padding:12px;border:3px solid var(--retro-brown);border-radius:10px;font-size:.95rem;font-weight:700;cursor:pointer;transition:all .2s ease;box-shadow:3px 3px #00000040;font-family:Comic Sans MS,cursive}.btn-cancel[_ngcontent-%COMP%]{background:#ccc;color:var(--retro-brown)}.btn-cancel[_ngcontent-%COMP%]:hover{background:#bbb;transform:translate(-2px,-2px);box-shadow:5px 5px #00000040}.btn-confirm[_ngcontent-%COMP%]{background:var(--retro-green);color:var(--retro-brown)}.btn-confirm[_ngcontent-%COMP%]:hover:not(:disabled){background:#05e094;transform:translate(-2px,-2px);box-shadow:5px 5px #00000040}.btn-confirm[_ngcontent-%COMP%]:disabled{background:#ccc;color:#888;cursor:not-allowed;opacity:.5}.footer[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.reset-btn[_ngcontent-%COMP%]{background:var(--retro-pink);color:#fff;border:3px solid var(--retro-brown);border-radius:12px;padding:12px 25px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s ease;box-shadow:var(--shadow);font-family:Comic Sans MS,cursive}.reset-btn[_ngcontent-%COMP%]:hover{background:#d90058;transform:translate(-2px,-2px);box-shadow:6px 6px #00000040}.reset-btn[_ngcontent-%COMP%]:active{transform:translate(2px,2px);box-shadow:2px 2px #00000040}@media screen and (max-width: 500px){.container[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]{padding:12px;margin-bottom:12px}.title[_ngcontent-%COMP%]{font-size:1.4rem}.date[_ngcontent-%COMP%]{font-size:.75rem}.counter-section[_ngcontent-%COMP%]{padding:15px;margin-bottom:12px}.counter-number[_ngcontent-%COMP%]{font-size:2.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:10px}.family-grid[_ngcontent-%COMP%]{gap:8px}.member-btn[_ngcontent-%COMP%]{padding:12px 10px;font-size:.9rem}.action-btn[_ngcontent-%COMP%]{padding:6px 4px;font-size:.9rem}.participant-card[_ngcontent-%COMP%]{padding:10px}.participant-icon[_ngcontent-%COMP%]{font-size:1.3rem}.participant-name[_ngcontent-%COMP%]{font-size:.9rem}}@media screen and (max-width: 350px){.family-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};wu(Ma,By).catch(e=>console.error(e));
